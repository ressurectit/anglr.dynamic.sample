{"version":3,"file":"7552.client.chunk.4b58232e10713a73bd3b.js","mappings":"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","sources":["webpack://ng-universal-demo/./node_modules/@anglr/dynamic/es2020/basic-components/src/dynamicItems/value/node/valueNode.component.js","webpack://ng-universal-demo/./node_modules/@anglr/dynamic/es2020/basic-components/src/dynamicItems/value/metadata/value.relationsMetadata.js","webpack://ng-universal-demo/./node_modules/@anglr/dynamic/es2020/src/modules/codeEditor/misc/types/languageModels/jsonLanguageModel.js"],"sourcesContent":["function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nimport { Component, ChangeDetectionStrategy, ChangeDetectorRef, ElementRef } from '@angular/core';\nimport { CodeEditorDialogComponent, getJson, JsonLanguageModel } from '@anglr/dynamic';\nimport { RelationsNodeBase, RelationNodeOutputSAComponent, RelationsNodeHeaderSAComponent } from '@anglr/dynamic/relations-editor';\nimport { TitledDialogService } from '@anglr/common/material';\nimport { isPresent } from '@jscrpt/common';\nimport { lastValueFrom } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@anglr/common/material\";\n/**\n * Relations node component for value\n */\n\nexport class ValueNodeSAComponent extends RelationsNodeBase {\n  //######################### constructor #########################\n  constructor(changeDetector, element, dialog) {\n    super(changeDetector, element);\n    this.dialog = dialog;\n  } //######################### protected methods - template bindings #########################\n\n  /**\n   * Shows code editor\n   */\n\n\n  showCodeEditor() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      const content = isPresent(_this.metadata?.relationsOptions?.value) ? JSON.stringify(_this.metadata?.relationsOptions?.value, null, 4) : '';\n      const result = yield lastValueFrom(_this.dialog.open(CodeEditorDialogComponent, {\n        title: 'Code editor',\n        width: '75vw',\n        height: '75vh',\n        data: {\n          content,\n          languageModel: JsonLanguageModel\n        }\n      }).afterClosed());\n\n      if (!_this.metadata?.relationsOptions) {\n        return;\n      }\n\n      if (isPresent(result)) {\n        _this.metadata.relationsOptions.value = getJson(result.content);\n\n        _this.history.getNewState();\n      }\n    })();\n  }\n\n}\n\nValueNodeSAComponent.ɵfac = function ValueNodeSAComponent_Factory(t) {\n  return new (t || ValueNodeSAComponent)(i0.ɵɵdirectiveInject(i0.ChangeDetectorRef), i0.ɵɵdirectiveInject(i0.ElementRef), i0.ɵɵdirectiveInject(i1.TitledDialogService));\n};\n\nValueNodeSAComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n  type: ValueNodeSAComponent,\n  selectors: [[\"value-node\"]],\n  standalone: true,\n  features: [i0.ɵɵInheritDefinitionFeature, i0.ɵɵStandaloneFeature],\n  decls: 12,\n  vars: 5,\n  consts: [[\"name\", \"value\", 3, \"parent\", \"destroySubject\"], [1, \"node-content\"], [1, \"inputs-outputs\"], [1, \"inputs\"], [1, \"outputs\"], [1, \"output\"], [\"name\", \"value\", 3, \"parentCoordiantes\", \"zoomLevel\", \"parent\"], [\"type\", \"button\", 1, \"dynamic-btn\", \"dynamic-btn-primary\", 3, \"click\"]],\n  template: function ValueNodeSAComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelement(0, \"relations-node-header\", 0);\n      i0.ɵɵelementStart(1, \"div\", 1)(2, \"div\", 2);\n      i0.ɵɵelement(3, \"div\", 3);\n      i0.ɵɵelementStart(4, \"div\", 4)(5, \"div\", 5)(6, \"div\");\n      i0.ɵɵtext(7, \"value\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(8, \"relation-node-output\", 6);\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(9, \"button\", 7);\n      i0.ɵɵlistener(\"click\", function ValueNodeSAComponent_Template_button_click_9_listener() {\n        return ctx.showCodeEditor();\n      });\n      i0.ɵɵelementStart(10, \"span\");\n      i0.ɵɵtext(11, \"edit\");\n      i0.ɵɵelementEnd()()();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵproperty(\"parent\", ctx)(\"destroySubject\", ctx.destroySubject);\n      i0.ɵɵadvance(8);\n      i0.ɵɵproperty(\"parentCoordiantes\", ctx.nodePosition)(\"zoomLevel\", ctx.zoomLevel)(\"parent\", ctx);\n    }\n  },\n  dependencies: [RelationsNodeHeaderSAComponent, RelationNodeOutputSAComponent],\n  encapsulation: 2,\n  changeDetection: 0\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(ValueNodeSAComponent, [{\n    type: Component,\n    args: [{\n      selector: 'value-node',\n      standalone: true,\n      imports: [RelationsNodeHeaderSAComponent, RelationNodeOutputSAComponent],\n      changeDetection: ChangeDetectionStrategy.OnPush,\n      template: \"<relations-node-header [parent]=\\\"this\\\" [destroySubject]=\\\"destroySubject\\\" name=\\\"value\\\"></relations-node-header>\\n\\n<div class=\\\"node-content\\\">\\n    <div class=\\\"inputs-outputs\\\">\\n        <div class=\\\"inputs\\\">\\n        </div>\\n\\n        <div class=\\\"outputs\\\">\\n            <div class=\\\"output\\\">\\n                <div>value</div>\\n                <relation-node-output [parentCoordiantes]=\\\"nodePosition\\\" [zoomLevel]=\\\"zoomLevel\\\" name=\\\"value\\\" [parent]=\\\"this\\\"></relation-node-output>\\n            </div>\\n        </div>\\n    </div>\\n\\n    <button type=\\\"button\\\" class=\\\"dynamic-btn dynamic-btn-primary\\\" (click)=\\\"showCodeEditor()\\\">\\n        <span>edit</span>\\n    </button>\\n</div>\"\n    }]\n  }], function () {\n    return [{\n      type: i0.ChangeDetectorRef\n    }, {\n      type: i0.ElementRef\n    }, {\n      type: i1.TitledDialogService\n    }];\n  }, null);\n})();","import { ValueNodeSAComponent } from '../node/valueNode.component';\n/**\n * Value relations metadata\n */\n\nexport class ValueRelationsEditorMetadata {\n  //######################### constructor #########################\n  constructor() {\n    //######################### public properties - implementation of RelationsEditorMetadataDescriptor #########################\n\n    /**\n     * @inheritdoc\n     */\n    this.metaInfo = {\n      name: 'Value',\n      description: 'Initial, default value',\n      group: 'Data'\n    };\n    /**\n     * @inheritdoc\n     */\n\n    this.nodeDefinition = ValueNodeSAComponent;\n    Object.freeze(this);\n  }\n\n}","import { LanguageModel } from './languageModel';\n/**\n * Json language model for code editor\n */\n\nexport const JsonLanguageModel = new LanguageModel('json', 'json', editor => {\n  return editor.getModel()?.getValue() ?? '';\n});"],"names":["asyncGeneratorStep","gen","resolve","reject","_next","_throw","key","arg","info","value","error","done","Promise","then","ValueNodeSAComponent","constructor","changeDetector","element","dialog","super","this","showCodeEditor","fn","_this","content","metadata","relationsOptions","JSON","stringify","result","lastValueFrom","open","title","width","height","data","languageModel","afterClosed","history","getNewState","self","args","arguments","apply","err","undefined","t","type","selectors","standalone","features","decls","vars","consts","template","rf","ctx","destroySubject","nodePosition","zoomLevel","dependencies","encapsulation","changeDetection","ValueRelationsEditorMetadata","metaInfo","name","description","group","nodeDefinition","Object","freeze","JsonLanguageModel","editor","getModel","getValue"],"sourceRoot":""}
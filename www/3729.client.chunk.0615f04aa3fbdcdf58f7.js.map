{"version":3,"file":"3729.client.chunk.0615f04aa3fbdcdf58f7.js","mappings":"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","sources":["webpack://ng-universal-demo/./node_modules/@anglr/dynamic/es2020/relations-editor/src/components/relationsNodeBase.js","webpack://ng-universal-demo/./node_modules/@anglr/dynamic/es2020/relations-editor/src/components/relationsNodeEndpointBase.js","webpack://ng-universal-demo/./node_modules/@anglr/dynamic/es2020/relations-editor/src/components/relationsNodePropertiesEditor/relationsNodePropertiesEditor.model.js","webpack://ng-universal-demo/./node_modules/@anglr/dynamic/es2020/relations-editor/src/components/relationsNodePropertiesEditor/relationsNodePropertiesEditor.component.js","webpack://ng-universal-demo/./node_modules/@anglr/dynamic/es2020/relations-editor/src/pipes/toColor/toColor.pipe.js","webpack://ng-universal-demo/./node_modules/@anglr/dynamic/es2020/relations-editor/src/components/relationsNodeHeader/relationsNodeHeader.component.js","webpack://ng-universal-demo/./node_modules/@anglr/dynamic/es2020/relations-editor/src/components/relationsNodeInput/relationsNodeInput.component.js","webpack://ng-universal-demo/./node_modules/@anglr/dynamic/es2020/relations-editor/src/components/relationsNodeOutput/relationsNodeOutput.component.js"],"sourcesContent":["import { HostListener, ViewChildren, QueryList, ChangeDetectorRef, ElementRef, Directive, inject } from '@angular/core';\nimport { nameof } from '@jscrpt/common';\nimport { Subject } from 'rxjs';\nimport { RelationNodeOutputSAComponent } from './relationsNodeOutput/relationsNodeOutput.component';\nimport { RelationNodeInputSAComponent } from './relationsNodeInput/relationsNodeInput.component';\nimport { RELATIONS_HISTORY_MANAGER } from '../misc/tokens';\nimport * as i0 from \"@angular/core\";\n/**\n * Base class for relations node components\n */\n\nexport class RelationsNodeBase {\n  //######################### constructor #########################\n  constructor(changeDetector, element) {\n    this.changeDetector = changeDetector;\n    this.element = element;\n    /**\n     * Metadata history manager\n     */\n\n    this.history = inject(RELATIONS_HISTORY_MANAGER);\n    /**\n     * Indication whether is node initialized\n     */\n\n    this.initialized = false;\n    /**\n     * Indication whether user is dragging\n     */\n\n    this.isDragging = false;\n    /**\n     * Indication whether user moved node during drag\n     */\n\n    this.moved = false;\n    /**\n     * Last mouse down position\n     */\n\n    this.lastMouseDownPosition = {\n      x: 0,\n      y: 0\n    };\n    /**\n     * Node position on last mouse down event\n     */\n\n    this.lastMouseDownNodePosition = {\n      x: 0,\n      y: 0\n    };\n    /**\n     * Node position\n     */\n\n    this.nodePosition = {\n      x: 0,\n      y: 0\n    };\n    /**\n     * Array of all available outputs\n     */\n\n    this.ɵAllOutputs = [];\n    /**\n     * Object storing inputs by their names\n     */\n\n    this.ɵInputs = {};\n    /**\n     * Object storing outputs by their names\n     */\n\n    this.ɵOutputs = {};\n    /**\n     * Subject used for destroying node by user\n     */\n\n    this.destroySubject = new Subject(); //######################### public properties - implementation of RelationsNode #########################\n\n    /**\n     * @inheritdoc\n     */\n\n    this.zoomLevel = 1;\n    this.element.nativeElement.classList.add('relations-node');\n    this.updatePosition();\n    this.observer = new ResizeObserver(() => this.updateRelations());\n    this.observer.observe(this.element.nativeElement);\n  }\n  /**\n   * @inheritdoc\n   */\n\n\n  get id() {\n    return this.metadata?.id ?? '';\n  }\n  /**\n   * @inheritdoc\n   */\n\n\n  get allOutputs() {\n    return this.ɵAllOutputs;\n  }\n  /**\n   * @inheritdoc\n   */\n\n\n  get inputs() {\n    return this.ɵInputs;\n  }\n  /**\n   * @inheritdoc\n   */\n\n\n  get outputs() {\n    return this.ɵOutputs;\n  }\n  /**\n   * @inheritdoc\n   */\n\n\n  get destroy() {\n    return this.destroySubject.asObservable();\n  } //######################### public methods - implementation of OnChanges #########################\n\n  /**\n   * Called when input value changes\n   */\n\n\n  ngOnChanges(changes) {\n    //initial change of metadata\n    if (nameof('metadata') in changes && this.metadata) {\n      if (this.metadata.nodeMetadata?.coordinates) {\n        this.nodePosition = this.metadata.nodeMetadata.coordinates;\n        this.updatePosition();\n      }\n\n      this.metadataSet();\n    }\n  } //######################### public methods - implementation of OnDestroy #########################\n\n  /**\n   * Called when component is destroyed\n   */\n\n\n  ngOnDestroy() {\n    this.observer?.disconnect();\n  } //######################### public methods - implementation of RelationsNode #########################\n\n  /**\n   * @inheritdoc\n   */\n\n\n  invalidateVisuals() {\n    this.changeDetector.detectChanges();\n\n    if (!this.initialized) {\n      this.initialized = true;\n      this.initEndpoints();\n    }\n  }\n  /**\n   * @inheritdoc\n   */\n\n\n  initialize() {} //######################### protected methods methods - host listeners #########################\n\n  /**\n   * Mouse down event\n   * @param event\n   */\n\n\n  onMouseDown(event) {\n    this.moved = false;\n    this.isDragging = true;\n    this.lastMouseDownPosition = {\n      x: event.clientX,\n      y: event.clientY\n    };\n    this.lastMouseDownNodePosition = {\n      x: this.nodePosition.x,\n      y: this.nodePosition.y\n    };\n    event.stopImmediatePropagation();\n  }\n  /**\n   * Mouse move event\n   * @param event\n   */\n\n\n  onMouseMove(event) {\n    if (this.isDragging) {\n      this.moved = true;\n      this.nodePosition = {\n        x: this.lastMouseDownNodePosition.x + (event.clientX - this.lastMouseDownPosition.x) * 1 / this.zoomLevel,\n        y: this.lastMouseDownNodePosition.y + (event.clientY - this.lastMouseDownPosition.y) * 1 / this.zoomLevel\n      };\n      this.updatePosition();\n      event.stopImmediatePropagation();\n      event.preventDefault();\n      this.updateRelations();\n    }\n  }\n  /**\n   * Mouse up event\n   * @param event\n   */\n\n\n  onMouseUp(event) {\n    if (this.isDragging) {\n      if (this.moved) {\n        this.history.getNewState();\n      }\n\n      this.isDragging = false;\n      event.stopImmediatePropagation();\n      event.preventDefault();\n    }\n  } //######################### protected methods #########################\n\n  /**\n   * Initialize endpoints\n   */\n\n\n  initEndpoints() {\n    const updateInputs = () => {\n      this.ɵInputs = {};\n      this.inputsChildren?.forEach(input => {\n        if (input.name) {\n          this.ɵInputs[input.name] = input;\n        }\n      });\n      Object.freeze(this.ɵInputs);\n    };\n\n    const updateOutputs = () => {\n      this.ɵAllOutputs = this.outputsChildren.toArray();\n      this.ɵOutputs = {};\n      this.outputsChildren?.forEach(output => {\n        if (output.name) {\n          this.ɵOutputs[output.name] = output;\n        }\n      });\n      Object.freeze(this.ɵOutputs);\n    };\n\n    this.inputsChildren?.changes.subscribe(() => updateInputs());\n    this.outputsChildren?.changes.subscribe(() => updateOutputs());\n    updateInputs();\n    updateOutputs();\n  }\n  /**\n   * Updates node relations\n   */\n\n\n  updateRelations() {\n    this.inputsChildren.forEach(input => {\n      input.updateRelation();\n    });\n    this.outputsChildren.forEach(output => {\n      output.updateRelation();\n    });\n  }\n  /**\n   * Updates node position\n   */\n\n\n  updatePosition() {\n    this.element.nativeElement.style.left = `${this.nodePosition.x}px`;\n    this.element.nativeElement.style.top = `${this.nodePosition.y}px`;\n\n    if (this.metadata?.nodeMetadata?.coordinates) {\n      this.metadata.nodeMetadata.coordinates.x = this.nodePosition.x;\n      this.metadata.nodeMetadata.coordinates.y = this.nodePosition.y;\n    }\n  }\n  /**\n   * Allows code to be called after metadata were set\n   */\n\n\n  metadataSet() {}\n\n}\n\nRelationsNodeBase.ɵfac = function RelationsNodeBase_Factory(t) {\n  return new (t || RelationsNodeBase)(i0.ɵɵdirectiveInject(i0.ChangeDetectorRef), i0.ɵɵdirectiveInject(i0.ElementRef));\n};\n\nRelationsNodeBase.ɵdir = /* @__PURE__ */i0.ɵɵdefineDirective({\n  type: RelationsNodeBase,\n  viewQuery: function RelationsNodeBase_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(RelationNodeInputSAComponent, 5);\n      i0.ɵɵviewQuery(RelationNodeOutputSAComponent, 5);\n    }\n\n    if (rf & 2) {\n      let _t;\n\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.inputsChildren = _t);\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.outputsChildren = _t);\n    }\n  },\n  hostBindings: function RelationsNodeBase_HostBindings(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵlistener(\"mousedown\", function RelationsNodeBase_mousedown_HostBindingHandler($event) {\n        return ctx.onMouseDown($event);\n      })(\"mousemove\", function RelationsNodeBase_mousemove_HostBindingHandler($event) {\n        return ctx.onMouseMove($event);\n      }, false, i0.ɵɵresolveWindow)(\"mouseup\", function RelationsNodeBase_mouseup_HostBindingHandler($event) {\n        return ctx.onMouseUp($event);\n      }, false, i0.ɵɵresolveWindow);\n    }\n  },\n  features: [i0.ɵɵNgOnChangesFeature]\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(RelationsNodeBase, [{\n    type: Directive\n  }], function () {\n    return [{\n      type: i0.ChangeDetectorRef\n    }, {\n      type: i0.ElementRef\n    }];\n  }, {\n    inputsChildren: [{\n      type: ViewChildren,\n      args: [RelationNodeInputSAComponent]\n    }],\n    outputsChildren: [{\n      type: ViewChildren,\n      args: [RelationNodeOutputSAComponent]\n    }],\n    onMouseDown: [{\n      type: HostListener,\n      args: ['mousedown', ['$event']]\n    }],\n    onMouseMove: [{\n      type: HostListener,\n      args: ['window:mousemove', ['$event']]\n    }],\n    onMouseUp: [{\n      type: HostListener,\n      args: ['window:mouseup', ['$event']]\n    }]\n  });\n})();","import { Directive, ElementRef, HostBinding, Input } from '@angular/core';\nimport { RelationsNodeManager } from '../services';\nimport { RelationsCanvasSAComponent } from './relationsCanvas/relationsCanvas.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../services\";\nimport * as i2 from \"./relationsCanvas/relationsCanvas.component\";\n/**\n * Base class for relations node endpoints (inputs/outputs)\n */\n\nexport class RelationNodeEndpointBase {\n  //######################### constructor #########################\n  constructor(_element, _relationManager, _canvas) {\n    this._element = _element;\n    this._relationManager = _relationManager;\n    this._canvas = _canvas;\n    /**\n     * Indication whether component is dragging\n     */\n\n    this._isDragging = false;\n    /**\n     * Indication whether node endpoint is highlighted\n     */\n\n    this._isHighlighted = false;\n    /**\n     * Last mouse down position\n     */\n\n    this._lastMouseDownPosition = {\n      x: 0,\n      y: 0\n    }; //######################### public properties - inputs #########################\n\n    /**\n     * Parent zoom level\n     */\n\n    this.zoomLevel = 1;\n    /**\n     * Parent node coordinates\n     */\n\n    this.parentCoordiantes = {\n      x: 0,\n      y: 0\n    };\n  }\n  /**\n   * @inheritdoc\n   */\n\n\n  get parentId() {\n    return this.parent?.id ?? '';\n  } //######################### public methods - implementation of OnInit #########################\n\n  /**\n   * Initialize component\n   */\n\n\n  ngOnInit() {\n    if (!this.parent) {\n      throw new Error('Every input or output endpoint must have parent specified');\n    }\n  } //######################### public methods #########################\n\n  /**\n   * @inheritdoc\n   */\n\n\n  getCoordinates() {\n    return {\n      x: this.parentCoordiantes.x + this._element.nativeElement.offsetLeft + this._element.nativeElement.offsetWidth / 2,\n      y: this.parentCoordiantes.y + this._element.nativeElement.offsetTop + this._element.nativeElement.offsetHeight / 2\n    };\n  }\n  /**\n   * Highlight node endpoit\n   */\n\n\n  highlight() {\n    this._isHighlighted = true;\n  }\n  /**\n   * Cancel highlight for node endpoint\n   */\n\n\n  cancelHighlight() {\n    this._isHighlighted = false;\n  }\n\n}\n\nRelationNodeEndpointBase.ɵfac = function RelationNodeEndpointBase_Factory(t) {\n  return new (t || RelationNodeEndpointBase)(i0.ɵɵdirectiveInject(i0.ElementRef), i0.ɵɵdirectiveInject(i1.RelationsNodeManager), i0.ɵɵdirectiveInject(i2.RelationsCanvasSAComponent));\n};\n\nRelationNodeEndpointBase.ɵdir = /* @__PURE__ */i0.ɵɵdefineDirective({\n  type: RelationNodeEndpointBase,\n  hostVars: 2,\n  hostBindings: function RelationNodeEndpointBase_HostBindings(rf, ctx) {\n    if (rf & 2) {\n      i0.ɵɵclassProp(\"highlighted\", ctx._isHighlighted);\n    }\n  },\n  inputs: {\n    name: \"name\",\n    zoomLevel: \"zoomLevel\",\n    parentCoordiantes: \"parentCoordiantes\",\n    parent: \"parent\"\n  }\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(RelationNodeEndpointBase, [{\n    type: Directive\n  }], function () {\n    return [{\n      type: i0.ElementRef\n    }, {\n      type: i1.RelationsNodeManager\n    }, {\n      type: i2.RelationsCanvasSAComponent\n    }];\n  }, {\n    _isHighlighted: [{\n      type: HostBinding,\n      args: ['class.highlighted']\n    }],\n    name: [{\n      type: Input\n    }],\n    zoomLevel: [{\n      type: Input\n    }],\n    parentCoordiantes: [{\n      type: Input\n    }],\n    parent: [{\n      type: Input\n    }]\n  });\n})();","import { mapValuesToThis } from '@jscrpt/common';\n/**\n * Relations node properties model\n */\n\nexport class RelationsNodePropertiesModel {\n  //######################### constructor #########################\n  constructor(value) {\n    //######################### public properties #########################\n\n    /**\n     * @inheritdoc\n     */\n    this.displayName = null;\n    /**\n     * @inheritdoc\n     */\n\n    this.scope = null;\n    mapValuesToThis.bind(this)(value);\n  }\n\n}","import { Component, ChangeDetectionStrategy, Inject } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { ReactiveFormsModule } from '@angular/forms';\nimport { MatDialogModule } from '@angular/material/dialog';\nimport { TITLED_DIALOG_DATA } from '@anglr/common/material';\nimport { FormModelBuilder } from '@anglr/common/forms';\nimport { RelationsNodePropertiesModel } from './relationsNodePropertiesEditor.model';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@anglr/common/forms\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/material/dialog\";\nimport * as i4 from \"@angular/forms\";\n/**\n * Component used for editing display name of relations node\n */\n\nfunction RelationsNodePropertiesEditorSAComponent_input_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"input\", 8);\n  }\n\n  if (rf & 2) {\n    i0.ɵɵproperty(\"readonly\", true);\n  }\n}\n\nfunction RelationsNodePropertiesEditorSAComponent_select_7_option_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 12);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const scope_r3 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", scope_r3);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(scope_r3);\n  }\n}\n\nfunction RelationsNodePropertiesEditorSAComponent_select_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"select\", 9)(1, \"option\", 10);\n    i0.ɵɵtext(2, \"---\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(3, RelationsNodePropertiesEditorSAComponent_select_7_option_3_Template, 2, 2, \"option\", 11);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.scopes);\n  }\n}\n\nexport class RelationsNodePropertiesEditorSAComponent {\n  //######################### constructor #########################\n  constructor(data, formModelBuilder) {\n    this.data = data;\n    /**\n     * Array of available scopes\n     */\n\n    this.scopes = [];\n    this.form = formModelBuilder.build(new RelationsNodePropertiesModel(data.properties));\n    this.scopes = data.scopeRegister.scopes;\n  }\n\n}\n\nRelationsNodePropertiesEditorSAComponent.ɵfac = function RelationsNodePropertiesEditorSAComponent_Factory(t) {\n  return new (t || RelationsNodePropertiesEditorSAComponent)(i0.ɵɵdirectiveInject(TITLED_DIALOG_DATA), i0.ɵɵdirectiveInject(i1.FormModelBuilder));\n};\n\nRelationsNodePropertiesEditorSAComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n  type: RelationsNodePropertiesEditorSAComponent,\n  selectors: [[\"relations-node-properties-editor\"]],\n  standalone: true,\n  features: [i0.ɵɵProvidersFeature([FormModelBuilder]), i0.ɵɵStandaloneFeature],\n  decls: 15,\n  vars: 5,\n  consts: [[1, \"dynamic-form-group\", 3, \"formGroup\"], [1, \"dynamic-control-label\"], [\"type\", \"text\", \"formControlName\", \"displayName\", 1, \"dynamic-form-control\"], [\"class\", \"dynamic-form-control\", \"type\", \"text\", \"formControlName\", \"scope\", 3, \"readonly\", 4, \"ngIf\"], [\"class\", \"dynamic-form-control\", \"formControlName\", \"scope\", 4, \"ngIf\"], [1, \"dynamic-flex-row\", \"dynamic-flex-end\", \"dynamic-margin-top-small\"], [\"type\", \"button\", 1, \"dynamic-btn\", \"dynamic-btn-info\", \"dynamic-margin-right-extra-small\", 3, \"mat-dialog-close\"], [\"type\", \"button\", 1, \"dynamic-btn\", \"dynamic-btn-primary\", 3, \"mat-dialog-close\"], [\"type\", \"text\", \"formControlName\", \"scope\", 1, \"dynamic-form-control\", 3, \"readonly\"], [\"formControlName\", \"scope\", 1, \"dynamic-form-control\"], [\"value\", \"\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [3, \"value\"]],\n  template: function RelationsNodePropertiesEditorSAComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"label\", 1);\n      i0.ɵɵtext(2, \"display name\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(3, \"input\", 2);\n      i0.ɵɵelementStart(4, \"label\", 1);\n      i0.ɵɵtext(5, \"scope\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(6, RelationsNodePropertiesEditorSAComponent_input_6_Template, 1, 1, \"input\", 3);\n      i0.ɵɵtemplate(7, RelationsNodePropertiesEditorSAComponent_select_7_Template, 4, 1, \"select\", 4);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(8, \"div\", 5)(9, \"button\", 6)(10, \"span\");\n      i0.ɵɵtext(11, \"cancel\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(12, \"button\", 7)(13, \"span\");\n      i0.ɵɵtext(14, \"ok\");\n      i0.ɵɵelementEnd()()();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵproperty(\"formGroup\", ctx.form);\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"ngIf\", !ctx.data.scopeConfigurable);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.data.scopeConfigurable);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"mat-dialog-close\", null);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"mat-dialog-close\", ctx.form.value);\n    }\n  },\n  dependencies: [CommonModule, i2.NgForOf, i2.NgIf, MatDialogModule, i3.MatDialogClose, ReactiveFormsModule, i4.NgSelectOption, i4.ɵNgSelectMultipleOption, i4.DefaultValueAccessor, i4.SelectControlValueAccessor, i4.NgControlStatus, i4.NgControlStatusGroup, i4.FormGroupDirective, i4.FormControlName],\n  encapsulation: 2,\n  changeDetection: 0\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(RelationsNodePropertiesEditorSAComponent, [{\n    type: Component,\n    args: [{\n      selector: 'relations-node-properties-editor',\n      standalone: true,\n      imports: [CommonModule, MatDialogModule, ReactiveFormsModule],\n      providers: [FormModelBuilder],\n      changeDetection: ChangeDetectionStrategy.OnPush,\n      template: \"<div class=\\\"dynamic-form-group\\\" [formGroup]=\\\"form\\\">\\n    <label class=\\\"dynamic-control-label\\\">display name</label>\\n    <input class=\\\"dynamic-form-control\\\" type=\\\"text\\\" formControlName=\\\"displayName\\\">\\n\\n    <label class=\\\"dynamic-control-label\\\">scope</label>\\n    <input class=\\\"dynamic-form-control\\\" type=\\\"text\\\" formControlName=\\\"scope\\\" [readonly]=\\\"true\\\" *ngIf=\\\"!data.scopeConfigurable\\\">\\n\\n    <select class=\\\"dynamic-form-control\\\" formControlName=\\\"scope\\\" *ngIf=\\\"data.scopeConfigurable\\\">\\n        <option value=\\\"\\\">---</option>\\n        <option *ngFor=\\\"let scope of scopes\\\" [value]=\\\"scope\\\">{{scope}}</option>\\n    </select>\\n</div>\\n\\n<div class=\\\"dynamic-flex-row dynamic-flex-end dynamic-margin-top-small\\\">\\n    <button type=\\\"button\\\" class=\\\"dynamic-btn dynamic-btn-info dynamic-margin-right-extra-small\\\" [mat-dialog-close]=\\\"null\\\">\\n        <span>cancel</span>\\n    </button>\\n\\n    <button type=\\\"button\\\" class=\\\"dynamic-btn dynamic-btn-primary\\\" [mat-dialog-close]=\\\"form.value\\\">\\n        <span>ok</span>\\n    </button>\\n</div>\"\n    }]\n  }], function () {\n    return [{\n      type: undefined,\n      decorators: [{\n        type: Inject,\n        args: [TITLED_DIALOG_DATA]\n      }]\n    }, {\n      type: i1.FormModelBuilder\n    }];\n  }, null);\n})();","import { Pipe } from '@angular/core';\nimport { stringToColour } from '../../misc/utils';\nimport * as i0 from \"@angular/core\";\n/**\n * Converts string to color code\n */\n\nexport class ToColorSAPipe {\n  /**\n   * Converts string to color code\n   * @param value - String to be converted\n   */\n  transform(value) {\n    if (!value) {\n      return null;\n    }\n\n    return stringToColour(value);\n  }\n\n}\n\nToColorSAPipe.ɵfac = function ToColorSAPipe_Factory(t) {\n  return new (t || ToColorSAPipe)();\n};\n\nToColorSAPipe.ɵpipe = /* @__PURE__ */i0.ɵɵdefinePipe({\n  name: \"toColor\",\n  type: ToColorSAPipe,\n  pure: true,\n  standalone: true\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(ToColorSAPipe, [{\n    type: Pipe,\n    args: [{\n      name: 'toColor',\n      standalone: true\n    }]\n  }], null, null);\n})();","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nimport { Component, ChangeDetectionStrategy, Input, ChangeDetectorRef, Inject } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { TitledDialogService } from '@anglr/common/material';\nimport { MetadataHistoryManager } from '@anglr/dynamic';\nimport { TooltipModule } from '@anglr/common';\nimport { lastValueFrom } from 'rxjs';\nimport { RelationsNodePropertiesEditorSAComponent } from '../relationsNodePropertiesEditor/relationsNodePropertiesEditor.component';\nimport { ToColorSAPipe } from '../../pipes/toColor/toColor.pipe';\nimport { RELATIONS_HISTORY_MANAGER } from '../../misc/tokens';\nimport { ScopeRegister } from '../../services';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@anglr/common/material\";\nimport * as i2 from \"../../services\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@anglr/common\";\nimport * as i5 from \"@anglr/dynamic\";\n/**\n * Component used for displaying relations node header\n */\n\nfunction RelationsNodeHeaderSAComponent_span_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 5);\n    i0.ɵɵpipe(1, \"toColor\");\n    i0.ɵɵtext(2, \"{}\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵstyleProp(\"color\", i0.ɵɵpipeBind1(1, 3, ctx_r0.parent == null ? null : ctx_r0.parent.metadata == null ? null : ctx_r0.parent.metadata.scope));\n    i0.ɵɵproperty(\"tooltip\", ctx_r0.parent == null ? null : ctx_r0.parent.metadata == null ? null : ctx_r0.parent.metadata.scope);\n  }\n}\n\nfunction RelationsNodeHeaderSAComponent_button_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 6);\n    i0.ɵɵlistener(\"click\", function RelationsNodeHeaderSAComponent_button_5_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.destroySubject.next());\n    });\n    i0.ɵɵelement(1, \"span\", 7);\n    i0.ɵɵelementEnd();\n  }\n}\n\nexport class RelationsNodeHeaderSAComponent {\n  //######################### constructor #########################\n  constructor(dialog, changeDetector, scopeRegister, history) {\n    this.dialog = dialog;\n    this.changeDetector = changeDetector;\n    this.scopeRegister = scopeRegister;\n    this.history = history;\n  } //######################### protected methods - template bindings #########################\n\n  /**\n   * Opens editation of properties\n   */\n\n\n  editProperties() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      const result = yield lastValueFrom(_this.dialog.open(RelationsNodePropertiesEditorSAComponent, {\n        title: 'edit properties',\n        width: '30vw',\n        data: {\n          properties: {\n            displayName: _this.parent?.metadata?.displayName || _this.name || _this.parent?.metadata?.id || '',\n            scope: _this.parent?.metadata?.scope ?? ''\n          },\n          scopeConfigurable: _this.parent?.metadata?.nodeMetadata?.scopeConfigurable ?? false,\n          scopeRegister: _this.scopeRegister\n        }\n      }).afterClosed());\n\n      if (result && _this.parent?.metadata) {\n        _this.parent.metadata.displayName = result.displayName ?? undefined;\n        _this.parent.metadata.scope = result.scope ?? undefined;\n\n        _this.history.getNewState();\n\n        _this.changeDetector.detectChanges();\n      }\n    })();\n  }\n\n}\n\nRelationsNodeHeaderSAComponent.ɵfac = function RelationsNodeHeaderSAComponent_Factory(t) {\n  return new (t || RelationsNodeHeaderSAComponent)(i0.ɵɵdirectiveInject(i1.TitledDialogService), i0.ɵɵdirectiveInject(i0.ChangeDetectorRef), i0.ɵɵdirectiveInject(i2.ScopeRegister), i0.ɵɵdirectiveInject(RELATIONS_HISTORY_MANAGER));\n};\n\nRelationsNodeHeaderSAComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n  type: RelationsNodeHeaderSAComponent,\n  selectors: [[\"relations-node-header\"]],\n  inputs: {\n    parent: \"parent\",\n    destroySubject: \"destroySubject\",\n    name: \"name\"\n  },\n  standalone: true,\n  features: [i0.ɵɵStandaloneFeature],\n  decls: 6,\n  vars: 3,\n  consts: [[1, \"header-content\"], [\"class\", \"dynamic-margin-horizontal-extra-small dynamic-bold\", 3, \"tooltip\", \"color\", 4, \"ngIf\"], [\"type\", \"button\", 1, \"dynamic-btn-icon\", \"edit-icon\", 3, \"click\"], [1, \"fas\", \"fa-pen\"], [\"type\", \"button\", \"class\", \"dynamic-btn-icon destroy-icon\", 3, \"click\", 4, \"ngIf\"], [1, \"dynamic-margin-horizontal-extra-small\", \"dynamic-bold\", 3, \"tooltip\"], [\"type\", \"button\", 1, \"dynamic-btn-icon\", \"destroy-icon\", 3, \"click\"], [1, \"fas\", \"fa-times\"]],\n  template: function RelationsNodeHeaderSAComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵtext(1);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(2, RelationsNodeHeaderSAComponent_span_2_Template, 3, 5, \"span\", 1);\n      i0.ɵɵelementStart(3, \"button\", 2);\n      i0.ɵɵlistener(\"click\", function RelationsNodeHeaderSAComponent_Template_button_click_3_listener() {\n        return ctx.editProperties();\n      });\n      i0.ɵɵelement(4, \"span\", 3);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(5, RelationsNodeHeaderSAComponent_button_5_Template, 2, 0, \"button\", 4);\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(1);\n      i0.ɵɵtextInterpolate((ctx.parent == null ? null : ctx.parent.metadata == null ? null : ctx.parent.metadata.displayName) || ctx.name || (ctx.parent == null ? null : ctx.parent.metadata == null ? null : ctx.parent.metadata.id));\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.parent == null ? null : ctx.parent.metadata == null ? null : ctx.parent.metadata.scope);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngIf\", ctx.destroySubject);\n    }\n  },\n  dependencies: [CommonModule, i3.NgIf, TooltipModule, i4.TooltipDirective, ToColorSAPipe],\n  encapsulation: 2,\n  changeDetection: 0\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(RelationsNodeHeaderSAComponent, [{\n    type: Component,\n    args: [{\n      selector: 'relations-node-header',\n      standalone: true,\n      imports: [CommonModule, TooltipModule, ToColorSAPipe],\n      changeDetection: ChangeDetectionStrategy.OnPush,\n      template: \"<div class=\\\"header-content\\\">{{parent?.metadata?.displayName || name || parent?.metadata?.id}}</div>\\n\\n<span *ngIf=\\\"parent?.metadata?.scope\\\" [tooltip]=\\\"parent?.metadata?.scope\\\" [style.color]=\\\"parent?.metadata?.scope | toColor\\\" class=\\\"dynamic-margin-horizontal-extra-small dynamic-bold\\\">&#123;&#125;</span>\\n\\n<button type=\\\"button\\\" class=\\\"dynamic-btn-icon edit-icon\\\" (click)=\\\"editProperties()\\\">\\n    <span class=\\\"fas fa-pen\\\"></span>\\n</button>\\n\\n<button type=\\\"button\\\" *ngIf=\\\"destroySubject\\\" class=\\\"dynamic-btn-icon destroy-icon\\\" (click)=\\\"destroySubject.next()\\\">\\n    <span class=\\\"fas fa-times\\\"></span>\\n</button>\"\n    }]\n  }], function () {\n    return [{\n      type: i1.TitledDialogService\n    }, {\n      type: i0.ChangeDetectorRef\n    }, {\n      type: i2.ScopeRegister\n    }, {\n      type: i5.MetadataHistoryManager,\n      decorators: [{\n        type: Inject,\n        args: [RELATIONS_HISTORY_MANAGER]\n      }]\n    }];\n  }, {\n    parent: [{\n      type: Input\n    }],\n    destroySubject: [{\n      type: Input\n    }],\n    name: [{\n      type: Input\n    }]\n  });\n})();","import { Component, ChangeDetectionStrategy, HostListener } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { RelationNodeEndpointBase } from '../relationsNodeEndpointBase';\nimport { MouseButton } from '../../misc/enums';\nimport { INVALIDATE_DROP } from '../../misc/constants';\nimport * as i0 from \"@angular/core\";\n/**\n * Component used to display relation node input\n */\n\nexport class RelationNodeInputSAComponent extends RelationNodeEndpointBase {\n  //######################### public methods - implementation of OnDestroy #########################\n\n  /**\n   * Called when component is destroyed\n   */\n  ngOnDestroy() {\n    if (this._relation) {\n      this._relation.destroy();\n    }\n  } //######################### public methods - implementation of RelationsInput #########################\n\n  /**\n   * @inheritdoc\n   */\n\n\n  addRelation(relation) {\n    if (this._relation) {\n      //Same relation\n      if (this._relation.start?.x === relation.start?.x && this._relation.start?.y === relation.start?.y) {\n        return false;\n      }\n\n      this._relation.destroy();\n    }\n\n    this._relation = relation;\n    return true;\n  }\n  /**\n   * @inheritdoc\n   */\n\n\n  endRelation(relation) {\n    if (this.addRelation(relation)) {\n      this.updateRelation();\n    }\n  } //######################### public methods - overrides #########################\n\n  /**\n   * Updates node output relation\n   */\n\n\n  updateRelation() {\n    if (!this._relation) {\n      return;\n    }\n\n    this._relation.end = this.getCoordinates();\n    this._relation.input = this;\n\n    this._relation.invalidateVisuals();\n  } //######################### protected methods - host listeners #########################\n\n  /**\n   * Mouse enter event, marks input as active\n   * @param event - Mouse event that occured\n   */\n\n\n  _onMouseEnter(event) {\n    if (event.buttons === MouseButton.LEFT) {\n      this._relationManager.setActiveInput(this);\n    }\n\n    this._relation?.highlight();\n  }\n  /**\n   * Mouse leave event, clears marked active input\n   * @param event - Mouse event that occured\n   */\n\n\n  _onMouseLeave(event) {\n    if (event.buttons === MouseButton.LEFT) {\n      this._relationManager.setActiveInput(null);\n    }\n\n    this._relation?.cancelHighlight();\n  }\n  /**\n   * Mouse down event, starts dragging\n   * @param event - Mouse event that occured\n   */\n\n\n  _onMouseDown(event) {\n    event.stopImmediatePropagation();\n    event.preventDefault();\n    this._lastMouseDownPosition = {\n      x: event.clientX,\n      y: event.clientY\n    };\n    this._tempRelation = this._relation;\n    this._relation = null;\n    this._isDragging = true;\n  }\n  /**\n   * Mouse move event on whole window\n   * @param event - Mouse event that occured\n   */\n\n\n  _onMouseMove(event) {\n    if (this._isDragging) {\n      event.stopImmediatePropagation();\n      event.preventDefault();\n\n      if (this._tempRelation) {\n        this._tempRelation.end = {\n          x: this.getCoordinates().x + (event.clientX - this._lastMouseDownPosition?.x) * 1 / this.zoomLevel,\n          y: this.getCoordinates().y + (event.clientY - this._lastMouseDownPosition?.y) * 1 / this.zoomLevel\n        };\n\n        this._tempRelation.invalidateVisuals();\n      }\n    }\n  }\n  /**\n   * Mouse up event on whole window\n   * @param event - Mouse event that occured\n   */\n\n\n  _onMouseUp(event) {\n    if (this._isDragging) {\n      this._isDragging = false;\n      event.stopImmediatePropagation();\n      event.preventDefault();\n      this._tempRelation?.invalidateVisuals(INVALIDATE_DROP);\n    }\n  }\n\n}\n\nRelationNodeInputSAComponent.ɵfac = /* @__PURE__ */function () {\n  let ɵRelationNodeInputSAComponent_BaseFactory;\n  return function RelationNodeInputSAComponent_Factory(t) {\n    return (ɵRelationNodeInputSAComponent_BaseFactory || (ɵRelationNodeInputSAComponent_BaseFactory = i0.ɵɵgetInheritedFactory(RelationNodeInputSAComponent)))(t || RelationNodeInputSAComponent);\n  };\n}();\n\nRelationNodeInputSAComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n  type: RelationNodeInputSAComponent,\n  selectors: [[\"relation-node-input\"]],\n  hostBindings: function RelationNodeInputSAComponent_HostBindings(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵlistener(\"mouseenter\", function RelationNodeInputSAComponent_mouseenter_HostBindingHandler($event) {\n        return ctx._onMouseEnter($event);\n      })(\"mouseleave\", function RelationNodeInputSAComponent_mouseleave_HostBindingHandler($event) {\n        return ctx._onMouseLeave($event);\n      })(\"mousedown\", function RelationNodeInputSAComponent_mousedown_HostBindingHandler($event) {\n        return ctx._onMouseDown($event);\n      })(\"mousemove\", function RelationNodeInputSAComponent_mousemove_HostBindingHandler($event) {\n        return ctx._onMouseMove($event);\n      }, false, i0.ɵɵresolveWindow)(\"mouseup\", function RelationNodeInputSAComponent_mouseup_HostBindingHandler($event) {\n        return ctx._onMouseUp($event);\n      }, false, i0.ɵɵresolveWindow);\n    }\n  },\n  standalone: true,\n  features: [i0.ɵɵInheritDefinitionFeature, i0.ɵɵStandaloneFeature],\n  decls: 0,\n  vars: 0,\n  template: function RelationNodeInputSAComponent_Template(rf, ctx) {},\n  dependencies: [CommonModule],\n  encapsulation: 2,\n  changeDetection: 0\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(RelationNodeInputSAComponent, [{\n    type: Component,\n    args: [{\n      selector: 'relation-node-input',\n      template: '',\n      standalone: true,\n      imports: [CommonModule],\n      changeDetection: ChangeDetectionStrategy.OnPush\n    }]\n  }], null, {\n    _onMouseEnter: [{\n      type: HostListener,\n      args: ['mouseenter', ['$event']]\n    }],\n    _onMouseLeave: [{\n      type: HostListener,\n      args: ['mouseleave', ['$event']]\n    }],\n    _onMouseDown: [{\n      type: HostListener,\n      args: ['mousedown', ['$event']]\n    }],\n    _onMouseMove: [{\n      type: HostListener,\n      args: ['window:mousemove', ['$event']]\n    }],\n    _onMouseUp: [{\n      type: HostListener,\n      args: ['window:mouseup', ['$event']]\n    }]\n  });\n})();","import { Component, ChangeDetectionStrategy, HostListener } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { RelationNodeEndpointBase } from '../relationsNodeEndpointBase';\nimport { INVALIDATE_DROP } from '../../misc/constants';\nimport * as i0 from \"@angular/core\";\n/**\n * Component used to display relation node output\n */\n\nexport class RelationNodeOutputSAComponent extends RelationNodeEndpointBase {\n  constructor() {\n    super(...arguments); //######################### protected properties #########################\n\n    /**\n     * Relations\n     */\n\n    this._relations = [];\n  } //######################### public properties - implementation of RelationsOutput #########################\n\n  /**\n   * @inheritdoc\n   */\n\n\n  get relations() {\n    return this._relations;\n  } //######################### public methods - implementation of OnDestroy #########################\n\n  /**\n   * Called when component is destroyed\n   */\n\n\n  ngOnDestroy() {\n    if (this._relations) {\n      const relations = [...this._relations];\n\n      for (const relation of relations) {\n        relation.destroy();\n      }\n    }\n  } //######################### public methods - implementation of RelationsOutput #########################\n\n  /**\n   * @inheritdoc\n   */\n\n\n  startRelation() {\n    const relation = this._canvas.createRelation();\n\n    relation.start = this.getCoordinates();\n    relation.output = this;\n    relation.destroying.subscribe(() => {\n      const index = this._relations.indexOf(relation);\n\n      if (index >= 0) {\n        this._relations.splice(index, 1);\n      }\n    });\n\n    this._relations.push(relation);\n\n    return relation;\n  } //######################### public methods - overrides #########################\n\n  /**\n   * Updates node output relations\n   */\n\n\n  updateRelation() {\n    if (!this._relations) {\n      return;\n    }\n\n    for (const relation of this._relations) {\n      relation.start = this.getCoordinates();\n      relation.invalidateVisuals();\n    }\n  } //######################### protected methods - host listeners #########################\n\n  /**\n   * Mouse down event, creates new relation\n   * @param event - Mouse event that occured\n   */\n\n\n  _onMouseDown(event) {\n    event.stopImmediatePropagation();\n    event.preventDefault();\n    this._isDragging = true;\n    this._lastMouseDownPosition = {\n      x: event.clientX,\n      y: event.clientY\n    };\n    this._relation = this.startRelation();\n  }\n  /**\n   * Mouse enter event, marks input as active\n   * @param event - Mouse event that occured\n   */\n\n\n  _onMouseEnter(_) {\n    this._relations?.forEach(relation => relation?.highlight());\n  }\n  /**\n   * Mouse leave event, clears marked active input\n   * @param event - Mouse event that occured\n   */\n\n\n  _onMouseLeave(_) {\n    this._relations?.forEach(relation => relation?.cancelHighlight());\n  }\n  /**\n   * Mouse move event - whole window\n   * @param event - Mouse event that occured\n   */\n\n\n  _onMouseMove(event) {\n    if (this._isDragging) {\n      event.stopImmediatePropagation();\n      event.preventDefault();\n\n      if (this._relation) {\n        this._relation.end = {\n          x: this.getCoordinates().x + (event.clientX - this._lastMouseDownPosition.x) * 1 / this.zoomLevel,\n          y: this.getCoordinates().y + (event.clientY - this._lastMouseDownPosition.y) * 1 / this.zoomLevel\n        };\n\n        this._relation.invalidateVisuals();\n      }\n    }\n  }\n  /**\n   * Mouse up event - whole window\n   * @param event - Mouse event that occured\n   */\n\n\n  _onMouseUp(event) {\n    if (this._isDragging) {\n      this._isDragging = false;\n      event.stopImmediatePropagation();\n      event.preventDefault();\n      this._relation?.invalidateVisuals(INVALIDATE_DROP);\n    }\n  }\n\n}\n\nRelationNodeOutputSAComponent.ɵfac = /* @__PURE__ */function () {\n  let ɵRelationNodeOutputSAComponent_BaseFactory;\n  return function RelationNodeOutputSAComponent_Factory(t) {\n    return (ɵRelationNodeOutputSAComponent_BaseFactory || (ɵRelationNodeOutputSAComponent_BaseFactory = i0.ɵɵgetInheritedFactory(RelationNodeOutputSAComponent)))(t || RelationNodeOutputSAComponent);\n  };\n}();\n\nRelationNodeOutputSAComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n  type: RelationNodeOutputSAComponent,\n  selectors: [[\"relation-node-output\"]],\n  hostBindings: function RelationNodeOutputSAComponent_HostBindings(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵlistener(\"mousedown\", function RelationNodeOutputSAComponent_mousedown_HostBindingHandler($event) {\n        return ctx._onMouseDown($event);\n      })(\"mouseenter\", function RelationNodeOutputSAComponent_mouseenter_HostBindingHandler($event) {\n        return ctx._onMouseEnter($event);\n      })(\"mouseleave\", function RelationNodeOutputSAComponent_mouseleave_HostBindingHandler($event) {\n        return ctx._onMouseLeave($event);\n      })(\"mousemove\", function RelationNodeOutputSAComponent_mousemove_HostBindingHandler($event) {\n        return ctx._onMouseMove($event);\n      }, false, i0.ɵɵresolveWindow)(\"mouseup\", function RelationNodeOutputSAComponent_mouseup_HostBindingHandler($event) {\n        return ctx._onMouseUp($event);\n      }, false, i0.ɵɵresolveWindow);\n    }\n  },\n  standalone: true,\n  features: [i0.ɵɵInheritDefinitionFeature, i0.ɵɵStandaloneFeature],\n  decls: 0,\n  vars: 0,\n  template: function RelationNodeOutputSAComponent_Template(rf, ctx) {},\n  dependencies: [CommonModule],\n  encapsulation: 2,\n  changeDetection: 0\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(RelationNodeOutputSAComponent, [{\n    type: Component,\n    args: [{\n      selector: 'relation-node-output',\n      template: '',\n      standalone: true,\n      imports: [CommonModule],\n      changeDetection: ChangeDetectionStrategy.OnPush\n    }]\n  }], null, {\n    _onMouseDown: [{\n      type: HostListener,\n      args: ['mousedown', ['$event']]\n    }],\n    _onMouseEnter: [{\n      type: HostListener,\n      args: ['mouseenter', ['$event']]\n    }],\n    _onMouseLeave: [{\n      type: HostListener,\n      args: ['mouseleave', ['$event']]\n    }],\n    _onMouseMove: [{\n      type: HostListener,\n      args: ['window:mousemove', ['$event']]\n    }],\n    _onMouseUp: [{\n      type: HostListener,\n      args: ['window:mouseup', ['$event']]\n    }]\n  });\n})();"],"names":["RelationsNodeBase","constructor","changeDetector","element","this","history","initialized","isDragging","moved","lastMouseDownPosition","x","y","lastMouseDownNodePosition","nodePosition","destroySubject","zoomLevel","nativeElement","classList","add","updatePosition","observer","ResizeObserver","updateRelations","observe","id","metadata","allOutputs","inputs","outputs","destroy","asObservable","ngOnChanges","changes","nodeMetadata","coordinates","metadataSet","ngOnDestroy","disconnect","invalidateVisuals","detectChanges","initEndpoints","initialize","onMouseDown","event","clientX","clientY","stopImmediatePropagation","onMouseMove","preventDefault","onMouseUp","getNewState","updateInputs","inputsChildren","forEach","input","name","Object","freeze","updateOutputs","outputsChildren","toArray","output","subscribe","updateRelation","style","left","top","t","type","viewQuery","rf","ctx","_t","hostBindings","$event","features","RelationNodeEndpointBase","_element","_relationManager","_canvas","_isDragging","_isHighlighted","_lastMouseDownPosition","parentCoordiantes","parentId","parent","ngOnInit","Error","getCoordinates","offsetLeft","offsetWidth","offsetTop","offsetHeight","highlight","cancelHighlight","hostVars","RelationsNodePropertiesModel","value","displayName","scope","RelationsNodePropertiesEditorSAComponent_input_6_Template","RelationsNodePropertiesEditorSAComponent_select_7_option_3_Template","scope_r3","$implicit","RelationsNodePropertiesEditorSAComponent_select_7_Template","ctx_r1","scopes","RelationsNodePropertiesEditorSAComponent","data","formModelBuilder","form","build","properties","scopeRegister","selectors","standalone","decls","vars","consts","template","scopeConfigurable","dependencies","encapsulation","changeDetection","ToColorSAPipe","transform","pure","asyncGeneratorStep","gen","resolve","reject","_next","_throw","key","arg","info","error","done","Promise","then","RelationsNodeHeaderSAComponent_span_2_Template","ctx_r0","RelationsNodeHeaderSAComponent_button_5_Template","_r3","ctx_r2","next","RelationsNodeHeaderSAComponent","dialog","editProperties","fn","_this","result","lastValueFrom","open","title","width","afterClosed","undefined","self","args","arguments","apply","err","i","RelationNodeInputSAComponent","_relation","addRelation","relation","start","endRelation","end","_onMouseEnter","buttons","setActiveInput","_onMouseLeave","_onMouseDown","_tempRelation","_onMouseMove","_onMouseUp","RelationNodeOutputSAComponent","super","_relations","relations","startRelation","createRelation","destroying","index","indexOf","splice","push","_"],"sourceRoot":""}
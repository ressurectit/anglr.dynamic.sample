"use strict";(self.webpackChunkng_universal_demo=self.webpackChunkng_universal_demo||[]).push([[7107],{87107:(t,e,n)=>{n.r(e),n.d(e,{CustomComponentsModule:()=>Rt});var s=n(14392),a=n(16577),o=n(82494),i=n(88549),r=n(94325),c=n(7097),m=n(86836),u=n(6929),d=n(55720),p=n(81473),l=n(31209),g=n(68266),h=n(46365),_=n(41762),C=n(6631),f=n(26399),v=n(88186),y=n(13816),b=n(53245),T=n(81337),w=n(37654),x=n(13341),Y=n(18968),O=n(94128),N=n(57165),D=n(27805),M=n(50478),k=n(28588),U=n(5419),A=n(78710),q=n(89952),E=n(6174),L=n(78525),Q=n(60491),R=n(86039),S=n(58433),V=n(76909),Z=n(29405);class I{constructor(t,e,n,s){this._submittedSvc=t,this._store=e,this._customComponents=n,this._dialog=s,this.name=new h.NI}createCustomComponent(){this._submittedSvc.setSubmitted(),this.name.invalid||(this._store.setData(this.name.value,{layout:{id:`root-${(0,y.Ox)(10)}`,displayName:"root",package:"basic-components",name:"stackPanel",options:{children:[]}},relations:[]}),this._customComponents.addCustomComponent(this.name.value),this._dialog.close())}}I.ɵfac=function(t){return new(t||I)(w.Y(f.G),w.Y(q.U),w.Y(T.V),w.Y(E.s))},I.ɵcmp=x.Xp({type:I,selectors:[["new-custom-component"]],standalone:!0,features:[Y._([T.V,f.G,(0,b.Y)("DYNAMIC_CONTENT_DATA")]),O.j],decls:12,vars:1,consts:[["novalidate","",3,"submit"],[1,"margin-bottom-small"],[1,"control-label"],["required","","hasError","",1,"form-control",3,"formControl"],[1,"flex-row","flex-end"],["type","button","mat-dialog-close","",1,"btn","btn-info","margin-right-extra-small"],["type","submit",1,"btn","btn-primary"]],template:function(t,e){1&t&&(N.Tg(0,"form",0),D.N("submit",(function(t){return t.stopPropagation(),t.preventDefault(),e.createCustomComponent()})),N.Tg(1,"div",1)(2,"label",2),M._(3,"Name"),N.qZ(),N._U(4,"input",3),N.qZ(),N.Tg(5,"div",4)(6,"button",5)(7,"span"),M._(8,"close"),N.qZ()(),N.Tg(9,"button",6)(10,"span"),M._(11,"ok"),N.qZ()()()()),2&t&&(k.x(4),U.Q("formControl",e.name))},dependencies:[C.I,L.ZT,_.U,Q._,R.Fj,S.JJ,S.JL,V.Q7,Z.oH,v.F,A.U],encapsulation:2,changeDetection:0});var z=n(38256),P=n(63289),j=n(52455),J=n(62957),K=n(79175),F=n(83210),G=n(19290),$=n(58265),X=n(87007),W=n(75689),B=n(6964);function H(t,e,n,s,a,o,i){try{var r=t[o](i),c=r.value}catch(t){return void n(t)}r.done?e(c):Promise.resolve(c).then(s,a)}const tt=["grid"],et=function(t){return["../customComponents/layout",t]},nt=function(t){return["../customComponents/relations",t]};function st(t,e){if(1&t){const t=z.E();N.Tg(0,"a",8),D.N("click",(function(){const e=P.CH(t).$implicit,n=j.o();return P.Kt(n.removeCustomComponent(e.name))})),N._U(1,"span",9),N.qZ(),N.Tg(2,"a",10)(3,"span"),M._(4,"layout"),N.qZ()(),N.Tg(5,"a",10)(6,"span"),M._(7,"relations"),N.qZ()()}if(2&t){const t=e.$implicit;k.x(2),U.Q("routerLink",J.VK(2,et,t.name)),k.x(3),U.Q("routerLink",J.VK(4,nt,t.name))}}let at=class{constructor(t,e,n){this._dialogSvc=t,this._customComponents=e,this._store=n,this.gridOptions={autoInitialize:!0,plugins:{dataLoader:{type:u.x,options:{data:this._customComponents.getRegisteredComponents().map((t=>({name:t})))}},paging:{type:d.f}}}}addCustomComponent(){var t,e=this;return(t=function*(){yield(0,g.n)(e._dialogSvc.open(I,{width:"75vw",title:"new custom component"}).afterClosed()),e.grid?.execute((0,l.g)(e._customComponents.getRegisteredComponents().map((t=>({name:t}))),!0))},function(){var e=this,n=arguments;return new Promise((function(s,a){var o=t.apply(e,n);function i(t){H(o,s,a,i,r,"next",t)}function r(t){H(o,s,a,i,r,"throw",t)}i(void 0)}))})()}removeCustomComponent(t){this._customComponents.removeCustomComponent(t),this._store.removeData(t),this.grid?.execute((0,l.g)(this._customComponents.getRegisteredComponents().map((t=>({name:t}))),!0))}};at.ɵfac=function(t){return new(t||at)(w.Y(p.J),w.Y(T.V),w.Y(q.U))},at.ɵcmp=x.Xp({type:at,selectors:[["custom-components-view"]],viewQuery:function(t,e){if(1&t&&K.Gf(tt,5),2&t){let t;K.iG(t=K.CR())&&(e.grid=t.first)}},features:[Y._([T.V,(0,b.Y)("DYNAMIC_CONTENT_DATA")])],decls:14,vars:2,consts:[[1,"flex-row","flex-end","margin-bottom-small"],["type","button",1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus"],[3,"gridOptions"],["grid",""],["id","name","name","name","title","Name"],["id","remove","title","remove","width","200px",3,"titleVisible"],["bodyTemplate",""],[1,"btn-icon",3,"click"],[1,"fas","fa-trash"],[1,"btn","btn-primary","margin-left-small","tight",3,"routerLink"]],template:function(t,e){1&t&&(N.Tg(0,"div"),M._(1,"Custom components"),N.qZ(),N.Tg(2,"div",0)(3,"button",1),D.N("click",(function(){return e.addCustomComponent()})),N._U(4,"span",2),N.Tg(5,"span"),M._(6,"add"),N.qZ()()(),N.Tg(7,"ng-grid",3,4)(9,"basic-table-metadata"),N._U(10,"basic-table-column",5),N.Tg(11,"basic-table-column",6),F.Y(12,st,8,6,"ng-template",null,7,G.W),N.qZ()()()),2&t&&(k.x(7),U.Q("gridOptions",e.gridOptions),k.x(4),U.Q("titleVisible",!1))},dependencies:[$.M,X.I,W.U,B.r],encapsulation:2,changeDetection:0}),at=(0,s.gn)([(0,c.n)({path:"customComponents"}),(0,m.q)("customComponents-page"),(0,s.w6)("design:paramtypes",[p.J,T.V,q.U])],at);var ot=n(18579),it=n(39205),rt=n(33844),ct=n(49023),mt=n(59098),ut=n(89901),dt=n(91628),pt=n(8265),lt=n(94183),gt=n(65343),ht=n(33293),_t=n(24939),Ct=n(35139),ft=n(25844),vt=n(85746),yt=n(41350),bt=n(16896),Tt=n(97926),wt=n(58883),xt=n(79875),Yt=n(78750);let Ot=class{get emptyMetadata(){return{id:`stackPanel-${(0,y.Ox)(10)}`,displayName:"root",package:"basic-components",name:"stackPanel",options:{children:[]}}}constructor(t,e,n,s){this._route=t,this._store=e,this._metaManager=n,this.history=s,this._id="",this.metadata=this.emptyMetadata}ngOnInit(){this._route.params.subscribe((({id:t})=>{this._id=t,this.metadata=this._store.getData(this._id)?.layout??this.emptyMetadata}))}save(){const t=this._store.getData(this._id)??{};t.layout=this._metaManager.getMetadata()??void 0,this._store.setData(this._id,t)}};Ot.ɵfac=function(t){return new(t||Ot)(w.Y(ot.gz),w.Y(q.U),w.Y(it.Qh),w.Y(pt.dB))},Ot.ɵcmp=x.Xp({type:Ot,selectors:[["custom-components-layout-editor-view"]],features:[Y._([rt.z,{provide:dt.qO,useFactory:t=>new ct.I((e=>t.getData(e)?.layout??null)),deps:[q.U]},(0,lt._)(),(0,yt.rj)(),(0,bt.m_)(),(0,gt.iS)(),(0,ht.vQ)(),(0,_t.gJ)(),(0,Ct.hd)(),(0,wt.jS)(),(0,ft.Wh)([],T.V),{provide:mt.L,useClass:Tt.m},{provide:T.V,useExisting:vt.t},{provide:pt.dK,useFactory:t=>t.registeredChange,deps:[T.V],multi:!0},(0,b.Y)("DYNAMIC_CONTENT_DATA")])],decls:2,vars:3,consts:[[3,"metadata","history","metadataChange","save"],[1,"flex-1",3,"metadata"]],template:function(t,e){1&t&&(N.Tg(0,"editor-controls",0),D.N("metadataChange",(function(t){return e.metadata=t}))("save",(function(){return e.save()})),N.qZ(),N._U(1,"layout-editor",1)),2&t&&(U.Q("metadata",e.metadata)("history",e.history),k.x(1),U.Q("metadata",e.metadata))},dependencies:[xt.Z,Yt.w],styles:["[_nghost-%COMP%]{padding:0}"],changeDetection:0}),Ot=(0,s.gn)([(0,c.n)({path:"customComponents/layout/:id"}),(0,m.q)("customComponentsLayoutEditor-page"),(0,s.w6)("design:paramtypes",[ot.gz,q.U,Object,ut.Y])],Ot);var Nt=n(73760),Dt=n(52205),Mt=n(19706),kt=n(40752),Ut=n(81044),At=n(74967);let qt=class{constructor(t,e,n,s,a){this._route=t,this._store=e,this._metaManager=n,this.layoutManager=s,this.history=a,this._id="",this.metadata=[]}ngOnInit(){this._route.params.subscribe((({id:t})=>{this._id=t;const e=this._store.getData(this._id);this.metadata=e?.relations??[],e?.layout&&this.layoutManager.setLayout(e?.layout)}))}save(){const t=this._store.getData(this._id)??{};t.relations=this._metaManager.getMetadata()??void 0,this._store.setData(this._id,t)}};qt.ɵfac=function(t){return new(t||qt)(w.Y(ot.gz),w.Y(q.U),w.Y(it.Qh),w.Y(kt.n),w.Y(Dt.nR))},qt.ɵcmp=x.Xp({type:qt,selectors:[["custom-components-relations-editor-view"]],features:[Y._([rt.z,{provide:Nt.te,useFactory:t=>new ct.I((e=>t.getData(e)?.relations??[])),deps:[q.U]},(0,yt.qm)(),(0,bt.Od)(),(0,Ct.vu)(),(0,Mt.xb)(),(0,_t.Rn)(),(0,ht.El)(),(0,wt.Mr)(),(0,ft.Kc)((0,ft.$R)(),T.V),{provide:mt.L,useClass:Ut.i},(0,b.Y)("DYNAMIC_CONTENT_DATA")])],decls:2,vars:3,consts:[[3,"metadata","history","metadataChange","save"],[1,"flex-1",3,"metadata"]],template:function(t,e){1&t&&(N.Tg(0,"editor-controls",0),D.N("metadataChange",(function(t){return e.metadata=t}))("save",(function(){return e.save()})),N.qZ(),N._U(1,"relations-editor",1)),2&t&&(U.Q("metadata",e.metadata)("history",e.history),k.x(1),U.Q("metadata",e.metadata))},dependencies:[At.Y,Yt.w],styles:["[_nghost-%COMP%]{padding:0}"],changeDetection:0}),qt=(0,s.gn)([(0,c.n)({path:"customComponents/relations/:id"}),(0,m.q)("customComponentsRelationsEditor-page"),(0,s.w6)("design:paramtypes",[ot.gz,q.U,Object,kt.n,ut.Y])],qt);const Et=[Ot,qt,at];var Lt=n(83139),Qt=n(10012);let Rt=class{};Rt.ɵfac=function(t){return new(t||Rt)},Rt.ɵmod=x.oA({type:Rt}),Rt.ɵinj=Qt.cJ({imports:[i.W,Lt.wx,r.z,a.Bz]}),Rt=(0,s.gn)([(0,o.P)(Et)],Rt)},81337:(t,e,n)=>{n.d(e,{V:()=>m});var s=n(85746),a=n(12987),o=n(78072),i=n(81267),r=n(10012);const c="CUSTOM_COMPONENTS";class m extends s.t{get registeredChange(){return this._registeredChange.asObservable()}constructor(t){super(),this._store=t,this._registeredChange=new o.x}addCustomComponent(t){const e=this.getRegisteredComponents();e.indexOf(t)>=0||(e.push(t),this._store.set(c,e),this._registeredChange.next())}removeCustomComponent(t){const e=this.getRegisteredComponents(),n=e.indexOf(t);n<0||(e.splice(n,1),this._store.set(c,e),this._registeredChange.next())}getRegisteredComponents(){return this._store.get(c)??[]}}m.ɵfac=function(t){return new(t||m)(i.LF(a.T0))},m.ɵprov=r.Yz({token:m,factory:m.ɵfac})},97926:(t,e,n)=>{n.d(e,{m:()=>o});var s=n(59098),a=n(10012);class o extends s.L{constructor(){super("LAYOUT_PACKAGES_STORE")}}o.ɵfac=function(t){return new(t||o)},o.ɵprov=a.Yz({token:o,factory:o.ɵfac})},81044:(t,e,n)=>{n.d(e,{i:()=>o});var s=n(59098),a=n(10012);class o extends s.L{constructor(){super("RELATIONS_PACKAGES_STORE")}}o.ɵfac=function(t){return new(t||o)},o.ɵprov=a.Yz({token:o,factory:o.ɵfac})}}]);
//# sourceMappingURL=7107.client.chunk.fa82bce3b9472d6be7b1.js.map
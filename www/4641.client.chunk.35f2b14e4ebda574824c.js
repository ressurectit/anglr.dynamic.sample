"use strict";(self.webpackChunkng_universal_demo=self.webpackChunkng_universal_demo||[]).push([[4641],{25434:(t,n,e)=>{e.d(n,{b:()=>j});var o=e(12405),i=e(41762),a=e(6631),r=e(65540),s=e(74062),c=e(73512),l=e(14958),d=e(19598),u=e(13816),p=e(55163),m=e(89033);class f{constructor(t){this.defaultValue=null,this.name="",this.skipInit=!1,u.Rl.bind(this)(t)}}var g=e(57165),y=e(50478),v=e(38256),h=e(27805),b=e(63289),x=e(52455),w=e(37654),k=e(13341),_=e(18968),C=e(94128),q=e(83210),E=e(5419),N=e(28588),I=e(81473),T=e(86039),Z=e(33250),O=e(58433),S=e(49308),U=e(48215),Y=e(78525),D=e(97503);function J(t,n,e,o,i,a,r){try{var s=t[a](r),c=s.value}catch(t){return void e(t)}s.done?n(c):Promise.resolve(c).then(o,i)}function P(t,n){1&t&&(g.Tg(0,"div",1)(1,"label",2),g._U(2,"input",9),y._(3," skip init "),g.qZ()())}function Q(t,n){if(1&t){const t=v.E();g.Tg(0,"div",10)(1,"button",11),h.N("click",(function(){b.CH(t);const n=x.o();return b.Kt(n.showCodeEditor())})),g.Tg(2,"span"),y._(3,"default value"),g.qZ()()()}}class j{constructor(t,n,e){this.data=t,this.dialog=n,this.form=e.build(new f(t)),this.form.valueChanges.subscribe((n=>(0,u.l7)(t,n)))}showCodeEditor(){var t,n=this;return(t=function*(){const t=(0,p.EN)(n.data.defaultValue)?JSON.stringify(n.data.defaultValue,null,4):"",e=yield(0,m.n)(n.dialog.open(c.I,{title:"Code editor",width:"75vw",height:"75vh",data:{content:t,languageModel:l.H}}).afterClosed());(0,p.EN)(e)&&(n.data.defaultValue=(0,d.LK)(e.content))},function(){var n=this,e=arguments;return new Promise((function(o,i){var a=t.apply(n,e);function r(t){J(a,o,i,r,s,"next",t)}function s(t){J(a,o,i,r,s,"throw",t)}r(void 0)}))})()}}j.ɵfac=function(t){return new(t||j)(w.Y(r.m),w.Y(I.J),w.Y(s.p))},j.ɵcmp=k.Xp({type:j,selectors:[["configure-node-endpoint"]],standalone:!0,features:[_._([s.p]),C.j],decls:14,vars:5,consts:[[3,"formGroup"],[1,"dynamic-form-group","dynamic-margin-bottom-extra-small"],[1,"dynamic-control-label","dynamic-text-uppercase"],["type","text","formControlName","name",1,"dynamic-form-control"],["class","dynamic-form-group dynamic-margin-bottom-extra-small",4,"ngIf"],["class","dynamic-flex-column dynamic-margin-bottom-extra-small",4,"ngIf"],[1,"dynamic-flex-row","dynamic-flex-end"],["type","button",1,"dynamic-btn","dynamic-btn-info","dynamic-margin-right-extra-small",3,"mat-dialog-close"],["type","button",1,"dynamic-btn","dynamic-btn-primary",3,"mat-dialog-close"],["type","checkbox","formControlName","skipInit"],[1,"dynamic-flex-column","dynamic-margin-bottom-extra-small"],["type","button",1,"dynamic-btn","dynamic-btn-primary","dynamic-align-self-center",3,"click"]],template:function(t,n){1&t&&(g.Tg(0,"div",0)(1,"div",1)(2,"label",2),y._(3,"name"),g.qZ(),g._U(4,"input",3),g.qZ(),q.Y(5,P,4,0,"div",4),q.Y(6,Q,4,0,"div",5),g.qZ(),g.Tg(7,"div",6)(8,"button",7)(9,"span"),y._(10,"cancel"),g.qZ()(),g.Tg(11,"button",8)(12,"span"),y._(13,"ok"),g.qZ()()()),2&t&&(E.Q("formGroup",n.form),N.x(5),E.Q("ngIf",n.data.allowSkipInit),N.x(1),E.Q("ngIf",!n.data.noDefaultValue),N.x(2),E.Q("mat-dialog-close",null),N.x(3),E.Q("mat-dialog-close",!0))},dependencies:[i.U,T.Fj,Z.W,O.JJ,O.JL,S.s,U.u,a.I,Y.ZT,o.e,D.O],encapsulation:2,changeDetection:0})},64641:(t,n,e)=>{e.r(n),e.d(n,{ComponentInputsRelationsEditorMetadata:()=>S});var o=e(12405),i=e(12125),a=e(32123),r=e(69445),s=e(13816),c=e(89033),l=e(25434),d=e(38256),u=e(57165),p=e(50478),m=e(27805),f=e(63289),g=e(52455),y=e(28588),v=e(4149),h=e(5419),b=e(37654),x=e(66382),w=e(47948),k=e(13341),_=e(52900),C=e(94128),q=e(83210),E=e(81473),N=e(15704);function I(t,n,e,o,i,a,r){try{var s=t[a](r),c=s.value}catch(t){return void e(t)}s.done?n(c):Promise.resolve(c).then(o,i)}function T(t){return function(){var n=this,e=arguments;return new Promise((function(o,i){var a=t.apply(n,e);function r(t){I(a,o,i,r,s,"next",t)}function s(t){I(a,o,i,r,s,"throw",t)}r(void 0)}))}}function Z(t,n){if(1&t){const t=d.E();u.Tg(0,"div",9)(1,"div",10)(2,"div"),p._(3),u.qZ(),u.Tg(4,"button",11),m.N("click",(function(n){const e=f.CH(t).$implicit,o=g.o();return n.preventDefault(),n.stopPropagation(),f.Kt(o.configureEndpoint(e))})),u._U(5,"span",12),u.qZ(),u.Tg(6,"button",13),m.N("click",(function(n){const e=f.CH(t).$implicit,o=g.o();return n.preventDefault(),n.stopPropagation(),f.Kt(o.removeEndpoint(e))})),u._U(7,"span",14),u.qZ()(),u._U(8,"relation-node-output",15),u.qZ()}if(2&t){const t=n.$implicit,e=g.o();y.x(3),v.Oq(t.name),y.x(5),h.Q("parentCoordiantes",e.nodePosition)("zoomLevel",e.zoomLevel)("name",t.name)("parent",e)}}class O extends i.M{get endpoints(){var t,n;return this.metadata?((t=this.metadata).relationsOptions??(t.relationsOptions={inputs:[]}),(n=this.metadata.relationsOptions).inputs??(n.inputs=[])):[]}constructor(t,n,e){super(t,n),this.dialog=e}addEndpoint(){var t=this;return T((function*(){const n={name:"",defaultValue:null,skipInit:!1,allowSkipInit:!0};(yield t.configureEndpoint(n))&&(t.endpoints.push(n),t.history.getNewState())}))()}removeEndpoint(t){const n=this.endpoints.indexOf(t);n>=0&&(this.endpoints.splice(n,1),this.history.getNewState())}configureEndpoint(t){var n=this;return T((function*(){const e=JSON.parse(JSON.stringify(t)),o=yield(0,c.n)(n.dialog.open(l.b,{title:"configure component input",width:"60vw",data:t}).afterClosed());return o?n.history.getNewState():(0,s.l7)(t,e),o??!1}))()}}O.ɵfac=function(t){return new(t||O)(b.Y(x.s),b.Y(w.SB),b.Y(E.J))},O.ɵcmp=k.Xp({type:O,selectors:[["component-inputs-node"]],standalone:!0,features:[_.q,C.j],decls:9,vars:3,consts:[["name","component inputs",3,"parent","destroySubject"],[1,"node-content"],[1,"inputs-outputs"],[1,"inputs"],[1,"outputs"],["class","output",4,"ngFor","ngForOf"],[1,"dynamic-flex-row","dynamic-flex-end"],["type","button",1,"dynamic-btn-icon","dynamic-margin-right-extra-small",3,"click"],[1,"fas","fa-plus"],[1,"output"],[1,"dynamic-flex-row"],["type","button",1,"dynamic-btn-icon","dynamic-margin-horizontal-extra-small",3,"click"],[1,"fas","fa-cog"],["type","button",1,"dynamic-btn-icon",3,"click"],[1,"fas","fa-times"],[3,"parentCoordiantes","zoomLevel","name","parent"]],template:function(t,n){1&t&&(u._U(0,"relations-node-header",0),u.Tg(1,"div",1)(2,"div",2),u._U(3,"div",3),u.Tg(4,"div",4),q.Y(5,Z,9,5,"div",5),u.Tg(6,"div",6)(7,"button",7),m.N("click",(function(t){return t.preventDefault(),t.stopPropagation(),n.addEndpoint()})),u._U(8,"span",8),u.qZ()()()()()),2&t&&(h.Q("parent",n)("destroySubject",n.destroySubject),y.x(5),h.Q("ngForOf",n.endpoints))},dependencies:[o.e,N.sg,a.e,r.n],encapsulation:2,changeDetection:0});class S{constructor(){this.metaInfo={name:"Component inputs",description:"Definition of relations component inputs",group:"Component"},this.nodeDefinition=O,Object.freeze(this)}}}}]);
//# sourceMappingURL=4641.client.chunk.35f2b14e4ebda574824c.js.map
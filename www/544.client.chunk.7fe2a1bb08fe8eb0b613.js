"use strict";(self.webpackChunkng_universal_demo=self.webpackChunkng_universal_demo||[]).push([[544],{1544:(e,t,r)=>{r.r(t),r.d(t,{DefaultModule:()=>oe});var n=r(5950),o=r(8713),i=r(1080),a=r(5900),s=r(7921),u=r(1377),c=r(4285);function l(e){return function(t){const r=e;r.component=t;const n=t;return(0,c.fp)(n.routeValues)&&Object.defineProperty(t,"routeValues",{enumerable:!0,configurable:!1,writable:!1,value:[]}),n.routeValues.push(r),t}}var p=r(4539),h=r(3365),f=r(4432),m=r(5871),d=r(8507),g=r(90),v=r(8662),_=r(3221),b=r(8138),w=r(5617),A=r(8912),y=r(6274),P=r(4275),x=r(6170),q=r(486),C=r(7550),S=r(603),L=r(1742),R=r(1869),V=r(5806),O=r(9998);function Y(e,t,r){return F(e,"",t,"",r),Y}function F(e,t,r,n,o){const i=(0,L.QE)(),a=(0,V.Ai)(i,t,r,n);if(a!==R.l){const t=(0,L.GP)(),r=(0,L.A3)();(0,O.ig)(t,r,i,e,a,i[S._B],o,!1)}return F}var Z=r(3527),j=r(2548),k=r(6564),D=r(6917),E=r(2369),N=r(3829),T=r(7177),U=r(8402);function z(e,t){1&e&&(g.Tg(0,"div",12),v._(1),_.AL(2,"translate"),g.qZ()),2&e&&(b.Q("@slideInOut",void 0),w.x(1),A.hi(" ",_.lc(2,2,"Authentication failed! Please check your credentials and try again.")," "))}let M=class{constructor(e,t,r,n,o,i){this._authService=e,this._router=t,this._activeRoute=r,this._changeDetector=n,this._logger=o,this.authenticationError=!1,this.form=i.group({userName:null,password:null,rememberMe:null})}login(){this._authService.login(this.form.value).pipe((0,d.K)((e=>(this._logger.error(`Failed to log in '${e}'`),this.authenticationError=!0,this._changeDetector.detectChanges(),m.E)))).subscribe((()=>{this.authenticationError=!1,this._changeDetector.detectChanges(),this._activeRoute.snapshot.queryParams.returnUrl?this._router.navigateByUrl(this._activeRoute.snapshot.queryParams.returnUrl):this._router.navigate(["/"])}))}};M.ɵfac=function(e){return new(e||M)(y.Y(p.$),y.Y(a.F0),y.Y(s.gz),y.Y(i.s),y.Y(f.bZ),y.Y(u.qu))},M.ɵcmp=P.Xp({type:M,selectors:[["login-view"]],hostVars:2,hostBindings:function(e,t){2&e&&x.ek("justify-content-center",!0)},decls:26,vars:23,consts:[[1,"align-self-center"],[1,"text-uppercase","text-center"],["class","alert alert-danger",4,"ngIf"],["role","form",1,"form",3,"formGroup","submit"],[1,"form-group"],["for","username"],["type","text","id","username","formControlName","userName",1,"form-control",3,"placeholder"],["for","password"],["type","password","id","password","formControlName","password",1,"form-control",3,"placeholder"],["for","rememberme"],["type","checkbox","id","rememberme","formControlName","rememberMe"],["type","submit",1,"btn","btn-primary"],[1,"alert","alert-danger"]],template:function(e,t){1&e&&(g.Tg(0,"div",0)(1,"h1",1),v._(2),_.AL(3,"translate"),g.qZ(),q.Y(4,z,3,4,"div",2),g.Tg(5,"form",3),C.N("submit",(function(){return t.login()})),g.Tg(6,"div",4)(7,"label",5),v._(8),_.AL(9,"translate"),g.qZ(),g._U(10,"input",6),_.AL(11,"translate"),g.qZ(),g.Tg(12,"div",4)(13,"label",7),v._(14),_.AL(15,"translate"),g.qZ(),g._U(16,"input",8),_.AL(17,"translate"),g.qZ(),g.Tg(18,"div",4)(19,"label",9),v._(20),_.AL(21,"translate"),g._U(22,"input",10),g.qZ()(),g.Tg(23,"button",11),v._(24),_.AL(25,"translate"),g.qZ()()()),2&e&&(w.x(2),A.Oq(_.lc(3,9,"gui")),w.x(2),b.Q("ngIf",t.authenticationError),w.x(1),b.Q("formGroup",t.form),w.x(3),A.Oq(_.lc(9,11,"Login")),w.x(2),Y("placeholder",_.lc(11,13,"Your login")),w.x(4),A.Oq(_.lc(15,15,"Password")),w.x(2),Y("placeholder",_.lc(17,17,"Your password")),w.x(4),A.hi("",_.lc(21,19,"Remember me")," "),w.x(4),A.Oq(_.lc(25,21,"Authenticate")))},dependencies:[T.O,Z._,j.Fj,k.W,D.JJ,D.JL,E.s,N.u,U.X],encapsulation:2,data:{animation:[h.x]},changeDetection:0}),M=(0,n.gn)([l({path:"login",data:{animation:"login"}}),(0,n.w6)("design:paramtypes",[p.$,a.F0,s.gz,i.s,Object,u.qu])],M);var I=r(4746),J=r(9147),G=r(8743),Q=r(7305),$=r(905),B=r(515);function X(e,t,r,n,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}class H{constructor(e,t,r){this._authSvc=e,this._injector=t,this._router=r}canActivate(e){var t,r=this;return(t=function*(){const t=e.component;let n;if(e.routeConfig?.path&&t.routeSpecificPermissions?.[e.routeConfig.path]?n=t.routeSpecificPermissions[e.routeConfig.path]:t.permissions&&(n=t.permissions),!n)return!0;let o=!0;n.addCondition&&(o=yield n.addCondition(r._injector));const i=r._authSvc.userIdentity;if((0,c.fp)(i))throw new Error("AuthenticationService must be initialized before first use of AuthGuard");const a=(0,G.g)(i.permissions,n.permission,n.andCondition??!1,n.conditionString??!1,o),s=new I.uV((0,J.s6)(e.pathFromRoot.map((e=>e.url))),{}),u=new I.lo;u.root=s,u.queryParams={};const l=r._router.serializeUrl(u);return!a&&i.isAuthenticated?(r._authSvc.showAccessDenied(),!1):!!(a||i.isAuthenticated||r._authSvc.isAuthPage(l))||(r._authSvc.showAuthPage(),!1)},function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(e){X(i,n,o,a,s,"next",e)}function s(e){X(i,n,o,a,s,"throw",e)}a(void 0)}))})()}}H.ɵfac=function(e){return new(e||H)(Q.LF(p.$),Q.LF($.z),Q.LF(a.F0))},H.ɵprov=B.Yz({token:H,factory:H.ɵfac,providedIn:"root"});let K=class{};var W,ee,te;K.ɵfac=function(e){return new(e||K)},K.ɵcmp=P.Xp({type:K,selectors:[["home-view"]],decls:1,vars:0,template:function(e,t){1&e&&v._(0,"Home")},encapsulation:2,changeDetection:0}),K=(0,n.gn)([("",ee="home",function(e){const t=e;if((0,c.fp)(t.routeValues)&&(0,c.fp)(ee))return console.warn("Missing 'ComponentRoute' or wrong order of decorators 'ComponentRoute' and 'ComponentRedirectRoute'!"),e;if((0,c.fp)(ee)&&(0,c.EN)(t.routeValues)&&t.routeValues.length>1)return console.warn("Multiple routes defined. Unable to set proper redirect!"),e;const r=e;return(0,c.fp)(r.redirectRouteValues)&&Object.defineProperty(e,"redirectRouteValues",{enumerable:!0,configurable:!1,writable:!1,value:[]}),(0,c.fp)(te)&&(te=!0),(0,c.fp)(ee)&&(ee=t.routeValues[0].path),r.redirectRouteValues.push({path:"",redirectTo:ee,pathMatch:te?"full":"prefix"}),e}),(W={path:"home"},W.canActivate??(W.canActivate=[]),W.canActivate.indexOf(H)<0&&W.canActivate.push(H),l(W)),function(e,t){return function(r){let n;n=(0,c.HD)(e)||Array.isArray(e)?{permission:e}:e;const o=r;return(0,c.fp)(t)?o.permissions=n:(o.routeSpecificPermissions??(o.routeSpecificPermissions={}),o.routeSpecificPermissions[t]=n),r}}("home-page")],K);const re=[M,K];var ne=r(1759);let oe=class{};oe.ɵfac=function(e){return new(e||oe)},oe.ɵmod=P.oA({type:oe}),oe.ɵinj=B.cJ({imports:[ne._J,ne.No,ne.nP]}),oe=(0,n.gn)([(0,o.P)(re)],oe)}}]);
//# sourceMappingURL=544.client.chunk.7fe2a1bb08fe8eb0b613.js.map
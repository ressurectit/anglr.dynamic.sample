{"version":3,"file":"9850.client.chunk.84eeb86974292e0ad2c4.js","mappings":"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","sources":["webpack://ng-universal-demo/./node_modules/@anglr/dynamic/es2020/layout-relations/src/dynamicItems/componentOutputs/componentOutputs.metadata.js","webpack://ng-universal-demo/./node_modules/@anglr/dynamic/es2020/layout-relations/src/dynamicItems/componentOutputs/componentOutputs.relations.js","webpack://ng-universal-demo/./node_modules/@anglr/dynamic/es2020/layout-relations/src/dynamicItems/componentOutputs/type.js","webpack://ng-universal-demo/./node_modules/@anglr/dynamic/es2020/relations-editor/src/decorators/relationsEditorMetadata/relationsEditorMetadata.decorator.js","webpack://ng-universal-demo/./node_modules/@anglr/dynamic/es2020/src/decorators/dynamicMetadata/dynamicClassMetadata.decorator.js"],"sourcesContent":["function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\n/**\n * Component outputs relations metadata loader\n */\nexport const ComponentOutputsRelationsMetadataLoader = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator(function* () {\n    return new (yield import('./metadata/componentOutputs.relationsMetadata')).ComponentOutputsRelationsEditorMetadata();\n  });\n\n  return function ComponentOutputsRelationsMetadataLoader() {\n    return _ref.apply(this, arguments);\n  };\n}();","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nimport { __decorate, __metadata } from \"tslib\";\nimport { Injector } from '@angular/core';\nimport { RelationsComponentManager, RelationsProcessor } from '@anglr/dynamic/relations';\nimport { RelationsEditorMetadata } from '@anglr/dynamic/relations-editor';\nimport { Subject } from 'rxjs';\nimport { ComponentOutputsRelationsMetadataLoader } from './componentOutputs.metadata';\n/**\n * Relations used for connecting relations outputs with external relations\n */\n\nlet ComponentOutputsRelations = class ComponentOutputsRelations {\n  //######################### constructor #########################\n  constructor(injector) {\n    this.injector = injector; //######################### protected properties #########################\n\n    /**\n     * Relations processor instance\n     */\n\n    this.relationsProcessor = this.injector.get(RelationsProcessor, null);\n    /**\n     * Relations component manager\n     */\n\n    this.componentManager = this.injector.get(RelationsComponentManager, null);\n    /**\n     * Id of component outputs relations\n     */\n\n    this.id = '';\n  } //######################### public methods - implementation of RelationsComponent #########################\n\n  /**\n   * @inheritdoc\n   */\n\n\n  ngOnChanges(changes) {\n    for (const key of Object.keys(changes)) {\n      this.customComponent[key] = changes[key].currentValue;\n      this.customComponent[`${key}Change`]?.next?.();\n    }\n  }\n  /**\n   * @inheritdoc\n   */\n\n\n  invalidateVisuals() {} //######################### public methods - implementation of OnDestroy #########################\n\n  /**\n   * @inheritdoc\n   */\n\n\n  ngOnDestroy() {\n    if (this.id) {\n      this.relationsProcessor?.destroyComponent(this.id);\n      this.componentManager?.unregisterComponent(this.id);\n    }\n  } //######################### public methods #########################\n\n  /**\n   * Initialize outputs for component\n   * @param outputRelations - Output relations metadata\n   * @param id - Id of output relations\n   */\n\n\n  initOutputs(outputRelations, id, customComponent) {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      _this.id = id;\n      _this.customComponent = customComponent;\n\n      if (!_this.componentManager || !_this.relationsProcessor) {\n        return;\n      }\n\n      for (const output of outputRelations.relationsOptions?.outputs ?? []) {\n        Object.defineProperty(_this.customComponent, output.name, {\n          value: output.defaultValue,\n          writable: true\n        });\n        Object.defineProperty(_this.customComponent, `${output.name}Change`, {\n          value: new Subject()\n        });\n      }\n\n      _this.componentManager.registerComponent(_this.id, _this);\n\n      yield _this.relationsProcessor.initialized;\n\n      _this.relationsProcessor.updateRelations(_this.id);\n    })();\n  }\n\n};\nComponentOutputsRelations = __decorate([RelationsEditorMetadata(ComponentOutputsRelationsMetadataLoader), __metadata(\"design:paramtypes\", [Injector])], ComponentOutputsRelations);\nexport { ComponentOutputsRelations };","import { ComponentOutputsRelations } from './componentOutputs.relations';\nexport default ComponentOutputsRelations;","import { DynamicClassMetadata } from '@anglr/dynamic';\n/**\n * Sets relations editor metadata to class on which is this decorator applied\n * @param metadataLoader - Relations editor metadata loader function used for obtaining metadata\n */\n\nexport function RelationsEditorMetadata(metadataLoader) {\n  return DynamicClassMetadata(metadataLoader, 'relationsEditorMetadata');\n}","//TODO: rework also with symbol\n\n/**\n * Sets dynamic metadata to class on which is this decorator applied\n * @param metadataLoader - Metadata loader function used for obtaining metadata\n * @param propertyName - Name of property where will be metadata instance stored\n */\nexport function DynamicClassMetadata(metadataLoader, propertyName) {\n  if (ngDesignerMetadata) {\n    return function (target) {\n      target[propertyName] = metadataLoader();\n      return target;\n    };\n  }\n\n  return function (target) {\n    return target;\n  };\n}"],"names":["asyncGeneratorStep","gen","resolve","reject","_next","_throw","key","arg","info","value","error","done","Promise","then","ComponentOutputsRelationsMetadataLoader","fn","_ref","ComponentOutputsRelationsEditorMetadata","self","this","args","arguments","apply","err","undefined","ComponentOutputsRelations","constructor","injector","relationsProcessor","get","componentManager","id","ngOnChanges","changes","Object","keys","customComponent","currentValue","next","invalidateVisuals","ngOnDestroy","destroyComponent","unregisterComponent","initOutputs","outputRelations","_this","output","relationsOptions","outputs","defineProperty","name","defaultValue","writable","Subject","registerComponent","initialized","updateRelations","RelationsEditorMetadata","metadataLoader","DynamicClassMetadata","propertyName","target"],"sourceRoot":""}
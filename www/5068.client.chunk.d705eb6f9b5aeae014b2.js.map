{"version":3,"file":"5068.client.chunk.d705eb6f9b5aeae014b2.js","mappings":"8HAAA,IAAIA,EAAM,CACT,kBAAmB,CAClB,MACA,MAED,oBAAqB,CACpB,MACA,MAED,mBAAoB,CACnB,MACA,MAED,qBAAsB,CACrB,MACA,MAED,gBAAiB,CAChB,MACA,MAED,eAAgB,CACf,MACA,IAED,gBAAiB,CAChB,MACA,MAED,mBAAoB,CACnB,MACA,MAED,kBAAmB,CAClB,MACA,OAGF,SAASC,EAAoBC,GAC5B,IAAIC,EAAoBC,EAAEJ,EAAKE,GAC9B,OAAOG,QAAQC,UAAUC,MAAK,KAC7B,IAAIC,EAAI,IAAIC,MAAM,uBAAyBP,EAAM,KAEjD,MADAM,EAAEE,KAAO,mBACHF,CAAC,IAIT,IAAIG,EAAMX,EAAIE,GAAMU,EAAKD,EAAI,GAC7B,OAAOR,EAAoBK,EAAEG,EAAI,IAAIJ,MAAK,IAClCJ,EAAoBS,IAE7B,CACAX,EAAoBY,KAAO,IAAOC,OAAOD,KAAKb,GAC9CC,EAAoBW,GAAK,MACzBG,EAAOC,QAAUf,C,wWCjDjB,MAAMgB,EAAoB,oBAMpB,MAAOC,UAAqCC,EAAAA,EAoB9CC,YAA+CC,GAE3CC,QAF2C,KAAAD,OAAAA,EAbvC,KAAAE,kBAAmC,IAAIC,EAAAA,CAgB9C,CATUC,uBAEP,OAAOC,KAAKH,kBAAkBI,cACjC,CAcMC,0BAA0BC,GAE7B,MAAMC,EAAmBJ,KAAKK,0BACxBC,EAAQF,EAAiBG,QAAQJ,GAGpCG,GAAS,EAERF,EAAiBI,OAAOF,EAAO,GAI/BF,EAAiBK,KAAKN,GAG1BH,KAAKL,OAAOe,IAAInB,EAAmBa,GACnCJ,KAAKH,kBAAkBc,MAC1B,CAOeN,0BAEZ,OAAOL,KAAKL,OAAOiB,IAAmBrB,IAAsB,EAC/D,E,iCA1DQC,GAA4BqB,EAAAA,GAoBjBC,EAAAA,IAAiB,E,oBApB5BtB,EAA4BuB,QAA5BvB,EAA4B,OCJnC,MAAOwB,UAAiCC,EAAAA,EAG1CvB,cAEIE,MAAM,wBACT,E,iCANQoB,EAAwB,E,oBAAxBA,EAAwBD,QAAxBC,EAAwB,O,8HC2DxBE,EAAe,MAkCxBxB,YAAoByB,EACAxB,EACgCyB,GAFhC,KAAAD,OAAAA,EACA,KAAAxB,OAAAA,EACgC,KAAAyB,aAAAA,EA7B5C,KAAAC,IAAc,GAOZ,KAAAC,SAAyCtB,KAAKuB,aAwBvD,CAnBaA,oBAEV,MAAO,CACHrC,GAAI,eAAcsC,EAAAA,EAAAA,IAAW,MAC7BC,YAAa,OACbC,QAAS,mBACTvB,KAAM,aACNwB,QACA,CACIC,SAAU,IAGrB,CAcMC,WAEH7B,KAAKmB,OAAOW,OAAOC,WAAU,EAAE7C,SAE3Bc,KAAKqB,IAAMnC,EAEXc,KAAKsB,SAAWtB,KAAKL,OAAOqC,QAAQhC,KAAKqB,MAAMY,QAAUjC,KAAKuB,aAA9D,GAEP,CAOSW,OAEN,MAAMZ,EAAWtB,KAAKL,OAAOqC,QAAQhC,KAAKqB,MAAQ,CAAC,EACnDC,EAASW,OAASjC,KAAKoB,aAAae,oBAAiBC,EAErDpC,KAAKL,OAAO0C,QAAQrC,KAAKqB,IAAKC,EACjC,G,iCAlEQJ,GAAeL,EAAAA,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,EAAAA,GAAAA,EAAAA,EAoCJyB,EAAAA,IAAsB,E,kBApCjCpB,EAAeqB,UAAAA,CAAAA,CAAAA,uBAAAC,SAAAA,CAAAA,EAAAA,EArCxB,CACIC,EAAAA,EAEA,CACIC,QAASC,EAAAA,GACTC,WAAaC,GAAqD,IAAIC,EAAAA,GAAyC5D,GAAM2D,EAAMb,QAAQ9C,IAAK+C,QAAU,OAClJc,KAAM,CAACC,EAAAA,KAEXC,EAAAA,EAAAA,MACAC,EAAAA,EAAAA,OACAC,EAAAA,EAAAA,OACAC,EAAAA,EAAAA,OACAC,EAAAA,EAAAA,OACAC,EAAAA,EAAAA,IAAoC,GAAI9D,GAExC,CACIkD,QAASzB,EAAAA,EACTsC,SAAUvC,GAGd,CACI0B,QAASlD,EACTgE,YAAa/D,EAAAA,GAGjB,CACIiD,QAASe,EAAAA,GACTb,WAAac,GAA2CA,EAAS3D,iBACjEgD,KAAM,CAACvD,GACPmE,OAAO,IAEXC,EAAAA,EAAAA,GAA8B,2BACjCC,MAAAA,GAAAC,KAAAA,EAAAC,OAAAA,CAAAA,CAAAA,EAAAA,YAAAA,CAAAA,OAAAA,SAAAA,SAAAA,GAAAA,EAAAA,MAAAA,YAAAA,CAAAA,EAAAA,MAAAA,iBAAAA,CAAAA,OAAAA,SAAAA,EAAAA,MAAAA,cAAAA,EAAAA,SAAAA,CAAAA,EAAAA,MAAAA,WAAAA,CAAAA,EAAAA,SAAAA,EAAAA,aAAAC,SAAAA,SAAAA,EAAAA,GAAA,MC7DLnD,EAAAA,GAAAA,EAAAA,MAAAA,EAAAA,CAAsB,cAEdA,EAAAA,GAAAA,EAAAA,OAAAA,GACAA,EAAAA,GAAAA,EAAAA,QAAMA,EAAAA,EAAAA,EAAAA,QAAIA,EAAAA,IAAAA,GAGdA,EAAAA,GAAAA,EAAAA,SAAAA,GAA8CA,EAAAA,EAAC,SAADA,WAAA,OAASoD,EAAAA,MAAM,IACzDpD,EAAAA,GAAAA,EAAAA,OAAAA,GACAA,EAAAA,GAAAA,EAAAA,QAAMA,EAAAA,EAAAA,EAAAA,QAAIA,EAAAA,IAAAA,KAIlBA,EAAAA,GAAAA,EAAAA,gBAAAA,I,MAA8BA,EAAAA,EAAAA,GAAAA,EAAAA,EAAAA,WAAAA,EAAAA,U,oFDsDjBK,GAAe,UAF3BgD,EAAAA,EAAAA,GAAyB,CAACC,KAAM,gBAChCC,EAAAA,EAAAA,GAAU,sBACiB,6BAkCIC,EAAAA,GACArB,EAAAA,EAAgB5D,UAnCnC8B,GEhEN,MAAMoD,EACb,CACIpD,G,ICmBSqD,EAAoB,Q,iCAApBA,EAAoB,E,kBAApBA,I,sBATLC,EAAAA,EACAC,EAAAA,KAQKF,GAAoB,UADhCG,EAAAA,EAAAA,GAAaJ,IACDC,E","sources":["webpack://ng-universal-demo/./node_modules/@anglr/dynamic/es2020/form/src/dynamicItems/ lazy ^\\.\\/.*\\/type$ strict namespace object","webpack://ng-universal-demo/./app/services/demoCustomComponentsRegister/demoCustomComponentsRegister.service.ts","webpack://ng-universal-demo/./app/services/demoLayoutPackageManager/demoLayoutPackageManager.service.ts","webpack://ng-universal-demo/./app/pages/+dynamicContent/layout/layout.component.ts","webpack://ng-universal-demo/./app/pages/+dynamicContent/layout/layout.component.html","webpack://ng-universal-demo/./app/pages/+dynamicContent/dynamicContent.routes.ts","webpack://ng-universal-demo/./app/pages/+dynamicContent/dynamicContent.module.ts"],"sourcesContent":["var map = {\n\t\"./checkbox/type\": [\n\t\t82223,\n\t\t2223\n\t],\n\t\"./datepicker/type\": [\n\t\t74136,\n\t\t4136\n\t],\n\t\"./formGroup/type\": [\n\t\t14714,\n\t\t4714\n\t],\n\t\"./numberField/type\": [\n\t\t65968,\n\t\t3082\n\t],\n\t\"./period/type\": [\n\t\t93863,\n\t\t3863\n\t],\n\t\"./radio/type\": [\n\t\t20045,\n\t\t45\n\t],\n\t\"./select/type\": [\n\t\t52340,\n\t\t2340\n\t],\n\t\"./textField/type\": [\n\t\t24414,\n\t\t4414\n\t],\n\t\"./textarea/type\": [\n\t\t98843,\n\t\t8843\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(() => {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(() => {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = () => (Object.keys(map));\nwebpackAsyncContext.id = 45297;\nmodule.exports = webpackAsyncContext;","import {Inject, Injectable} from '@angular/core';\nimport {CustomComponentsRegister} from '@anglr/dynamic/layout-relations';\nimport {PermanentStorage, PERMANENT_STORAGE} from '@anglr/common';\nimport {Observable, Subject} from 'rxjs';\n\nconst CUSTOM_COMPONENTS = 'CUSTOM_COMPONENTS';\n\n/**\n * Demo custom components register\n */\n@Injectable()\nexport class DemoCustomComponentsRegister extends CustomComponentsRegister\n{\n    //######################### private fields #########################\n    \n    /**\n     * Used for emitting registered changes\n     */\n    private _registeredChange: Subject<void> = new Subject<void>();\n    \n    //######################### public properties #########################\n    \n    /**\n     * Occurs when registered changes\n     */\n    public get registeredChange(): Observable<void>\n    {\n        return this._registeredChange.asObservable();\n    }\n    \n    //######################### constructor #########################\n    constructor(@Inject(PERMANENT_STORAGE) private _store: PermanentStorage)\n    {\n        super();\n    }\n\n    //######################### public methods #########################\n\n    /**\n     * Toggles template as registered custom component\n     * @param name - Name of template to be toggled\n     */\n    public toggleRegisteredComponent(name: string): void\n    {\n        const customComponents = this.getRegisteredComponents();\n        const index = customComponents.indexOf(name);\n\n\n        if(index >= 0)\n        {\n            customComponents.splice(index, 1);\n        }\n        else\n        {\n            customComponents.push(name);\n        }\n\n        this._store.set(CUSTOM_COMPONENTS, customComponents);\n        this._registeredChange.next();\n    }\n\n    //######################### public methods - overrides #########################\n\n    /**\n     * Gets registered components\n     */\n    public override getRegisteredComponents(): string[]\n    {\n        return this._store.get<string[]|null>(CUSTOM_COMPONENTS) ?? [];\n    }\n}","import {Injectable} from '@angular/core';\nimport {PackageManager} from '@anglr/dynamic';\n\n/**\n * Layout package manager for demo app\n */\n@Injectable()\nexport class DemoLayoutPackageManager extends PackageManager\n{\n    //######################### constructor #########################\n    constructor()\n    {\n        super('LAYOUT_PACKAGES_STORE');\n    }\n}","import {Component, ChangeDetectionStrategy, FactoryProvider, ClassProvider, ExistingProvider, OnInit, Inject} from '@angular/core';\nimport {ActivatedRoute} from '@angular/router';\nimport {ComponentRouteAuthorized, Authorize} from '@anglr/authentication';\nimport {EditorHotkeys, MetadataStateManager, MetadataStorage, METADATA_STATE_MANAGER, PackageManager} from '@anglr/dynamic';\nimport {LayoutComponentMetadata, LAYOUT_METADATA_STORAGE} from '@anglr/dynamic/layout';\nimport {provideLayoutEditor, REFRESH_PALETTE_OBSERVABLES} from '@anglr/dynamic/layout-editor';\nimport {provideFormLayoutEditor} from '@anglr/dynamic/form';\nimport {provideCssLayoutEditor} from '@anglr/dynamic/css-components';\nimport {provideTinyMceLayoutEditor} from '@anglr/dynamic/tinymce-components';\nimport {provideHandlebarsLayoutEditor} from '@anglr/dynamic/handlebars-components';\nimport {CustomComponentsRegister, provideEditorLayoutCustomComponents} from '@anglr/dynamic/layout-relations';\nimport {StackPanelComponentOptions} from '@anglr/dynamic/basic-components';\nimport {generateId} from '@jscrpt/common';\n\nimport {StoreDataService} from '../../../services/storeData';\nimport {LayoutRelationsMetadata} from '../../../misc/interfaces';\nimport {DemoCustomComponentsRegister} from '../../../services/demoCustomComponentsRegister';\nimport {DemoLayoutPackageManager} from '../../../services/demoLayoutPackageManager/demoLayoutPackageManager.service';\nimport {createStoreDataServiceFactory} from '../../../misc/factories';\n\n/**\n * Component used for displaying layout editor\n */\n@Component(\n{\n    selector: 'layout-editor-view',\n    templateUrl: 'layout.component.html',\n    styleUrls: ['layout.component.scss'],\n    providers:\n    [\n        EditorHotkeys,\n        <FactoryProvider>\n        {\n            provide: LAYOUT_METADATA_STORAGE,\n            useFactory: (store: StoreDataService<LayoutRelationsMetadata>) => new MetadataStorage<LayoutComponentMetadata>(id => store.getData(id)?.layout ?? null),\n            deps: [StoreDataService]\n        },\n        provideLayoutEditor(),\n        provideFormLayoutEditor(),\n        provideCssLayoutEditor(),\n        provideTinyMceLayoutEditor(),\n        provideHandlebarsLayoutEditor(),\n        provideEditorLayoutCustomComponents([], DemoCustomComponentsRegister),\n        <ClassProvider>\n        {\n            provide: PackageManager,\n            useClass: DemoLayoutPackageManager,\n        },\n        <ExistingProvider>\n        {\n            provide: DemoCustomComponentsRegister,\n            useExisting: CustomComponentsRegister,\n        },\n        <FactoryProvider>\n        {\n            provide: REFRESH_PALETTE_OBSERVABLES,\n            useFactory: (register: DemoCustomComponentsRegister) => register.registeredChange,\n            deps: [DemoCustomComponentsRegister],\n            multi: true,\n        },\n        createStoreDataServiceFactory('DYNAMIC_CONTENT_DATA'),\n    ],\n    changeDetection: ChangeDetectionStrategy.OnPush\n})\n@ComponentRouteAuthorized({path: 'layout/:id'})\n@Authorize('layoutEditor-page')\nexport class LayoutComponent implements OnInit\n{\n    //######################### private fields #########################\n\n    /**\n     * Id of layout template\n     */\n    private _id: string = '';\n\n    //######################### protected properties - template bindings #########################\n\n    /**\n     * Current metadata\n     */\n    protected metadata: LayoutComponentMetadata|null = this.emptyMetadata;\n\n    /**\n     * Gets empty metadata\n     */\n    protected get emptyMetadata(): LayoutComponentMetadata\n    {\n        return {\n            id: `stackPanel-${generateId(10)}`,\n            displayName: 'root',\n            package: 'basic-components',\n            name: 'stackPanel',\n            options: <StackPanelComponentOptions>\n            {\n                children: [] as LayoutComponentMetadata[],\n            },\n        };\n    }\n\n    //######################### constructor #########################\n    constructor(private _route: ActivatedRoute,\n                private _store: StoreDataService<LayoutRelationsMetadata>,\n                @Inject(METADATA_STATE_MANAGER) private _metaManager: MetadataStateManager<LayoutComponentMetadata>)\n    {\n    }\n\n    //######################### public methods - implementation of OnInit #########################\n    \n    /**\n     * Initialize component\n     */\n    public ngOnInit(): void\n    {\n        this._route.params.subscribe(({id}) =>\n        {\n            this._id = id;\n\n            this.metadata = this._store.getData(this._id)?.layout ?? this.emptyMetadata;\n        });\n    }\n\n    //######################### protected methods - template bindings #########################\n\n    /**\n     * Saves current template\n     */\n    protected save(): void\n    {\n        const metadata = this._store.getData(this._id) ?? {};\n        metadata.layout = this._metaManager.getMetadata() ?? undefined;\n        \n        this._store.setData(this._id, metadata);\n    }\n}","<div class=\"flex-row\">\n    <button type=\"button\" class=\"btn btn-info\" goBack>\n        <span class=\"fas fa-arrow-left\"></span>\n        <span>back</span>\n    </button>\n\n    <button type=\"button\" class=\"btn btn-primary\" (click)=\"save()\">\n        <span class=\"fas fa-save\"></span>\n        <span>save</span>\n    </button>\n</div>\n\n<layout-editor class=\"flex-1\" [metadata]=\"metadata\"></layout-editor>","import {LayoutComponent} from './layout/layout.component';\n\nexport const components =\n[\n    LayoutComponent,\n];","import {NgModule} from '@angular/core';\nimport {GoBackModule} from '@anglr/common';\nimport {ModuleRoutes} from '@anglr/common/router';\nimport {DynamicLayoutRelationsEditorModule} from '@anglr/dynamic/layout-relations';\n\nimport {components} from './dynamicContent.routes';\n\n/**\n * Module for dynamic content application pages\n */\n@NgModule(\n{\n    imports:\n    [\n        GoBackModule,\n        DynamicLayoutRelationsEditorModule,\n    ],\n    declarations:\n    [\n        ...components\n    ]\n})\n@ModuleRoutes(components)\nexport class DynamicContentModule\n{\n}"],"names":["map","webpackAsyncContext","req","__webpack_require__","o","Promise","resolve","then","e","Error","code","ids","id","keys","Object","module","exports","CUSTOM_COMPONENTS","DemoCustomComponentsRegister","CustomComponentsRegister","constructor","_store","super","_registeredChange","Subject","registeredChange","this","asObservable","toggleRegisteredComponent","name","customComponents","getRegisteredComponents","index","indexOf","splice","push","set","next","get","i0","PERMANENT_STORAGE","factory","DemoLayoutPackageManager","PackageManager","LayoutComponent","_route","_metaManager","_id","metadata","emptyMetadata","generateId","displayName","package","options","children","ngOnInit","params","subscribe","getData","layout","save","getMetadata","undefined","setData","METADATA_STATE_MANAGER","selectors","features","EditorHotkeys","provide","LAYOUT_METADATA_STORAGE","useFactory","store","MetadataStorage","deps","StoreDataService","provideLayoutEditor","provideFormLayoutEditor","provideCssLayoutEditor","provideTinyMceLayoutEditor","provideHandlebarsLayoutEditor","provideEditorLayoutCustomComponents","useClass","useExisting","REFRESH_PALETTE_OBSERVABLES","register","multi","createStoreDataServiceFactory","decls","vars","consts","template","ctx","ComponentRouteAuthorized","path","Authorize","ActivatedRoute","components","DynamicContentModule","GoBackModule","DynamicLayoutRelationsEditorModule","ModuleRoutes"],"sourceRoot":""}
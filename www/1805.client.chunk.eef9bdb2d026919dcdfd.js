"use strict";(self.webpackChunkng_universal_demo=self.webpackChunkng_universal_demo||[]).push([[1805],{83982:(t,e,o)=>{o.d(e,{j:()=>c});var n=o(46365),r=o(12987),a=o(55163),s=o(37654),i=o(13341);class c{constructor(t){this._logger=t}transform(t,e){return(0,a.fp)(t)?null:t instanceof n.NI?t:(this._logger?.warn("Failed to cast AbstractControl to FormControl"),null)}}c.ɵfac=function(t){return new(t||c)(s.Y(r.bZ,24))},c.ɵpipe=i.Yj({name:"asFormControl",type:c,pure:!0})},74062:(t,e,o)=>{o.d(e,{p:()=>m});var n=o(9526),r=o(61655),a=o(46365),s=o(94976);class i{constructor(t,e){this._factoryFn=t,this._args=e}valueOf(){return this._args?t=>(t={...this._args,args:t},this._factoryFn(t)):this._factoryFn}}class c{constructor(t,e){this._factoryFn=t,this._args=e}valueOf(){return this._args?t=>(t={...this._args,args:t},this._factoryFn(t)):this._factoryFn}}function p(t,e){if(!t)return new n.cw({});const o=t.ɵControlsMetadata??{},u=t.ɵValidators??[],l=t.ɵAsyncValidators??[],f=t.ɵArgs??{},d=Object.keys(t),m=new n.cw({},{validators:u?.map((t=>t instanceof i?t.valueOf()({...f,...e}):t)).filter((t=>!!t)),asyncValidators:l?.map((t=>t instanceof c?t.valueOf()({...f,...e}):t)).filter((t=>!!t))});for(const u of d){const l=o[u]??s.x,f=t[u];if(void 0===f)continue;const d=l.validators.map((t=>t instanceof i?t.valueOf()({...l.args,...e}):t)).filter((t=>!!t)),y=l.asyncValidators.map((t=>t instanceof c?t.valueOf()({...l.args,...e}):t)).filter((t=>!!t));let h;switch(l.type){case n.cw:h=p(f,e);break;case r.Oe:if(h=new r.Oe([],{validators:d,asyncValidators:y,...l.controlOptions}),f&&Array.isArray(f)){const t=h;for(const o of f)switch(l.childType){case n.cw:t.push(p(o,e));break;case r.Oe:break;default:t.push(new a.NI(o,{validators:d,asyncValidators:y,...l.controlOptions}))}}break;default:h=new a.NI(f,{validators:d,asyncValidators:y,...l.controlOptions})}l.disabled&&h.disable(),m.addControl(u,h)}return m}function u(t,e){return p(t,e)}var l=o(81267),f=o(97873),d=o(10012);class m{constructor(t){this._injector=t}build(t,e){return u(t,{...e,injector:this._injector})}}m.ɵfac=function(t){return new(t||m)(l.LF(f.z))},m.ɵprov=d.Yz({token:m,factory:m.ɵfac})},41329:(t,e,o)=>{o.d(e,{_:()=>p});var n=o(12987),r=o(37654),a=o(432),s=o(13341),i=o(92927);function c(t,e,o,n,r,a,s){try{var i=t[a](s),c=i.value}catch(t){return void o(t)}i.done?e(c):Promise.resolve(c).then(n,r)}class p{constructor(t,e){this._viewContainerRef=t,this._logger=e,this._componentRef=null,this.propertiesMetadata=null}ngOnChanges(){var t,e=this;return(t=function*(){if(e._logger?.debug("PropertiesControlRendererDirective: rendering properties control {@type}",{type:e.type?.name}),e.ngOnDestroy(),e._viewContainerRef.clear(),e.type){const t=e._viewContainerRef.injector;if(e._componentRef=e._viewContainerRef.createComponent(e.type,{injector:t}),e._componentRef){const t=e._componentRef.instance;t.propertiesMetadata=e.propertiesMetadata,t.form=e.form,yield t.initialize(),t.invalidateVisuals()}}},function(){var e=this,o=arguments;return new Promise((function(n,r){var a=t.apply(e,o);function s(t){c(a,n,r,s,i,"next",t)}function i(t){c(a,n,r,s,i,"throw",t)}s(void 0)}))})()}ngOnDestroy(){this._componentRef&&(this._logger?.debug("PropertiesControlRendererDirective: destroying properties control {@type}",{type:this.type?.name}),this._componentRef?.destroy(),this._componentRef=null)}}p.ɵfac=function(t){return new(t||p)(r.Y(a.s_),r.Y(n.bZ,8))},p.ɵdir=s.lG({type:p,selectors:[["","propertiesControl",""]],inputs:{form:"form",propertiesMetadata:"propertiesMetadata",type:["propertiesControl","type"]},features:[i.T]})},25818:(t,e,o)=>{o.d(e,{L:()=>u});var n=o(12405),r=o(49392),a=o(99074),s=o(68118),i=o(64141),c=o(13341),p=o(10012);class u{}u.ɵfac=function(t){return new(t||u)},u.ɵmod=c.oA({type:u}),u.ɵinj=p.cJ({imports:[n.e,r.z,i.i,s.j,a.A]})},64141:(t,e,o)=>{o.d(e,{i:()=>p});var n=o(12405),r=o(41762),a=o(99074),s=o(92288),i=o(13341),c=o(10012);class p{}p.ɵfac=function(t){return new(t||p)},p.ɵmod=i.oA({type:p}),p.ɵinj=c.cJ({imports:[n.e,r.U,a.A,s.F]})},51265:(t,e,o)=>{o.r(e),o.d(e,{CustomComponentLayoutEditorMetadata:()=>B});var n=o(54968),r=o(17649),a=o(81267),s=o(97873),i=o(12405),c=o(74062),p=o(43846),u=o(25818),l=o(13816),f=o(13341);class d{transform(t,e){return e?.editorMetadata.metaInfo?.optionsMetadata?.propertiesMetadata?.find((e=>e.modelType.name==t))?.propertiesControls??[]}}d.ɵfac=function(t){return new(t||d)},d.ɵpipe=f.Yj({name:"getControls",type:d,pure:!0,standalone:!0});class m{transform(t,e){return e?.editorMetadata.metaInfo?.optionsMetadata?.propertiesMetadata?.find((e=>e.modelType.name==t))?.modelType??null}}m.ɵfac=function(t){return new(t||m)},m.ɵpipe=f.Yj({name:"getModel",type:m,pure:!0,standalone:!0});var y=o(37654),h=o(41200);class v{constructor(t){this.propertyExtractor=t}transform(t,e){if(!t)return null;if(this.propertyExtractor??(this.propertyExtractor=e),!this.propertyExtractor)throw new Error("Please provide LayoutEditorPropertyMetadataExtractor for propertiesMetadata pipe!");return this.propertyExtractor.extract(t)}}v.ɵfac=function(t){return new(t||v)(y.Y(h.L,24))},v.ɵpipe=f.Yj({name:"propertiesMetadata",type:v,pure:!0,standalone:!0});var g=o(25844),C=o(85746),M=o(46410),_=o(87859),k=o(52455),w=o(28588),O=o(5419),b=o(83210),F=o(57165),j=o(50478),x=o(4149),P=o(46936),R=o(18968),V=o(52900),A=o(94128),Y=o(15704),L=o(71934),E=o(41329);function T(t,e,o,n,r,a,s){try{var i=t[a](s),c=i.value}catch(t){return void o(t)}i.done?e(c):Promise.resolve(c).then(n,r)}function I(t,e){if(1&t&&(M.yn(0),M.Gk(1,3),_.AL(2,"propertiesMetadata"),_.AL(3,"getModel"),M.BQ()),2&t){const t=e.$implicit,o=k.o().$implicit,n=k.o().$implicit,r=k.o();w.x(1),O.Q("propertiesControl",t)("form",r.usedComponentsForms[n.key][o.key])("propertiesMetadata",_.lc(2,3,_.xi(3,5,o.key,r.customComponentContentMetadata[n.key])))}}function Q(t,e){if(1&t&&(M.yn(0),b.Y(1,I,4,8,"ng-container",0),_.AL(2,"getControls"),M.BQ()),2&t){const t=e.$implicit,o=k.o().$implicit,n=k.o();w.x(1),O.Q("ngForOf",_.xi(2,1,t.key,n.customComponentContentMetadata[o.key]))}}function z(t,e){if(1&t&&(M.yn(0),F.Tg(1,"div",1),j._(2),F.qZ(),b.Y(3,Q,3,4,"ng-container",0),_.AL(4,"keyvalue"),F._U(5,"div",2),M.BQ()),2&t){const t=e.$implicit,o=k.o();w.x(2),x.Oq(null==o.customComponentContentMetadata[t.key]||null==o.customComponentContentMetadata[t.key].metadata?null:o.customComponentContentMetadata[t.key].metadata.displayName),w.x(1),O.Q("ngForOf",_.lc(4,2,t.value))}}class N extends p.k{constructor(){super(...arguments),this.injector=(0,a.f3)(s.z),this.formModelBuilder=(0,a.f3)(c.p),this.customComponentsRegister=(0,a.f3)(C.t),this.customComponentContentMetadata={},this.usedProperties={},this.usedComponentsForms={}}_initialize(){var t,e=this;return(t=function*(){if(!e.form)return;const t=e.form.value.name??"",o=yield(0,g.Qd)(t,e.injector);if(!o)return;e.customComponentContentMetadata=o.contentMetadata,e.customComponentMetadata=o.metadata;const n=e.customComponentsRegister.getConfigurationForComponent(t);if(n){e.usedProperties=n.configurableProperties??{};for(const t in e.usedProperties)e.customComponentContentMetadata[t]||delete e.usedProperties[t];e.initForms()}},function(){var e=this,o=arguments;return new Promise((function(n,r){var a=t.apply(e,o);function s(t){T(a,n,r,s,i,"next",t)}function i(t){T(a,n,r,s,i,"throw",t)}s(void 0)}))})()}initForms(){var t;this.usedComponentsForms={};for(const e in this.usedProperties)for(const o in this.usedProperties[e]){const n=this.customComponentContentMetadata[e]?.editorMetadata.metaInfo?.optionsMetadata?.propertiesMetadata.find((t=>t.modelType.name==o))?.modelType,r=this.usedProperties[e][o];if(!n)continue;const a=(0,l.l7)(!0,{},this.customComponentContentMetadata[e]?.editorMetadata.metaInfo?.defaultOptions,this.customComponentContentMetadata[e]?.metadata.options,this.form?.controls.contentOptions.value[e]);(t=this.usedComponentsForms)[e]??(t[e]={});const s=new n(a);for(const t of Object.keys(s))r.indexOf(t)<0&&delete s[t];const i=this.usedComponentsForms[e][o]=this.formModelBuilder.build(s);console.log(i),i.valueChanges.subscribe((t=>{const o=this.form?.controls.contentOptions.value??{};o[e]??(o[e]={}),(0,l.l7)(o[e],t),this.form?.controls.contentOptions.patchValue(o)}))}}}N.ɵfac=function(){let t;return function(e){return(t||(t=P.n5(N)))(e||N)}}(),N.ɵcmp=f.Xp({type:N,selectors:[["content-options"]],standalone:!0,features:[R._([c.p]),V.q,A.j],decls:2,vars:3,consts:[[4,"ngFor","ngForOf"],[1,"dynamic-margin-top-small","dynamic-bold","dynamic-text-uppercase","dynamic-margin-left-extra-small"],[1,"component-separator"],[3,"propertiesControl","form","propertiesMetadata"]],template:function(t,e){1&t&&(b.Y(0,z,6,4,"ng-container",0),_.AL(1,"keyvalue")),2&t&&O.Q("ngForOf",_.lc(1,1,e.usedProperties))},dependencies:[i.e,Y.sg,L.N,u.L,E._,d,m,v],encapsulation:2,changeDetection:0});class ${constructor(t){this.name="",this.contentOptions={},l.Rl.bind(this)(t)}}class B{constructor(){this.metaInfo={group:"Components",optionsMetadata:{propertiesMetadata:[{modelType:n.k,propertiesControls:[r.e]},{modelType:$,propertiesControls:[N]}]},defaultOptions:{}},Object.freeze(this)}}},71934:(t,e,o)=>{o.d(e,{N:()=>s});var n=o(37654),r=o(22718),a=o(13341);class s{constructor(t){this.differs=t,this.keyValues=[],this.compareFn=i}transform(t,e=i){if(!t||!(t instanceof Map)&&"object"!=typeof t)return null;this.differ||(this.differ=this.differs.find(t).create());const o=this.differ.diff(t),n=e!==this.compareFn;return o&&(this.keyValues=[],o.forEachItem((t=>{this.keyValues.push({key:t.key,value:t.currentValue})}))),(o||n)&&(this.keyValues.sort(e),this.compareFn=e),this.keyValues}}function i(t,e){const o=t.key,n=e.key;if(o===n)return 0;if(void 0===o)return 1;if(void 0===n)return-1;if(null===o)return 1;if(null===n)return-1;if("string"==typeof o&&"string"==typeof n)return o<n?-1:1;if("number"==typeof o&&"number"==typeof n)return o-n;if("boolean"==typeof o&&"boolean"==typeof n)return o<n?-1:1;const r=String(o),a=String(n);return r==a?0:r<a?-1:1}s.ɵfac=function(t){return new(t||s)(n.Y(r.a,16))},s.ɵpipe=a.Yj({name:"keyvalue",type:s,pure:!1,standalone:!0})}}]);
//# sourceMappingURL=1805.client.chunk.eef9bdb2d026919dcdfd.js.map
"use strict";(self.webpackChunkng_universal_demo=self.webpackChunkng_universal_demo||[]).push([[6144],{66144:(t,e,n)=>{n.r(e),n.d(e,{MergeRelationsEditorMetadata:()=>j});var o=n(12405),a=n(12125),i=n(32123),r=n(74957),s=n(69445),c=n(25434),l=n(89033),d=n(38256),p=n(57165),u=n(50478),m=n(27805),f=n(63289),g=n(52455),v=n(28588),y=n(5419),h=n(4149),b=n(37654),x=n(66382),O=n(47948),w=n(13341),_=n(52900),k=n(94128),C=n(83210),q=n(81473),P=n(15704);function T(t,e,n,o,a,i,r){try{var s=t[i](r),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(o,a)}function Z(t){return function(){var e=this,n=arguments;return new Promise((function(o,a){var i=t.apply(e,n);function r(t){T(i,o,a,r,s,"next",t)}function s(t){T(i,o,a,r,s,"throw",t)}r(void 0)}))}}function I(t,e){if(1&t){const t=d.E();p.Tg(0,"div",11),p._U(1,"relation-node-input",12),p.Tg(2,"div",5)(3,"div"),u._(4),p.qZ(),p.Tg(5,"button",13),m.N("click",(function(e){const n=f.CH(t).$implicit,o=g.o();return e.preventDefault(),e.stopPropagation(),f.Kt(o.rename(n))})),p._U(6,"span",14),p.qZ(),p.Tg(7,"button",15),m.N("click",(function(e){const n=f.CH(t).$implicit,o=g.o();return e.preventDefault(),e.stopPropagation(),f.Kt(o.removeProperty(n))})),p._U(8,"span",16),p.qZ()()()}if(2&t){const t=e.$implicit,n=g.o();v.x(1),y.Q("parentCoordiantes",n.nodePosition)("zoomLevel",n.zoomLevel)("name",t)("parent",n),v.x(3),h.Oq(t)}}class N extends a.M{get properties(){var t;return this.metadata?((t=this.metadata).relationsOptions??(t.relationsOptions={properties:[]}),this.metadata.relationsOptions.properties??[]):[]}constructor(t,e,n){super(t,e),this.dialog=n}addProperty(){var t=this;return Z((function*(){yield t.configureEndpoint(`prop${t.properties.length+1}`)}))()}removeProperty(t){let e;this.metadata?.relationsOptions?.properties?.length&&(e=this.metadata.relationsOptions.properties.indexOf(t))>=0&&(this.metadata.relationsOptions.properties.splice(e,1),this.history.getNewState())}rename(t){var e=this;return Z((function*(){yield e.configureEndpoint(t),e.changeDetector.detectChanges()}))()}configureEndpoint(t){var e=this;return Z((function*(){var n;const o={name:t,defaultValue:void 0,noDefaultValue:!0,skipInit:!1},a=yield(0,l.n)(e.dialog.open(c.b,{title:"configure property",width:"60vw",data:o}).afterClosed());if(a&&e.metadata?.relationsOptions){let a;e.metadata.relationsOptions.properties?.length&&(a=e.metadata.relationsOptions.properties.indexOf(t))>=0?(e.metadata.relationsOptions.properties.splice(a,1),e.metadata.relationsOptions.properties.splice(a,0,o.name)):((n=e.metadata.relationsOptions).properties??(n.properties=[]),e.metadata.relationsOptions.properties.push(o.name)),e.history.getNewState()}return a??!1}))()}}N.ɵfac=function(t){return new(t||N)(b.Y(x.s),b.Y(O.SB),b.Y(q.J))},N.ɵcmp=w.Xp({type:N,selectors:[["merge-node"]],standalone:!0,features:[_.q,k.j],decls:13,vars:6,consts:[["name","merge",3,"parent","destroySubject"],[1,"node-content"],[1,"inputs-outputs"],[1,"inputs"],["class","input",4,"ngFor","ngForOf"],[1,"dynamic-flex-row"],["type","button",1,"dynamic-btn-icon","dynamic-margin-left-extra-small",3,"click"],[1,"fas","fa-plus"],[1,"outputs"],[1,"output"],["name","mergedObject",3,"parentCoordiantes","zoomLevel","parent"],[1,"input"],[3,"parentCoordiantes","zoomLevel","name","parent"],["type","button",1,"dynamic-btn-icon","dynamic-margin-horizontal-extra-small",3,"click"],[1,"fas","fa-pen"],["type","button",1,"dynamic-btn-icon",3,"click"],[1,"fas","fa-times"]],template:function(t,e){1&t&&(p._U(0,"relations-node-header",0),p.Tg(1,"div",1)(2,"div",2)(3,"div",3),C.Y(4,I,9,5,"div",4),p.Tg(5,"div",5)(6,"button",6),m.N("click",(function(t){return t.preventDefault(),t.stopPropagation(),e.addProperty()})),p._U(7,"span",7),p.qZ()()(),p.Tg(8,"div",8)(9,"div",9)(10,"div"),u._(11,"merged object"),p.qZ(),p._U(12,"relation-node-output",10),p.qZ()()()()),2&t&&(y.Q("parent",e)("destroySubject",e.destroySubject),v.x(4),y.Q("ngForOf",e.properties),v.x(8),y.Q("parentCoordiantes",e.nodePosition)("zoomLevel",e.zoomLevel)("parent",e))},dependencies:[i.e,r.P,s.n,o.e,P.sg],encapsulation:2,changeDetection:0});class j{constructor(){this.metaInfo={name:"Merge",description:"Allows constructing of object merged of inputs",group:"Data"},this.nodeDefinition=N,Object.freeze(this)}}},25434:(t,e,n)=>{n.d(e,{b:()=>L});var o=n(12405),a=n(41762),i=n(6631),r=n(65540),s=n(74062),c=n(73512),l=n(14958),d=n(19598),p=n(13816),u=n(55163),m=n(89033);class f{constructor(t){this.defaultValue=null,this.name="",this.skipInit=!1,p.Rl.bind(this)(t)}}var g=n(57165),v=n(50478),y=n(38256),h=n(27805),b=n(63289),x=n(52455),O=n(37654),w=n(13341),_=n(18968),k=n(94128),C=n(83210),q=n(5419),P=n(28588),T=n(81473),Z=n(86039),I=n(33250),N=n(58433),j=n(49308),D=n(48215),E=n(78525),Q=n(97503);function U(t,e,n,o,a,i,r){try{var s=t[i](r),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(o,a)}function Y(t,e){1&t&&(g.Tg(0,"div",1)(1,"label",2),g._U(2,"input",9),v._(3," skip init "),g.qZ()())}function z(t,e){if(1&t){const t=y.E();g.Tg(0,"div",10)(1,"button",11),h.N("click",(function(){b.CH(t);const e=x.o();return b.Kt(e.showCodeEditor())})),g.Tg(2,"span"),v._(3,"default value"),g.qZ()()()}}class L{constructor(t,e,n){this.data=t,this.dialog=e,this.form=n.build(new f(t)),this.form.valueChanges.subscribe((e=>(0,p.l7)(t,e)))}showCodeEditor(){var t,e=this;return(t=function*(){const t=(0,u.EN)(e.data.defaultValue)?JSON.stringify(e.data.defaultValue,null,4):"",n=yield(0,m.n)(e.dialog.open(c.I,{title:"Code editor",width:"75vw",height:"75vh",data:{content:t,languageModel:l.H}}).afterClosed());(0,u.EN)(n)&&(e.data.defaultValue=(0,d.LK)(n.content))},function(){var e=this,n=arguments;return new Promise((function(o,a){var i=t.apply(e,n);function r(t){U(i,o,a,r,s,"next",t)}function s(t){U(i,o,a,r,s,"throw",t)}r(void 0)}))})()}}L.ɵfac=function(t){return new(t||L)(O.Y(r.m),O.Y(T.J),O.Y(s.p))},L.ɵcmp=w.Xp({type:L,selectors:[["configure-node-endpoint"]],standalone:!0,features:[_._([s.p]),k.j],decls:14,vars:5,consts:[[3,"formGroup"],[1,"dynamic-form-group","dynamic-margin-bottom-extra-small"],[1,"dynamic-control-label","dynamic-text-uppercase"],["type","text","formControlName","name",1,"dynamic-form-control"],["class","dynamic-form-group dynamic-margin-bottom-extra-small",4,"ngIf"],["class","dynamic-flex-column dynamic-margin-bottom-extra-small",4,"ngIf"],[1,"dynamic-flex-row","dynamic-flex-end"],["type","button",1,"dynamic-btn","dynamic-btn-info","dynamic-margin-right-extra-small",3,"mat-dialog-close"],["type","button",1,"dynamic-btn","dynamic-btn-primary",3,"mat-dialog-close"],["type","checkbox","formControlName","skipInit"],[1,"dynamic-flex-column","dynamic-margin-bottom-extra-small"],["type","button",1,"dynamic-btn","dynamic-btn-primary","dynamic-align-self-center",3,"click"]],template:function(t,e){1&t&&(g.Tg(0,"div",0)(1,"div",1)(2,"label",2),v._(3,"name"),g.qZ(),g._U(4,"input",3),g.qZ(),C.Y(5,Y,4,0,"div",4),C.Y(6,z,4,0,"div",5),g.qZ(),g.Tg(7,"div",6)(8,"button",7)(9,"span"),v._(10,"cancel"),g.qZ()(),g.Tg(11,"button",8)(12,"span"),v._(13,"ok"),g.qZ()()()),2&t&&(q.Q("formGroup",e.form),P.x(5),q.Q("ngIf",e.data.allowSkipInit),P.x(1),q.Q("ngIf",!e.data.noDefaultValue),P.x(2),q.Q("mat-dialog-close",null),P.x(3),q.Q("mat-dialog-close",!0))},dependencies:[a.U,Z.Fj,I.W,N.JJ,N.JL,j.s,D.u,i.I,E.ZT,o.e,Q.O],encapsulation:2,changeDetection:0})}}]);
//# sourceMappingURL=6144.client.chunk.a1096e65084d6f6f10fb.js.map
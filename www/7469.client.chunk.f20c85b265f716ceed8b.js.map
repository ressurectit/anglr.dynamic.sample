{"version":3,"file":"7469.client.chunk.f20c85b265f716ceed8b.js","mappings":"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","sources":["webpack://ng-universal-demo/../../../src/services/position/position.utils.ts","webpack://ng-universal-demo/../../../src/decorators/bindThis.decorator.ts","webpack://ng-universal-demo/../../../src/modules/position/modules/position.module.ts","webpack://ng-universal-demo/./node_modules/@anglr/dynamic/es2020/layout-editor/src/directives/designerMinDimension/designerMinDimension.directive.js","webpack://ng-universal-demo/./node_modules/@anglr/dynamic/es2020/layout-editor/src/directives/copyDesignerStyles/copyDesignerStyles.directive.js","webpack://ng-universal-demo/./node_modules/@anglr/dynamic/es2020/layout-editor/src/directives/bodyRender/bodyRender.directive.js","webpack://ng-universal-demo/./node_modules/@anglr/dynamic/es2020/layout-editor/src/components/layoutDesignerOverlayFor/layoutDesignerOverlayFor.component.js","webpack://ng-universal-demo/../../../src/modules/position/directives/positionTo/positionTo.directive.ts","webpack://ng-universal-demo/./node_modules/@anglr/dynamic/es2020/layout-editor/src/modules/layoutDndCore/directives/dndCoreDesigner/dndCoreDesigner.directive.js","webpack://ng-universal-demo/./node_modules/@anglr/dynamic/es2020/layout-editor/src/components/layoutDesigner/layoutDesigner.component.js","webpack://ng-universal-demo/./node_modules/@anglr/dynamic/es2020/layout-editor/src/directives/designerDropzone/designerDropzone.directive.js","webpack://ng-universal-demo/./node_modules/@anglr/dynamic/es2020/layout-editor/src/modules/layoutDndCore/modules/layoutDndCore.module.js","webpack://ng-universal-demo/./node_modules/@anglr/dynamic/es2020/layout-editor/src/modules/layoutDndCore/services/dndBus/dndBus.service.js"],"sourcesContent":["import {PositionResult} from './position.interface';\n\n/**\n * Applies `PositionResult` to target element\n * @param result - Result of positioning process to be applied\n */\nexport function applyPositionResult(result: PositionResult<HTMLElement>): void\n{\n    Object.assign(result.target.style,\n                  {\n                      top: '0',\n                      left: '0',\n                      transform: `translate(${result.x}px, ${result.y}px)`,\n                  });\n}\n","import {Func} from '../types/functions';\r\nimport {isFunction} from '../utils/lang';\r\n\r\n/**\r\n * Binds function to this, object instance where is defined, it is importat to place it in correct order with other decorators, usually should be first\r\n */\r\nexport function BindThis(_target: Object, propertyKey: string|symbol, descriptor: PropertyDescriptor): TypedPropertyDescriptor<Func<any, any>>\r\n{\r\n    const originalValue: Func = descriptor.value ?? descriptor.get?.();\r\n\r\n    if(!isFunction(originalValue))\r\n    {\r\n        throw new Error(`Unable to apply @BindThis decorator to '${propertyKey.toString()}', it is not a method.`);\r\n    }\r\n\r\n    return {\r\n        configurable: true,\r\n        get(this: unknown): Func\r\n        {\r\n            const bound: Func = originalValue.bind(this);\r\n\r\n            Object.defineProperty(this,\r\n                                  propertyKey,\r\n                                  {\r\n                                      value: bound,\r\n                                      configurable: true,\r\n                                      writable: true\r\n                                  });\r\n\r\n            return bound;\r\n        }\r\n    };\r\n}","import {NgModule} from '@angular/core';\n\nimport {PositionToDirective} from '../directives/positionTo/positionTo.directive';\n\n/**\n * Module for position to directive\n */\n@NgModule(\n{\n    imports:\n    [\n    ],\n    declarations:\n    [\n        PositionToDirective\n    ],\n    exports:\n    [\n        PositionToDirective\n    ]\n})\nexport class PositionModule\n{\n}\n","import { ContentChild, Directive, Input } from '@angular/core';\nimport { LayoutComponentRendererSADirective } from '@anglr/dynamic/layout';\nimport { nameof } from '@jscrpt/common';\nimport { Subscription } from 'rxjs';\nimport * as i0 from \"@angular/core\";\n/**\n * Applies min dimensions to designed element, so it can be visible event when it is empty\n */\n\nexport class DesignerMinDimensionSADirective {\n  constructor() {\n    /**\n     * Indication whether is min dimensions active\n     */\n    this.active = false;\n    /**\n     * Subscriptions created during initialization\n     */\n\n    this.initSubscriptions = new Subscription();\n    /**\n     * Minimal height of element\n     */\n\n    this.minHeight = '';\n    /**\n     * Minimal width of element\n     */\n\n    this.minWidth = ''; //######################### public properties - inputs #########################\n\n    /**\n     * Indication whether is flow of this component horizontal or vertical\n     */\n\n    this.horizontal = false;\n    /**\n     * Indication whether can drop children inside of this\n     */\n\n    this.canDrop = false;\n    /**\n     * Layout editor metadata\n     */\n\n    this.editorMetadata = null;\n  } //######################### public methods - implementation of OnInit #########################\n\n  /**\n   * Initialize component\n   */\n\n\n  ngOnInit() {\n    this.observer = new MutationObserver(changes => {\n      for (const change of changes) {\n        if (change.target instanceof HTMLElement) {\n          this.updatedDimensions(change.target);\n        }\n      }\n    });\n    this.initSubscriptions.add(this.layoutComponentRendererDirective?.componentElementChange.subscribe(element => {\n      if (!element) {\n        this.observer?.disconnect();\n        return;\n      }\n\n      this.element = element;\n      this.init();\n    }));\n  } //######################### public methods - implementation of OnChanges #########################\n\n  /**\n   * Called when input value changes\n   */\n\n\n  ngOnChanges(changes) {\n    if (nameof('editorMetadata') in changes) {\n      this.init();\n    }\n  } //######################### public methods - implementation of OnDestroy #########################\n\n  /**\n   * Called when component is destroyed\n   */\n\n\n  ngOnDestroy() {\n    this.observer?.disconnect();\n    this.initSubscriptions.unsubscribe();\n  } //######################### protected methods #########################\n\n  /**\n   * Initialize watching for children\n   */\n\n\n  init() {\n    if (!this.element || !this.editorMetadata) {\n      return;\n    }\n\n    const element = this.editorMetadata.getChildrenContainer?.(this.element) ?? this.element;\n    this.minHeight = element.style.minHeight;\n    this.minWidth = element.style.minWidth;\n    this.updatedDimensions(element);\n    this.observer?.observe(element, {\n      childList: true\n    });\n  }\n  /**\n   * Updates min dimensions if empty\n   * @param element - Element to be checked for changes\n   */\n\n\n  updatedDimensions(element) {\n    const nodesArray = [];\n    element.childNodes.forEach(node => nodesArray.push(node));\n    const contentsLength = nodesArray.filter(itm => itm.nodeName != '#comment').length;\n\n    if (contentsLength && !this.active || !contentsLength && this.active) {\n      return;\n    } //deactivate, children are present\n\n\n    if (contentsLength) {\n      //only placeholder is present\n      if (element.children.length === 1 && element.children.item(0)?.classList.contains('drag-placeholder')) {\n        return;\n      }\n\n      this.active = false;\n\n      if (this.horizontal) {\n        element.style.minWidth = this.minWidth;\n      } else {\n        element.style.minHeight = this.minHeight;\n      }\n    } //activate, children are not present\n    else {\n      this.active = true;\n\n      if (this.horizontal) {\n        element.style.minWidth = this.canDrop ? '30px' : '10px';\n      } else {\n        element.style.minHeight = this.canDrop ? '30px' : '10px';\n      }\n    }\n  }\n\n}\n\nDesignerMinDimensionSADirective.ɵfac = function DesignerMinDimensionSADirective_Factory(t) {\n  return new (t || DesignerMinDimensionSADirective)();\n};\n\nDesignerMinDimensionSADirective.ɵdir = /* @__PURE__ */i0.ɵɵdefineDirective({\n  type: DesignerMinDimensionSADirective,\n  selectors: [[\"\", \"designerMinWidth\", \"\"]],\n  contentQueries: function DesignerMinDimensionSADirective_ContentQueries(rf, ctx, dirIndex) {\n    if (rf & 1) {\n      i0.ɵɵcontentQuery(dirIndex, LayoutComponentRendererSADirective, 7);\n    }\n\n    if (rf & 2) {\n      let _t;\n\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.layoutComponentRendererDirective = _t.first);\n    }\n  },\n  inputs: {\n    horizontal: \"horizontal\",\n    canDrop: \"canDrop\",\n    editorMetadata: \"editorMetadata\"\n  },\n  standalone: true,\n  features: [i0.ɵɵNgOnChangesFeature]\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(DesignerMinDimensionSADirective, [{\n    type: Directive,\n    args: [{\n      selector: '[designerMinWidth]',\n      standalone: true\n    }]\n  }], null, {\n    layoutComponentRendererDirective: [{\n      type: ContentChild,\n      args: [LayoutComponentRendererSADirective, {\n        static: true\n      }]\n    }],\n    horizontal: [{\n      type: Input\n    }],\n    canDrop: [{\n      type: Input\n    }],\n    editorMetadata: [{\n      type: Input\n    }]\n  });\n})();","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nimport { Directive, ElementRef, Input } from '@angular/core';\nimport { LayoutEditorMetadataExtractor } from '../../services';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services\"; //TODO: remove, do it more generic\n\n/**\n * Copies designer styles that should be applied to element\n */\n\nexport class CopyDesignerStylesSADirective {\n  //######################### constructor #########################\n  constructor(_element, _metadataExtractor) {\n    this._element = _element;\n    this._metadataExtractor = _metadataExtractor;\n  } //######################### public properties - inputs #########################\n\n  /**\n   * Designed component metadata\n   */\n\n\n  get metadata() {\n    return this._metadata;\n  }\n\n  set metadata(value) {\n    this._metadata = value;\n\n    this._copyDesignerStyles();\n  } //######################### protected methods #########################\n\n  /**\n   * Copies designer styles if necessary\n   */\n\n\n  _copyDesignerStyles() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      if (!_this._metadata) {\n        return;\n      }\n\n      const metadata = yield _this._metadataExtractor.extractMetadata(_this._metadata);\n      const applyDesignerStyles = metadata?.applyDesignerStyles;\n\n      if (applyDesignerStyles) {\n        applyDesignerStyles(_this._metadata.options, _this._element.nativeElement.style);\n      }\n    })();\n  }\n\n}\n\nCopyDesignerStylesSADirective.ɵfac = function CopyDesignerStylesSADirective_Factory(t) {\n  return new (t || CopyDesignerStylesSADirective)(i0.ɵɵdirectiveInject(i0.ElementRef), i0.ɵɵdirectiveInject(i1.LayoutEditorMetadataExtractor));\n};\n\nCopyDesignerStylesSADirective.ɵdir = /* @__PURE__ */i0.ɵɵdefineDirective({\n  type: CopyDesignerStylesSADirective,\n  selectors: [[\"\", \"copyDesignerStyles\", \"\"]],\n  inputs: {\n    metadata: [\"copyDesignerStyles\", \"metadata\"]\n  },\n  exportAs: [\"copyDesignerStyles\"],\n  standalone: true\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(CopyDesignerStylesSADirective, [{\n    type: Directive,\n    args: [{\n      selector: '[copyDesignerStyles]',\n      exportAs: 'copyDesignerStyles',\n      standalone: true\n    }]\n  }], function () {\n    return [{\n      type: i0.ElementRef\n    }, {\n      type: i1.LayoutEditorMetadataExtractor\n    }];\n  }, {\n    metadata: [{\n      type: Input,\n      args: ['copyDesignerStyles']\n    }]\n  });\n})();","import { Directive, Inject, TemplateRef, ViewContainerRef } from '@angular/core';\nimport { DOCUMENT } from '@angular/common';\nimport * as i0 from \"@angular/core\";\n/**\n * Renders element into body directly at the end\n */\n\nexport class BodyRenderSADirective {\n  //######################### constructor #########################\n  constructor(template, viewContainer, document) {\n    this.template = template;\n    this.viewContainer = viewContainer;\n    this.document = document;\n  } //######################### public methods - implementation of OnInit #########################\n\n  /**\n   * Initialize component\n   */\n\n\n  ngOnInit() {\n    this.view = this.viewContainer.createEmbeddedView(this.template);\n    this.element = this.view.rootNodes[0];\n    this.document.body.appendChild(this.element);\n  } //######################### public methods - implementation of OnDestroy #########################\n\n  /**\n   * Called when component is destroyed\n   */\n\n\n  ngOnDestroy() {\n    this.element?.remove();\n    this.element = null;\n    this.view?.destroy();\n    this.view = null;\n  }\n\n}\n\nBodyRenderSADirective.ɵfac = function BodyRenderSADirective_Factory(t) {\n  return new (t || BodyRenderSADirective)(i0.ɵɵdirectiveInject(i0.TemplateRef), i0.ɵɵdirectiveInject(i0.ViewContainerRef), i0.ɵɵdirectiveInject(DOCUMENT));\n};\n\nBodyRenderSADirective.ɵdir = /* @__PURE__ */i0.ɵɵdefineDirective({\n  type: BodyRenderSADirective,\n  selectors: [[\"\", \"bodyRender\", \"\"]],\n  standalone: true\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(BodyRenderSADirective, [{\n    type: Directive,\n    args: [{\n      selector: '[bodyRender]',\n      standalone: true\n    }]\n  }], function () {\n    return [{\n      type: i0.TemplateRef\n    }, {\n      type: i0.ViewContainerRef\n    }, {\n      type: Document,\n      decorators: [{\n        type: Inject,\n        args: [DOCUMENT]\n      }]\n    }];\n  }, null);\n})();","import { Component, ChangeDetectionStrategy, ElementRef, Input, ChangeDetectorRef } from '@angular/core';\nimport { LayoutComponentRendererSADirective } from '@anglr/dynamic/layout';\nimport * as i0 from \"@angular/core\";\n/**\n * Component displaying layout designer layout overlay\n */\n\nconst _c0 = [\"layoutDesignerOverlayFor\", \"\"];\nexport class LayoutDesignerOverlayForSAComponent {\n  //######################### constructor #########################\n  constructor(_element, _changeDetector) {\n    this._element = _element;\n    this._changeDetector = _changeDetector;\n  } //######################### public methods - implementation of OnInit #########################\n\n  /**\n   * Initialize component\n   */\n\n\n  ngOnInit() {\n    this._observer = new MutationObserver(() => this._changeDetector.detectChanges()); //TODO: make this working\n\n    this._htmlElement = this.layoutComponentRendererDirective?.componentRef?.hostView?.rootNodes?.[0];\n\n    if (this._htmlElement) {\n      this._observer?.observe(this._htmlElement, {\n        attributeFilter: ['style']\n      });\n    }\n  } //######################### public methods - implementation of OnDestroy #########################\n\n  /**\n   * Called when component is destroyed\n   */\n\n\n  ngOnDestroy() {\n    this._observer?.disconnect();\n  }\n\n}\n\nLayoutDesignerOverlayForSAComponent.ɵfac = function LayoutDesignerOverlayForSAComponent_Factory(t) {\n  return new (t || LayoutDesignerOverlayForSAComponent)(i0.ɵɵdirectiveInject(i0.ElementRef), i0.ɵɵdirectiveInject(i0.ChangeDetectorRef));\n};\n\nLayoutDesignerOverlayForSAComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n  type: LayoutDesignerOverlayForSAComponent,\n  selectors: [[\"\", \"layoutDesignerOverlayFor\", \"\"]],\n  inputs: {\n    layoutComponentRendererDirective: [\"layoutDesignerOverlayFor\", \"layoutComponentRendererDirective\"]\n  },\n  standalone: true,\n  features: [i0.ɵɵStandaloneFeature],\n  attrs: _c0,\n  decls: 12,\n  vars: 24,\n  consts: [[1, \"margin-top-div\"], [1, \"margin-bottom-div\"], [1, \"margin-left-div\"], [1, \"margin-right-div\"], [1, \"padding-top-div\"], [1, \"padding-bottom-div\"], [1, \"padding-left-div\"], [1, \"padding-right-div\"], [1, \"border-top-div\"], [1, \"border-bottom-div\"], [1, \"border-left-div\"], [1, \"border-right-div\"]],\n  template: function LayoutDesignerOverlayForSAComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelement(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3)(4, \"div\", 4)(5, \"div\", 5)(6, \"div\", 6)(7, \"div\", 7)(8, \"div\", 8)(9, \"div\", 9)(10, \"div\", 10)(11, \"div\", 11);\n    }\n\n    if (rf & 2) {\n      i0.ɵɵstyleProp(\"height\", ctx._htmlElement == null ? null : ctx._htmlElement.style == null ? null : ctx._htmlElement.style.marginTop);\n      i0.ɵɵadvance(1);\n      i0.ɵɵstyleProp(\"height\", ctx._htmlElement == null ? null : ctx._htmlElement.style == null ? null : ctx._htmlElement.style.marginBottom);\n      i0.ɵɵadvance(1);\n      i0.ɵɵstyleProp(\"width\", ctx._htmlElement == null ? null : ctx._htmlElement.style == null ? null : ctx._htmlElement.style.marginLeft);\n      i0.ɵɵadvance(1);\n      i0.ɵɵstyleProp(\"width\", ctx._htmlElement == null ? null : ctx._htmlElement.style == null ? null : ctx._htmlElement.style.marginRight);\n      i0.ɵɵadvance(1);\n      i0.ɵɵstyleProp(\"height\", ctx._htmlElement == null ? null : ctx._htmlElement.style == null ? null : ctx._htmlElement.style.paddingTop);\n      i0.ɵɵadvance(1);\n      i0.ɵɵstyleProp(\"height\", ctx._htmlElement == null ? null : ctx._htmlElement.style == null ? null : ctx._htmlElement.style.paddingBottom);\n      i0.ɵɵadvance(1);\n      i0.ɵɵstyleProp(\"width\", ctx._htmlElement == null ? null : ctx._htmlElement.style == null ? null : ctx._htmlElement.style.paddingLeft);\n      i0.ɵɵadvance(1);\n      i0.ɵɵstyleProp(\"width\", ctx._htmlElement == null ? null : ctx._htmlElement.style == null ? null : ctx._htmlElement.style.paddingRight);\n      i0.ɵɵadvance(1);\n      i0.ɵɵstyleProp(\"height\", ctx._htmlElement == null ? null : ctx._htmlElement.style == null ? null : ctx._htmlElement.style.borderTop);\n      i0.ɵɵadvance(1);\n      i0.ɵɵstyleProp(\"height\", ctx._htmlElement == null ? null : ctx._htmlElement.style == null ? null : ctx._htmlElement.style.borderBottom);\n      i0.ɵɵadvance(1);\n      i0.ɵɵstyleProp(\"width\", ctx._htmlElement == null ? null : ctx._htmlElement.style == null ? null : ctx._htmlElement.style.borderLeft);\n      i0.ɵɵadvance(1);\n      i0.ɵɵstyleProp(\"width\", ctx._htmlElement == null ? null : ctx._htmlElement.style == null ? null : ctx._htmlElement.style.borderRight);\n    }\n  },\n  encapsulation: 2,\n  changeDetection: 0\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(LayoutDesignerOverlayForSAComponent, [{\n    type: Component,\n    args: [{\n      selector: '[layoutDesignerOverlayFor]',\n      standalone: true,\n      changeDetection: ChangeDetectionStrategy.OnPush,\n      template: \"<div class=\\\"margin-top-div\\\" [style.height]=\\\"_htmlElement?.style?.marginTop\\\"></div>\\n<div class=\\\"margin-bottom-div\\\" [style.height]=\\\"_htmlElement?.style?.marginBottom\\\"></div>\\n<div class=\\\"margin-left-div\\\" [style.width]=\\\"_htmlElement?.style?.marginLeft\\\"></div>\\n<div class=\\\"margin-right-div\\\" [style.width]=\\\"_htmlElement?.style?.marginRight\\\"></div>\\n<div class=\\\"padding-top-div\\\" [style.height]=\\\"_htmlElement?.style?.paddingTop\\\"></div>\\n<div class=\\\"padding-bottom-div\\\" [style.height]=\\\"_htmlElement?.style?.paddingBottom\\\"></div>\\n<div class=\\\"padding-left-div\\\" [style.width]=\\\"_htmlElement?.style?.paddingLeft\\\"></div>\\n<div class=\\\"padding-right-div\\\" [style.width]=\\\"_htmlElement?.style?.paddingRight\\\"></div>\\n<div class=\\\"border-top-div\\\" [style.height]=\\\"_htmlElement?.style?.borderTop\\\"></div>\\n<div class=\\\"border-bottom-div\\\" [style.height]=\\\"_htmlElement?.style?.borderBottom\\\"></div>\\n<div class=\\\"border-left-div\\\" [style.width]=\\\"_htmlElement?.style?.borderLeft\\\"></div>\\n<div class=\\\"border-right-div\\\" [style.width]=\\\"_htmlElement?.style?.borderRight\\\"></div>\"\n    }]\n  }], function () {\n    return [{\n      type: i0.ElementRef\n    }, {\n      type: i0.ChangeDetectorRef\n    }];\n  }, {\n    layoutComponentRendererDirective: [{\n      type: Input,\n      args: ['layoutDesignerOverlayFor']\n    }]\n  });\n})();","import {Directive, Input, ElementRef, OnChanges, SimpleChanges, Inject, Output, EventEmitter} from '@angular/core';\nimport {nameof, isPresent, isString} from '@jscrpt/common';\n\nimport {applyPositionResult, Position, PositionPlacement, PositionOptions} from '../../../../services/position';\nimport {POSITION} from '../../../../types/tokens';\n\n/**\n * Sets position of attached element relative to provided element\n */\n@Directive(\n{\n    selector: '[positionTo]'\n})\nexport class PositionToDirective implements OnChanges\n{\n    //######################### protected fields #########################\n\n    /**\n     * Position placement value\n     */\n    protected _placement: PositionPlacement|null|undefined;\n\n    /**\n     * Html element which is used as source for positioning\n     */\n    protected _source!: HTMLElement;\n\n    //######################### public properties - inputs #########################\n\n    /**\n     * Gets or sets html element which is used as source for positioning\n     */\n    @Input('positionTo')\n    public get source(): HTMLElement\n    {\n        return this._source;\n    }\n    public set source(value: HTMLElement)\n    {\n        if(value instanceof ElementRef)\n        {\n            this._source = (value as ElementRef).nativeElement;\n\n            return;\n        }\n\n        this._source = value;\n    }\n\n    /**\n     * Gets or sets position placement value\n     */\n    @Input()\n    public get placement(): PositionPlacement|null|undefined\n    {\n        return this._placement;\n    }\n    public set placement(value: PositionPlacement|null|undefined)\n    {\n        if(isString(value))\n        {\n            this._placement = PositionPlacement[value as keyof typeof PositionPlacement];\n\n            return;\n        }\n\n        this._placement = value;\n    }\n\n    // //######################### public properties - outputs #########################\n\n    /**\n     * Occurs when flip occurs during positioning\n     */\n    @Output()\n    public flip: EventEmitter<void> = new EventEmitter<void>();\n\n    //######################### constructor #########################\n    constructor(protected _target: ElementRef<HTMLElement>,\n                @Inject(POSITION) protected _position: Position)\n    {\n    }\n\n    //######################### public methods - implementation of OnChanges #########################\n\n    /**\n     * Called when input value changes\n     */\n    public ngOnChanges(changes: SimpleChanges): void\n    {\n        if((nameof<PositionToDirective>('source') in changes ||\n            nameof<PositionToDirective>('placement') in changes) &&\n           isPresent(this.source))\n        {\n            this._applyPosition();\n        }\n    }\n\n    //######################### protected methods #########################\n\n    /**\n     * Applies position according to specified parameters to specified elements\n     */\n    protected async _applyPosition(): Promise<void>\n    {\n        const options: Partial<PositionOptions> =\n        {\n        };\n\n        if(this._placement)\n        {\n            options.placement = this._placement;\n        }\n\n        const result = await this._position.placeElement(this._target.nativeElement,\n                                                         this._source,\n                                                         options).toPromise();\n\n        applyPositionResult(result);\n\n        if(result.flip)\n        {\n            this.flip.next();\n        }\n    }\n\n    //######################### ng language server #########################\n    \n    /**\n     * Custom input type for `placement` input\n     */\n    public static ngAcceptInputType_placement: PositionPlacement|undefined|null|keyof typeof PositionPlacement;\n\n    //######################### ng language server #########################\n    \n    /**\n     * Custom input type for `positionTo` input\n     */\n    public static ngAcceptInputType_positionTo: HTMLElement|ElementRef<HTMLElement>;\n}\n","import { __decorate, __metadata } from \"tslib\";\nimport { ContentChild, Directive, ElementRef, EventEmitter, Inject, Injector, Input, NgZone, Output } from '@angular/core';\nimport { DOCUMENT } from '@angular/common';\nimport { LayoutComponentRendererSADirective } from '@anglr/dynamic/layout';\nimport { BindThis, isBlank, isPresent } from '@jscrpt/common';\nimport { DndService } from '@ng-dnd/core';\nimport { filter, Subscription } from 'rxjs';\nimport { DragActiveService, LayoutEditorMetadataManager } from '../../../../services';\nimport { DndBusService } from '../../services';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ng-dnd/core\";\nimport * as i2 from \"../../../../services\";\nimport * as i3 from \"../../services\"; // import {registerDropzoneOverlay} from '../../misc/utils';\n\n/**\n * Directive used for initializing and handling dnd core functionality for layout designer\n */\n\nexport class DndCoreDesignerDirective {\n  //######################### constructor #########################\n  constructor(dnd, designerElement, draggingSvc, manager, bus, zone, injector, document) {\n    this.dnd = dnd;\n    this.designerElement = designerElement;\n    this.draggingSvc = draggingSvc;\n    this.manager = manager;\n    this.bus = bus;\n    this.zone = zone;\n    this.injector = injector;\n    this.document = document;\n    /**\n     * Subscriptions created during initialization\n     */\n\n    this.initSubscriptions = new Subscription();\n    /**\n     * Drop zone target that handles drop of component\n     */\n\n    this.placeholderDrop = this.dnd.dropTarget(['COMPONENT', 'METADATA'], {\n      canDrop: () => true,\n      drop: monitor => {\n        const item = monitor.getItem();\n        let index = this.bus.dropPlaceholderPreviewIndex;\n\n        if (item && isPresent(item.dragData.index) && isPresent(index)) {\n          //same parent and higher index\n          if (index > item.dragData.index) {\n            index--;\n          }\n        }\n\n        return {\n          index,\n          id: this.metadata?.id\n        };\n      }\n    }, this.initSubscriptions);\n    /**\n     * Drop zone target that handles drop of component\n     */\n\n    this.containerDrop = this.dnd.dropTarget(['COMPONENT', 'METADATA'], {\n      canDrop: monitor => this.canDropAncestors()[0] && monitor.isOver({\n        shallow: true\n      }),\n      drop: monitor => {\n        const [index, id] = this.getFixedDropCoordinates(monitor, false);\n        return {\n          index,\n          id\n        };\n      },\n      hover: monitor => {\n        if (monitor.isOver({\n          shallow: true\n        })) {\n          const [index, parentId] = this.getDropCoordinates(monitor, false);\n\n          if (isBlank(index) || isBlank(parentId)) {\n            return;\n          }\n\n          this.bus.setDropPlaceholderPreview({\n            index,\n            parentId,\n            placeholder: {\n              height: 0,\n              width: 0\n            }\n          });\n        }\n      }\n    }, this.initSubscriptions); //######################### public properties #########################\n\n    /**\n     * Drag source used for dragging component\n     */\n\n    this.drag = this.dnd.dragSource('COMPONENT', {\n      beginDrag: () => {\n        this.draggingSvc.setDragging(true);\n        this.designerElement.nativeElement.classList.add('is-dragged');\n        return {\n          dragData: this.dragData\n        };\n      },\n      canDrag: () => !this.dragDisabled,\n      endDrag: monitor => {\n        //dropped outside of any dropzone\n        if (!monitor.didDrop()) {\n          this.designerElement.nativeElement.classList.remove('is-dragged');\n        } //dropped into drop zone\n        else {\n          const item = monitor.getItem();\n          const dropResult = monitor.getDropResult();\n\n          if (!item) {\n            return;\n          }\n\n          item.dragData.index = dropResult.index;\n          this.bus.setDropData({\n            data: item.dragData,\n            id: dropResult.id\n          });\n        }\n\n        this.bus.setDropPlaceholderPreview(null);\n        this.draggingSvc.setDragging(false);\n      }\n    }, this.initSubscriptions);\n    /**\n     * Drop zone target that handles drop of component\n     */\n\n    this.dropzone = this.dnd.dropTarget(['COMPONENT', 'METADATA'], {\n      canDrop: monitor => (this.canDrop || this.canDropAncestors()[0]) && monitor.isOver({\n        shallow: true\n      }),\n      drop: monitor => {\n        const [index, id] = this.getFixedDropCoordinates(monitor, this.canDrop);\n        return {\n          index,\n          id\n        };\n      },\n      hover: monitor => {\n        if (monitor.isOver({\n          shallow: true\n        }) && monitor.canDrop()) {\n          const [index, parentId] = this.getDropCoordinates(monitor, this.canDrop);\n\n          if (isBlank(index) || isBlank(parentId)) {\n            return;\n          }\n\n          this.bus.setDropPlaceholderPreview({\n            index,\n            parentId,\n            placeholder: {\n              height: 0,\n              width: 0\n            }\n          });\n        }\n      }\n    }, this.initSubscriptions);\n    /**\n     * Indication whether is drag disabled\n     */\n\n    this.dragDisabled = false; //######################### public properties - outputs #########################\n\n    /**\n     * Occurs when metadata are dropped here\n     */\n\n    this.dropMetadata = new EventEmitter();\n    this.connectDropToContainer();\n  } //######################### protected properties #########################\n\n  /**\n   * Current metadata for this component\n   */\n\n\n  get metadata() {\n    if (!this.dragData.metadata) {\n      throw new Error('DndCoreDesignerDirective: invalid drag data without metadata!');\n    }\n\n    return this.dragData.metadata;\n  }\n  /**\n   * Gets indication whether component can accept drop\n   */\n\n\n  get canDrop() {\n    return this.manager.getComponent(this.metadata.id)?.canDrop ?? false;\n  }\n  /**\n   * Gets indication whether component children flow is horizontal\n   */\n\n\n  get horizontal() {\n    return this.manager.getComponent(this.metadata.id)?.horizontal ?? false;\n  }\n  /**\n   * Gets element that represents container that contains children\n   */\n\n\n  get containerElement() {\n    if (!this.componentElement) {\n      return;\n    }\n\n    const component = this.manager.getComponent(this.metadata.id);\n\n    if (!component?.editorMetadata?.getChildrenContainer) {\n      return this.componentElement;\n    }\n\n    return component.editorMetadata.getChildrenContainer(this.componentElement) ?? this.componentElement;\n  } //######################### public methods - implementation of OnInit #########################\n\n  /**\n   * Initialize component\n   */\n\n\n  ngOnInit() {\n    if (!this.dropzoneElement) {\n      throw new Error('DndCoreDesignerDirective: missing dropzone element!');\n    }\n\n    if (!this.dragData) {\n      throw new Error('DndCoreDesignerDirective: missing drag data!');\n    }\n\n    this.initSubscriptions.add(this.layoutComponentRendererDirective?.componentElementChange.subscribe(element => {\n      if (!element) {\n        this.componentElement = null;\n        return;\n      }\n\n      this.componentElement = element;\n    }));\n    this.initSubscriptions.add(this.bus.dropDataChange.pipe(filter(itm => itm.id === this.metadata.id)).subscribe(itm => this.dropMetadata.emit(itm.data)));\n    this.initSubscriptions.add(this.bus.oldDropPlaceholderPreviewChange.pipe(filter(itm => itm.parentId === this.metadata.id)).subscribe(() => {\n      this.placeholderPreviewElement?.remove();\n      this.placeholderPreviewElement = null;\n    }));\n    this.initSubscriptions.add(this.bus.newDropPlaceholderPreviewChange.pipe(filter(itm => itm.parentId === this.metadata.id)).subscribe(this.showPlaceholderPreview)); // this.initSubscriptions.add(registerDropzoneOverlay(this.dropzone, this.dropzoneElement, this.injector, this.dragData));\n    // this.initSubscriptions.add(registerDropzoneOverlay(this.containerDrop, this.designerElement.nativeElement, this.injector, this.dragData));\n    // this.initSubscriptions.add(registerDropzoneOverlay(this.containerDrop, this.designerElement.nativeElement, this.injector, this.dragData));\n  } //######################### public methods - implementation of OnDestroy #########################\n\n  /**\n   * Called when component is destroyed\n   */\n\n\n  ngOnDestroy() {\n    this.initSubscriptions.unsubscribe();\n    this.placeholderConnection?.unsubscribe();\n    this.placeholderConnection = null;\n    this.containerConnection?.unsubscribe();\n    this.containerConnection = null;\n  } //######################### protected methods #########################\n\n  /**\n   * Gets drop coordinates\n   * @param monitor - Monitor containing information about current drag drop state\n   * @param canDrop - Indication whether can drop can occur on monitor itself\n   */\n\n\n  getDropCoordinates(monitor, canDrop) {\n    //can drop in itself// for now drop at index 0\n    if (canDrop) {\n      return this.getDropCoordinatesForChildren(monitor);\n    } //else get index from descendant\n\n\n    const [canDropAncestor, ancestorId, id] = this.canDropAncestors(); //this should not happen\n\n    if (!canDropAncestor || isBlank(ancestorId)) {\n      return [null, null];\n    }\n\n    const parentComponent = this.manager.getComponent(ancestorId);\n    const componentIndex = this.manager.getComponent(id)?.index ?? 0;\n    const item = monitor.getItem();\n\n    if (item && isPresent(item.dragData.index)) {\n      //is over itself\n      if (item.dragData.metadata?.id === this.metadata.id) {\n        return [item.dragData.index, item.dragData.parentId ?? ''];\n      }\n    }\n\n    if (!parentComponent) {\n      return [null, null];\n    }\n\n    return [componentIndex + this.getIndexIncrement(monitor, parentComponent.horizontal), ancestorId];\n  }\n  /**\n   * Gets coordinates calculated for children of this component\n   * @param monitor - Monitor containing information about current drag drop state\n   */\n\n\n  getDropCoordinatesForChildren(monitor) {\n    const getHalf = element => {\n      const rect = element.children[0].getBoundingClientRect();\n      const position = this.horizontal ? rect.x : rect.y;\n      const half = (this.horizontal ? rect.width : rect.height) / 2;\n      return position + half;\n    };\n\n    if (!this.containerElement) {\n      return [null, null];\n    }\n\n    let index = 0;\n    const offset = monitor.getClientOffset();\n\n    if (!offset) {\n      return [null, null];\n    }\n\n    const position = this.horizontal ? offset.x : offset.y;\n\n    for (let x = 0; x < this.containerElement.children.length; x++) {\n      const child = this.containerElement.children[x]; //do nothing for placeholder\n\n      if (child.classList.contains('drag-placeholder')) {\n        continue;\n      } //return index if less than half\n\n\n      if (position <= getHalf(child)) {\n        return [index, this.metadata.id];\n      }\n\n      index++;\n    }\n\n    return [index, this.metadata.id];\n  }\n  /**\n   * Gets fixed drop coordinates\n   * @param monitor - Monitor containing information about current drag drop state\n   * @param canDrop - Indication whether can drop can occur on monitor itself\n   */\n\n\n  getFixedDropCoordinates(monitor, canDrop) {\n    const [index, id] = this.getDropCoordinates(monitor, canDrop);\n    let usedIndex = index;\n    const item = monitor.getItem();\n\n    if (item && isPresent(usedIndex) && isPresent(item.dragData.index)) {\n      //same parent and higher index\n      if (id === item.dragData.parentId && usedIndex > item.dragData.index) {\n        usedIndex--;\n      }\n    }\n\n    return [usedIndex, id];\n  }\n  /**\n   * Gets index increment\n   * @param monitor - Monitor to be used for obtaining information about index\n   * @param horizontal - Indication whether are items horizontaly oriented\n   */\n\n\n  getIndexIncrement(monitor, horizontal) {\n    const rect = this.dropzoneElement.getBoundingClientRect();\n    const offset = monitor.getClientOffset();\n\n    if (!offset) {\n      return 0;\n    }\n\n    const position = horizontal ? offset.x - rect.x : offset.y - rect.y;\n    const half = horizontal ? rect.width / 2 : rect.height / 2;\n\n    if (position <= half) {\n      return 0;\n    } else {\n      return 1;\n    }\n  }\n  /**\n   * Shows placeholder preview at specified location\n   * @param preview - Instance of preview data\n   */\n\n\n  showPlaceholderPreview(preview) {\n    if (!this.containerElement) {\n      return;\n    }\n\n    this.placeholderPreviewElement ?? (this.placeholderPreviewElement = this.document.createElement('div'));\n    this.placeholderPreviewElement.classList.add('drag-placeholder');\n    this.placeholderPreviewElement.remove();\n    this.connectDropToPlaceholder();\n    this.containerElement.insertBefore(this.placeholderPreviewElement, this.containerElement.children[preview.index]);\n  }\n  /**\n   * Connects placeholder preview element to placeholder drop\n   */\n\n\n  connectDropToPlaceholder() {\n    this.zone.runOutsideAngular(() => {\n      this.placeholderConnection?.unsubscribe();\n\n      if (this.placeholderPreviewElement) {\n        this.placeholderConnection = this.placeholderDrop.connectDropTarget(this.placeholderPreviewElement);\n      }\n    });\n  }\n  /**\n   * Connects container element to container drop\n   */\n\n\n  connectDropToContainer() {\n    this.zone.runOutsideAngular(() => {\n      this.containerConnection?.unsubscribe();\n      this.containerConnection = this.containerDrop.connectDropTarget(this.designerElement.nativeElement);\n    });\n  }\n  /**\n   * Gets indication whether any of ancestors can accept drop, also returns id of that ancestor\n   * @param id - Id of component whose parent will be tested, if not specified id of this component will be used\n   */\n\n\n  canDropAncestors(id) {\n    if (isBlank(id)) {\n      id = this.metadata.id;\n    }\n\n    const component = this.manager.getComponentDef(id);\n\n    if (!component?.parent) {\n      return [false, null, id];\n    }\n\n    if (component.parent.component.canDrop) {\n      return [true, component.parent.component.id, id];\n    } else {\n      return this.canDropAncestors(component.parent.component.id);\n    }\n  }\n\n}\n\nDndCoreDesignerDirective.ɵfac = function DndCoreDesignerDirective_Factory(t) {\n  return new (t || DndCoreDesignerDirective)(i0.ɵɵdirectiveInject(i1.DndService), i0.ɵɵdirectiveInject(i0.ElementRef), i0.ɵɵdirectiveInject(i2.DragActiveService), i0.ɵɵdirectiveInject(i2.LayoutEditorMetadataManager), i0.ɵɵdirectiveInject(i3.DndBusService), i0.ɵɵdirectiveInject(i0.NgZone), i0.ɵɵdirectiveInject(i0.Injector), i0.ɵɵdirectiveInject(DOCUMENT));\n};\n\nDndCoreDesignerDirective.ɵdir = /* @__PURE__ */i0.ɵɵdefineDirective({\n  type: DndCoreDesignerDirective,\n  selectors: [[\"\", \"dndCoreDesigner\", \"\"]],\n  contentQueries: function DndCoreDesignerDirective_ContentQueries(rf, ctx, dirIndex) {\n    if (rf & 1) {\n      i0.ɵɵcontentQuery(dirIndex, LayoutComponentRendererSADirective, 7);\n    }\n\n    if (rf & 2) {\n      let _t;\n\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.layoutComponentRendererDirective = _t.first);\n    }\n  },\n  inputs: {\n    dropzoneElement: \"dropzoneElement\",\n    dragData: [\"dndCoreDesigner\", \"dragData\"],\n    dragDisabled: \"dragDisabled\"\n  },\n  outputs: {\n    dropMetadata: \"dropMetadata\"\n  },\n  exportAs: [\"dndCoreDesigner\"]\n});\n\n__decorate([BindThis, __metadata(\"design:type\", Function), __metadata(\"design:paramtypes\", [Object]), __metadata(\"design:returntype\", void 0)], DndCoreDesignerDirective.prototype, \"showPlaceholderPreview\", null);\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(DndCoreDesignerDirective, [{\n    type: Directive,\n    args: [{\n      selector: '[dndCoreDesigner]',\n      exportAs: 'dndCoreDesigner'\n    }]\n  }], function () {\n    return [{\n      type: i1.DndService\n    }, {\n      type: i0.ElementRef\n    }, {\n      type: i2.DragActiveService\n    }, {\n      type: i2.LayoutEditorMetadataManager\n    }, {\n      type: i3.DndBusService\n    }, {\n      type: i0.NgZone\n    }, {\n      type: i0.Injector\n    }, {\n      type: Document,\n      decorators: [{\n        type: Inject,\n        args: [DOCUMENT]\n      }]\n    }];\n  }, {\n    layoutComponentRendererDirective: [{\n      type: ContentChild,\n      args: [LayoutComponentRendererSADirective, {\n        static: true\n      }]\n    }],\n    dropzoneElement: [{\n      type: Input\n    }],\n    dragData: [{\n      type: Input,\n      args: ['dndCoreDesigner']\n    }],\n    dragDisabled: [{\n      type: Input\n    }],\n    dropMetadata: [{\n      type: Output\n    }],\n    showPlaceholderPreview: []\n  });\n})();","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction _asyncIterator(iterable) { var method, async, sync, retry = 2; for (\"undefined\" != typeof Symbol && (async = Symbol.asyncIterator, sync = Symbol.iterator); retry--;) { if (async && null != (method = iterable[async])) return method.call(iterable); if (sync && null != (method = iterable[sync])) return new AsyncFromSyncIterator(method.call(iterable)); async = \"@@asyncIterator\", sync = \"@@iterator\"; } throw new TypeError(\"Object is not async iterable\"); }\n\nfunction AsyncFromSyncIterator(s) { function AsyncFromSyncIteratorContinuation(r) { if (Object(r) !== r) return Promise.reject(new TypeError(r + \" is not an object.\")); var done = r.done; return Promise.resolve(r.value).then(function (value) { return { value: value, done: done }; }); } return AsyncFromSyncIterator = function (s) { this.s = s, this.n = s.next; }, AsyncFromSyncIterator.prototype = { s: null, n: null, next: function () { return AsyncFromSyncIteratorContinuation(this.n.apply(this.s, arguments)); }, return: function (value) { var ret = this.s.return; return void 0 === ret ? Promise.resolve({ value: value, done: !0 }) : AsyncFromSyncIteratorContinuation(ret.apply(this.s, arguments)); }, throw: function (value) { var thr = this.s.return; return void 0 === thr ? Promise.reject(value) : AsyncFromSyncIteratorContinuation(thr.apply(this.s, arguments)); } }, new AsyncFromSyncIterator(s); }\n\nimport { Component, ChangeDetectionStrategy, ChangeDetectorRef, ElementRef, SkipSelf, Optional, Inject, Injector, ViewChild } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { LOGGER, PositionModule } from '@anglr/common';\nimport { LayoutComponentBase, LayoutComponentRendererSADirective } from '@anglr/dynamic/layout';\nimport { MetadataHistoryManager, SCOPE_ID } from '@anglr/dynamic';\nimport { isPresent } from '@jscrpt/common';\nimport { DndModule } from '@ng-dnd/core';\nimport { Subscription } from 'rxjs';\nimport { BodyRenderSADirective, CopyDesignerStylesSADirective, DesignerDropzoneSADirective, DesignerMinDimensionSADirective } from '../../directives';\nimport { LayoutComponentsIteratorService, LayoutEditorMetadataExtractor, LayoutEditorMetadataManager } from '../../services';\nimport { LayoutEditorDragPreviewSAComponent } from '../layoutEditorDragPreview/layoutEditorDragPreview.component';\nimport { LayoutDesignerOverlayForSAComponent } from '../layoutDesignerOverlayFor/layoutDesignerOverlayFor.component';\nimport { LAYOUT_HISTORY_MANAGER } from '../../misc/tokens';\nimport { DndCoreDesignerDirective, LayoutDndCoreModule } from '../../modules';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@anglr/common\";\nimport * as i4 from \"@ng-dnd/core\";\nimport * as i5 from \"../../modules/layoutDndCore/directives/dndCoreDesigner/dndCoreDesigner.directive\";\nimport * as i6 from \"@anglr/dynamic\";\n/**\n * Component used as designer component wrapper for layout component\n */\n\nconst _c0 = [\"layoutDesigner\"];\nconst _c1 = [\"dndCoreDesigner\"];\n\nfunction LayoutDesignerSAComponent_ng_template_5_Template(rf, ctx) {}\n\nfunction LayoutDesignerSAComponent_ng_container_7_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 10);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r6 = i0.ɵɵnextContext(2);\n\n    const _r0 = i0.ɵɵreference(1);\n\n    let tmp_1_0;\n    i0.ɵɵproperty(\"positionTo\", _r0);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate((tmp_1_0 = ctx_r6.editorMetadata == null ? null : ctx_r6.editorMetadata.metaInfo == null ? null : ctx_r6.editorMetadata.metaInfo.name) !== null && tmp_1_0 !== undefined ? tmp_1_0 : ctx_r6.renderedType == null ? null : ctx_r6.renderedType.name);\n  }\n}\n\nfunction LayoutDesignerSAComponent_ng_container_7_ng_container_4_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 12);\n    i0.ɵɵlistener(\"click\", function LayoutDesignerSAComponent_ng_container_7_ng_container_4_div_1_Template_div_click_0_listener() {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r9 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r9.remove());\n    });\n    i0.ɵɵelement(1, \"span\", 13);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵnextContext(3);\n\n    const _r0 = i0.ɵɵreference(1);\n\n    i0.ɵɵproperty(\"positionTo\", _r0);\n  }\n}\n\nfunction LayoutDesignerSAComponent_ng_container_7_ng_container_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, LayoutDesignerSAComponent_ng_container_7_ng_container_4_div_1_Template, 2, 1, \"div\", 11);\n    i0.ɵɵelementContainerEnd();\n  }\n}\n\nfunction LayoutDesignerSAComponent_ng_container_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelement(1, \"div\", 7)(2, \"div\", 8);\n    i0.ɵɵtemplate(3, LayoutDesignerSAComponent_ng_container_7_div_3_Template, 2, 2, \"div\", 9);\n    i0.ɵɵtemplate(4, LayoutDesignerSAComponent_ng_container_7_ng_container_4_Template, 2, 0, \"ng-container\", 6);\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext();\n\n    const _r3 = i0.ɵɵreference(6);\n\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"layoutDesignerOverlayFor\", _r3);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", !!ctx_r5.parent && (ctx_r5.parent.editorMetadata == null ? null : ctx_r5.parent.editorMetadata.removeDescendant));\n  }\n}\n\nconst _c2 = function (a0, a1, a2) {\n  return {\n    metadata: a0,\n    parentId: a1,\n    index: a2\n  };\n};\n\nexport class LayoutDesignerSAComponent extends LayoutComponentBase {\n  //######################### constructor #########################\n  constructor(changeDetector, element, injector, metadataExtractor, layoutEditorMetadataManager, iteratorSvc, history, scopeId, logger, parent) {\n    super(changeDetector, element, injector, logger);\n    this.metadataExtractor = metadataExtractor;\n    this.layoutEditorMetadataManager = layoutEditorMetadataManager;\n    this.iteratorSvc = iteratorSvc;\n    this.history = history;\n    this.scopeId = scopeId;\n    this.parent = parent; //######################### protected properties #########################\n\n    /**\n     * Subscriptions created during initialization\n     */\n\n    this.initSubscriptions = new Subscription();\n    /**\n     * Gets predicate that returns indication whether item can be dropped into this list\n     * //TODO: remove\n     */\n\n    this.canDropFn = () => this.canDrop;\n    /**\n     * Indication whether item can be dropped here\n     */\n\n\n    this.canDrop = false;\n    /**\n     * Indication whether drop list is horizontally oriented\n     */\n\n    this.horizontal = false;\n    /**\n     * Index of current layout designer in its parent\n     */\n\n    this.index = 0;\n    /**\n     * Layout editor metadata\n     */\n\n    this.editorMetadata = null;\n  } //######################### protected properties - template bindings #########################\n\n  /**\n   * Indication whether is component selected\n   */\n\n\n  get selected() {\n    return this.layoutEditorMetadataManager.selectedComponent === this.options?.typeMetadata.id;\n  }\n  /**\n   * Indication whether is component highlighted\n   */\n\n\n  get highlighted() {\n    return this.layoutEditorMetadataManager.highlightedComponent === this.options?.typeMetadata.id;\n  } //######################### protected properties - overrides #########################\n\n  /**\n   * @inheritdoc\n   */\n\n\n  get element() {\n    return this.designerElement;\n  }\n  /**\n   * @inheritdoc\n   */\n\n\n  get extensionsOptions() {\n    return this.options?.typeMetadata.options;\n  } //######################### public properties #########################\n\n  /**\n   * Indication whether drag is disabled for component\n   */\n\n\n  get dragDisabled() {\n    return !this.parent || !!this.editorMetadata?.metaInfo?.dragDisabled;\n  }\n  /**\n   * Component identifier\n   */\n\n\n  get id() {\n    return this.options?.typeMetadata?.id ?? '';\n  } //######################### public methods - implementation of OnDestroy #########################\n\n  /**\n   * Called when component is destroyed\n   */\n\n\n  ngOnDestroy() {\n    this.logger?.debug('LayoutDesignerSAComponent: Destroying component {@data}', {\n      id: this.options?.typeMetadata.id\n    });\n    this.initSubscriptions.unsubscribe();\n    super.ngOnDestroy();\n\n    if (this.options) {\n      this.layoutEditorMetadataManager.unregisterLayoutDesignerComponent(this.options.typeMetadata.id);\n    }\n  } //######################### public methods #########################\n\n  /**\n   * Adds descentant component metadata to this component metadata\n   * @param dragData - Data from drag n drop event\n   */\n  // public addDescendant(dragData: CdkDragDrop<LayoutComponentDragData, LayoutComponentDragData, LayoutComponentDragData>): void\n\n\n  addDescendant(dragData) {\n    if (!this.options) {\n      return;\n    }\n\n    const parentId = dragData.parentId;\n    this.logger?.debug('LayoutDesignerSAComponent: Adding descendant {@data}', {\n      id: dragData.metadata?.id,\n      parent: this.options.typeMetadata.id\n    });\n\n    if (!dragData.metadata) {\n      this.logger?.warn('LayoutDesignerSAComponent: Missing metadata while adding descendant');\n      return;\n    } //already added to tree, removing old reference\n\n\n    if (parentId) {\n      this.history.disable();\n      this.layoutEditorMetadataManager.getComponent(parentId)?.removeDescendant(dragData.metadata?.id);\n      this.history.enable();\n    }\n\n    this.editorMetadata?.addDescendant?.(dragData?.metadata, this.options.typeMetadata.options, dragData.index ?? 0);\n    this.canDrop = this.editorMetadata?.canDropMetadata?.(this.options.typeMetadata.options) ?? false;\n    this.renderedType = { ...this.options.typeMetadata\n    };\n    this.changeDetector.markForCheck();\n    this.history.getNewState();\n  } //######################### protected methods #########################\n\n  /**\n   * Removes descendant metadata from this component metadata\n   * @param id - Id of descendant to be removed\n   */\n\n\n  removeDescendant(id) {\n    if (!this.options) {\n      return;\n    }\n\n    this.logger?.debug('LayoutDesignerSAComponent: Removing descendant {@data}', {\n      id: this.options.typeMetadata.id,\n      child: id\n    });\n    this.editorMetadata?.removeDescendant?.(id, this.options.typeMetadata.options);\n    this.canDrop = this.editorMetadata?.canDropMetadata?.(this.options.typeMetadata.options) ?? false;\n    this.renderedType = { ...this.options.typeMetadata\n    };\n    this.changeDetector.markForCheck();\n    this.history.getNewState();\n  } //######################### protected methods - template bindings #########################\n\n  /**\n   * Shows designer overlay\n   * @param event - Mouse event that occured\n   */\n\n\n  showOverlay(event) {\n    this.logger?.verbose('LayoutDesignerComponent: Showing overlay for {@type}', {\n      name: this.options?.typeMetadata.name,\n      id: this.options?.typeMetadata.id\n    });\n    event.preventDefault();\n    event.stopPropagation();\n    this.layoutEditorMetadataManager.highlightComponent(this.options?.typeMetadata.id);\n  }\n  /**\n   * Hides designer overlay\n   * @param event - Mouse event that occured\n   */\n\n\n  hideOverlay(event) {\n    if (isPresent(this.parent)) {\n      return;\n    }\n\n    this.logger?.verbose('LayoutDesignerComponent: Hiding overlay for {@type}', {\n      name: this.options?.typeMetadata.name,\n      id: this.options?.typeMetadata.id\n    });\n    event.preventDefault();\n    event.stopPropagation();\n    this.layoutEditorMetadataManager.cancelHighlightedComponent();\n  }\n  /**\n   * Marks component as selected\n   * @param event - Event that occured\n   */\n\n\n  selectComponent(event) {\n    event.preventDefault();\n    event.stopPropagation();\n\n    if (this.options) {\n      this.layoutEditorMetadataManager.selectComponent(this.options.typeMetadata.id);\n    }\n  }\n  /**\n   * Unselects selected component\n   * @param event - Event that occured\n   */\n\n\n  unselectComponent(event) {\n    event.preventDefault();\n    event.stopPropagation();\n    this.layoutEditorMetadataManager.unselectComponent();\n  }\n  /**\n   * Removes itself from tree\n   */\n\n\n  remove() {\n    if (!this.parent || !this.options) {\n      return;\n    }\n\n    this.parent.removeDescendant(this.options.typeMetadata.id);\n  } //######################### protected methods - overrides #########################\n\n  /**\n   * @inheritdoc\n   */\n\n\n  onInit() {\n    var _superprop_getOnInit = () => super.onInit,\n        _this = this;\n\n    return _asyncToGenerator(function* () {\n      yield _superprop_getOnInit().call(_this);\n\n      if (!_this.options) {\n        return;\n      }\n\n      _this.options.typeMetadata.scope = _this.scopeId;\n\n      if (_this.parent?.options) {\n        var _iteratorAbruptCompletion = false;\n        var _didIteratorError = false;\n\n        var _iteratorError;\n\n        try {\n          for (var _iterator = _asyncIterator(_this.iteratorSvc.getChildrenIteratorFor(_this.parent.options?.typeMetadata)), _step; _iteratorAbruptCompletion = !(_step = yield _iterator.next()).done; _iteratorAbruptCompletion = false) {\n            const child = _step.value;\n\n            if (_this.options.typeMetadata.id === child.metadata.id) {\n              _this.index = child.index;\n              break;\n            }\n          }\n        } catch (err) {\n          _didIteratorError = true;\n          _iteratorError = err;\n        } finally {\n          try {\n            if (_iteratorAbruptCompletion && _iterator.return != null) {\n              yield _iterator.return();\n            }\n          } finally {\n            if (_didIteratorError) {\n              throw _iteratorError;\n            }\n          }\n        }\n      } //TODO: optimize\n\n\n      _this.initSubscriptions.add(_this.layoutEditorMetadataManager.selectedChange.subscribe(() => _this.changeDetector.detectChanges()));\n\n      _this.initSubscriptions.add(_this.layoutEditorMetadataManager.highlightedChange.subscribe(() => _this.changeDetector.detectChanges()));\n\n      _this.editorMetadata = yield _this.metadataExtractor.extractMetadata(_this.options.typeMetadata);\n      _this.canDrop = _this.editorMetadata?.canDropMetadata?.(_this.options.typeMetadata.options) ?? false;\n\n      _this.layoutEditorMetadataManager.registerLayoutDesignerComponent(_this, _this.options.typeMetadata.id, _this.parent?.options?.typeMetadata.id);\n    })();\n  }\n  /**\n   * @inheritdoc\n   */\n\n\n  onOptionsSet() {\n    if (!this.options) {\n      return;\n    }\n\n    this.renderedType = { ...this.options.typeMetadata\n    };\n    this.horizontal = this.editorMetadata?.isHorizontalDrop?.(this.options.typeMetadata.options) ?? false;\n  }\n\n}\n\nLayoutDesignerSAComponent.ɵfac = function LayoutDesignerSAComponent_Factory(t) {\n  return new (t || LayoutDesignerSAComponent)(i0.ɵɵdirectiveInject(i0.ChangeDetectorRef), i0.ɵɵdirectiveInject(i0.ElementRef), i0.ɵɵdirectiveInject(i0.Injector), i0.ɵɵdirectiveInject(i1.LayoutEditorMetadataExtractor), i0.ɵɵdirectiveInject(i1.LayoutEditorMetadataManager), i0.ɵɵdirectiveInject(i1.LayoutComponentsIteratorService), i0.ɵɵdirectiveInject(LAYOUT_HISTORY_MANAGER), i0.ɵɵdirectiveInject(SCOPE_ID, 8), i0.ɵɵdirectiveInject(LOGGER, 8), i0.ɵɵdirectiveInject(LayoutDesignerSAComponent, 12));\n};\n\nLayoutDesignerSAComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n  type: LayoutDesignerSAComponent,\n  selectors: [[\"layout-designer-component\"]],\n  viewQuery: function LayoutDesignerSAComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c0, 7);\n      i0.ɵɵviewQuery(_c1, 7);\n    }\n\n    if (rf & 2) {\n      let _t;\n\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.designerElement = _t.first);\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.dndCoreDesigner = _t.first);\n    }\n  },\n  standalone: true,\n  features: [i0.ɵɵInheritDefinitionFeature, i0.ɵɵStandaloneFeature],\n  decls: 8,\n  vars: 18,\n  consts: [[1, \"designer-overlay\", 3, \"dndCoreDesigner\", \"dropzoneElement\", \"dragDisabled\", \"dragSource\", \"noHTML5Preview\", \"copyDesignerStyles\", \"dropMetadata\", \"mouseleave\", \"mouseover\", \"click\", \"dblclick\"], [\"layoutDesigner\", \"\", \"dndCore\", \"dndCoreDesigner\"], [\"designerMinWidth\", \"\", 1, \"designer-dropzone\", 3, \"canDrop\", \"editorMetadata\", \"horizontal\", \"dropTarget\", \"isDropZone\"], [\"layoutDropzone\", \"\"], [3, \"layoutComponentRenderer\", \"layoutComponentRendererDisableTransformer\"], [\"renderer\", \"layoutComponentRenderer\"], [4, \"ngIf\"], [1, \"designer-overlay-border\"], [1, \"designer-overlay-layout\", 3, \"layoutDesignerOverlayFor\"], [\"class\", \"designer-overlay-title\", \"placement\", \"TopStart\", 3, \"positionTo\", 4, \"bodyRender\"], [\"placement\", \"TopStart\", 1, \"designer-overlay-title\", 3, \"positionTo\"], [\"class\", \"designer-overlay-remove\", \"placement\", \"TopEnd\", 3, \"positionTo\", \"click\", 4, \"bodyRender\"], [\"placement\", \"TopEnd\", 1, \"designer-overlay-remove\", 3, \"positionTo\", \"click\"], [1, \"fas\", \"fa-times\"]],\n  template: function LayoutDesignerSAComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0, 1);\n      i0.ɵɵlistener(\"dropMetadata\", function LayoutDesignerSAComponent_Template_div_dropMetadata_0_listener($event) {\n        return ctx.addDescendant($event);\n      })(\"mouseleave\", function LayoutDesignerSAComponent_Template_div_mouseleave_0_listener($event) {\n        return ctx.hideOverlay($event);\n      })(\"mouseover\", function LayoutDesignerSAComponent_Template_div_mouseover_0_listener($event) {\n        return ctx.showOverlay($event);\n      })(\"click\", function LayoutDesignerSAComponent_Template_div_click_0_listener($event) {\n        return ctx.selectComponent($event);\n      })(\"dblclick\", function LayoutDesignerSAComponent_Template_div_dblclick_0_listener($event) {\n        return ctx.unselectComponent($event);\n      });\n      i0.ɵɵelementStart(3, \"div\", 2, 3);\n      i0.ɵɵtemplate(5, LayoutDesignerSAComponent_ng_template_5_Template, 0, 0, \"ng-template\", 4, 5, i0.ɵɵtemplateRefExtractor);\n      i0.ɵɵtemplate(7, LayoutDesignerSAComponent_ng_container_7_Template, 5, 2, \"ng-container\", 6);\n      i0.ɵɵelementEnd()();\n    }\n\n    if (rf & 2) {\n      const _r1 = i0.ɵɵreference(2);\n\n      const _r2 = i0.ɵɵreference(4);\n\n      let tmp_8_0;\n      i0.ɵɵproperty(\"dndCoreDesigner\", i0.ɵɵpureFunction3(14, _c2, ctx.renderedType, ctx.parent == null ? null : ctx.parent.renderedType == null ? null : ctx.parent.renderedType.id, ctx.index))(\"dropzoneElement\", _r2)(\"dragDisabled\", ctx.dragDisabled)(\"dragSource\", _r1.drag)(\"noHTML5Preview\", true)(\"copyDesignerStyles\", ctx.renderedType);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"canDrop\", ctx.canDrop)(\"editorMetadata\", ctx.editorMetadata)(\"horizontal\", (tmp_8_0 = ctx.parent == null ? null : ctx.parent.horizontal) !== null && tmp_8_0 !== undefined ? tmp_8_0 : false)(\"dropTarget\", _r1.dropzone)(\"isDropZone\", ctx.canDrop);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"layoutComponentRenderer\", ctx.renderedType)(\"layoutComponentRendererDisableTransformer\", true);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.highlighted || ctx.selected);\n    }\n  },\n  dependencies: [//TODO: cleanup\n  CommonModule, i2.NgIf, PositionModule, i3.PositionToDirective, LayoutDesignerOverlayForSAComponent, DesignerMinDimensionSADirective, CopyDesignerStylesSADirective, LayoutComponentRendererSADirective, DesignerDropzoneSADirective, BodyRenderSADirective, DndModule, i4.DragSourceDirective, i4.DropTargetDirective, LayoutDndCoreModule, i5.DndCoreDesignerDirective],\n  encapsulation: 2,\n  changeDetection: 0\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(LayoutDesignerSAComponent, [{\n    type: Component,\n    args: [{\n      selector: 'layout-designer-component',\n      standalone: true,\n      imports: [//TODO: cleanup\n      CommonModule, PositionModule, LayoutEditorDragPreviewSAComponent, LayoutDesignerOverlayForSAComponent, DesignerMinDimensionSADirective, CopyDesignerStylesSADirective, LayoutComponentRendererSADirective, DesignerDropzoneSADirective, BodyRenderSADirective, DndModule, LayoutDndCoreModule],\n      changeDetection: ChangeDetectionStrategy.OnPush,\n      template: \"<div class=\\\"designer-overlay\\\" \\n     #layoutDesigner\\n     #dndCore=\\\"dndCoreDesigner\\\"\\n     [dndCoreDesigner]=\\\"{metadata: renderedType, parentId: parent?.renderedType?.id, index: index}\\\"\\n     [dropzoneElement]=\\\"layoutDropzone\\\"\\n     [dragDisabled]=\\\"dragDisabled\\\"\\n     [dragSource]=\\\"dndCore.drag\\\"\\n     [noHTML5Preview]=\\\"true\\\"\\n     (dropMetadata)=\\\"addDescendant($event)\\\"\\n     [copyDesignerStyles]=\\\"renderedType\\\"\\n     (mouseleave)=\\\"hideOverlay($event)\\\"\\n     (mouseover)=\\\"showOverlay($event)\\\"\\n     (click)=\\\"selectComponent($event)\\\"\\n     (dblclick)=\\\"unselectComponent($event)\\\">\\n    <div class=\\\"designer-dropzone\\\"\\n         #layoutDropzone\\n         designerMinWidth\\n         [canDrop]=\\\"canDrop\\\"\\n         [editorMetadata]=\\\"editorMetadata\\\"\\n         [horizontal]=\\\"parent?.horizontal ?? false\\\"\\n         [dropTarget]=\\\"dndCore.dropzone\\\"\\n         [isDropZone]=\\\"canDrop\\\">\\n        <ng-template #renderer=\\\"layoutComponentRenderer\\\" [layoutComponentRenderer]=\\\"renderedType\\\" [layoutComponentRendererDisableTransformer]=\\\"true\\\"></ng-template>\\n\\n        <ng-container *ngIf=\\\"highlighted || selected\\\">\\n            <div class=\\\"designer-overlay-border\\\"></div>\\n            <div class=\\\"designer-overlay-layout\\\" [layoutDesignerOverlayFor]=\\\"renderer\\\"></div>\\n\\n            <div class=\\\"designer-overlay-title\\\"\\n                 *bodyRender\\n                 [positionTo]=\\\"layoutDesigner\\\"\\n                 placement=\\\"TopStart\\\">{{editorMetadata?.metaInfo?.name ?? renderedType?.name}}</div>\\n\\n            <ng-container *ngIf=\\\"!!parent && parent.editorMetadata?.removeDescendant\\\">\\n                <div *bodyRender\\n                     class=\\\"designer-overlay-remove\\\"\\n                     [positionTo]=\\\"layoutDesigner\\\"\\n                     placement=\\\"TopEnd\\\"\\n                     (click)=\\\"remove()\\\">\\n                    <span class=\\\"fas fa-times\\\"></span>\\n                </div>\\n            </ng-container>\\n        </ng-container>\\n    </div>\\n</div>\\n\"\n    }]\n  }], function () {\n    return [{\n      type: i0.ChangeDetectorRef\n    }, {\n      type: i0.ElementRef\n    }, {\n      type: i0.Injector\n    }, {\n      type: i1.LayoutEditorMetadataExtractor\n    }, {\n      type: i1.LayoutEditorMetadataManager\n    }, {\n      type: i1.LayoutComponentsIteratorService\n    }, {\n      type: i6.MetadataHistoryManager,\n      decorators: [{\n        type: Inject,\n        args: [LAYOUT_HISTORY_MANAGER]\n      }]\n    }, {\n      type: undefined,\n      decorators: [{\n        type: Optional\n      }, {\n        type: Inject,\n        args: [SCOPE_ID]\n      }]\n    }, {\n      type: undefined,\n      decorators: [{\n        type: Inject,\n        args: [LOGGER]\n      }, {\n        type: Optional\n      }]\n    }, {\n      type: LayoutDesignerSAComponent,\n      decorators: [{\n        type: SkipSelf\n      }, {\n        type: Optional\n      }]\n    }];\n  }, {\n    designerElement: [{\n      type: ViewChild,\n      args: ['layoutDesigner', {\n        static: true\n      }]\n    }],\n    dndCoreDesigner: [{\n      type: ViewChild,\n      args: ['dndCoreDesigner', {\n        static: true\n      }]\n    }]\n  });\n})();","import { Directive, ElementRef, Input } from '@angular/core';\nimport { Subscription } from 'rxjs';\nimport { DragActiveService } from '../../services';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services\";\n/**\n * Directive that adds special changes for designer dropzone\n */\n\nexport class DesignerDropzoneSADirective {\n  //######################### constructor #########################\n  constructor(draggingSvc, element) {\n    this.draggingSvc = draggingSvc;\n    this.element = element; //######################### protected properties #########################\n\n    /**\n     * Subscriptions created during initialization\n     */\n\n    this.initSubscriptions = new Subscription(); //######################### public properties - inputs #########################\n\n    /**\n     * Indication whether is this enabled drop zone\n     */\n\n    this.isDropZone = false;\n  } //######################### public methods - implementation of OnInit #########################\n\n  /**\n   * Initialize component\n   */\n\n\n  ngOnInit() {\n    this.initSubscriptions.add(this.draggingSvc.draggingChange.subscribe(() => this.processDragValue()));\n  } //######################### public methods - implementation of OnDestroy #########################\n\n  /**\n   * Called when component is destroyed\n   */\n\n\n  ngOnDestroy() {\n    this.initSubscriptions.unsubscribe();\n  } //######################### protected methods #########################\n\n  /**\n   * Process drag current value and sets css classes\n   */\n\n\n  processDragValue() {\n    //relate to https://stackoverflow.com/a/20734159\n    //Need to wait before manipulating with DOM because browser can trigger dragend if dragged node is out of mouse position\n    setTimeout(() => {\n      if (this.draggingSvc.dragging && this.isDropZone) {\n        this.element.nativeElement.classList.add('drag-active');\n      } else {\n        this.element.nativeElement.classList.remove('drag-active');\n      }\n    });\n  }\n\n}\n\nDesignerDropzoneSADirective.ɵfac = function DesignerDropzoneSADirective_Factory(t) {\n  return new (t || DesignerDropzoneSADirective)(i0.ɵɵdirectiveInject(i1.DragActiveService), i0.ɵɵdirectiveInject(i0.ElementRef));\n};\n\nDesignerDropzoneSADirective.ɵdir = /* @__PURE__ */i0.ɵɵdefineDirective({\n  type: DesignerDropzoneSADirective,\n  selectors: [[\"\", 8, \"designer-dropzone\"]],\n  inputs: {\n    isDropZone: \"isDropZone\"\n  },\n  standalone: true\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(DesignerDropzoneSADirective, [{\n    type: Directive,\n    args: [{\n      selector: '.designer-dropzone',\n      standalone: true\n    }]\n  }], function () {\n    return [{\n      type: i1.DragActiveService\n    }, {\n      type: i0.ElementRef\n    }];\n  }, {\n    isDropZone: [{\n      type: Input\n    }]\n  });\n})();","import { NgModule } from '@angular/core';\nimport { DndCorePreviewComponent } from '../components';\nimport { DndCoreDesignerDirective, DndCorePaletteItemDirective, DndCorePreviewTemplateDirective, DndCoreTreeItemDirective } from '../directives';\nimport * as i0 from \"@angular/core\";\n/**\n * Module used for handling layout dnd core stuff\n */\n\nexport class LayoutDndCoreModule {}\n\nLayoutDndCoreModule.ɵfac = function LayoutDndCoreModule_Factory(t) {\n  return new (t || LayoutDndCoreModule)();\n};\n\nLayoutDndCoreModule.ɵmod = /* @__PURE__ */i0.ɵɵdefineNgModule({\n  type: LayoutDndCoreModule\n});\nLayoutDndCoreModule.ɵinj = /* @__PURE__ */i0.ɵɵdefineInjector({});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(LayoutDndCoreModule, [{\n    type: NgModule,\n    args: [{\n      declarations: [DndCorePreviewComponent, DndCoreDesignerDirective, DndCorePaletteItemDirective, DndCorePreviewTemplateDirective, DndCoreTreeItemDirective],\n      exports: [DndCorePreviewComponent, DndCoreDesignerDirective, DndCorePaletteItemDirective, DndCorePreviewTemplateDirective, DndCoreTreeItemDirective]\n    }]\n  }], null, null);\n})();","import { Injectable } from '@angular/core';\nimport { Subject } from 'rxjs';\nimport * as i0 from \"@angular/core\";\n/**\n * Service that serves as communication bus for dnd\n */\n\nexport class DndBusService {\n  constructor() {\n    //######################### protected fields #########################\n\n    /**\n     * Used for emitting drop data changes\n     */\n    this.dropDataChangeSubject = new Subject();\n    /**\n     * Current value of drop placeholder preview\n     */\n\n    this.dropPlaceholderPreview = null;\n    /**\n     * Used for emitting when new drop placeholder preview should be displayed\n     */\n\n    this.newDropPlaceholderPreviewSubject = new Subject();\n    /**\n     * Used for emitting when old drop placeholder preview should be removed\n     */\n\n    this.oldDropPlaceholderPreviewSubject = new Subject();\n  } //######################### public properties #########################\n\n  /**\n   * Occurs when drop data changes\n   */\n\n\n  get dropDataChange() {\n    return this.dropDataChangeSubject.asObservable();\n  }\n  /**\n   * Occurs when new drop placeholder preview should be displayed\n   */\n\n\n  get newDropPlaceholderPreviewChange() {\n    return this.newDropPlaceholderPreviewSubject.asObservable();\n  }\n  /**\n   * Occurs when old drop placeholder preview should be removed\n   */\n\n\n  get oldDropPlaceholderPreviewChange() {\n    return this.oldDropPlaceholderPreviewSubject.asObservable();\n  }\n  /**\n   * Gets current drop placeholder preview index\n   */\n\n\n  get dropPlaceholderPreviewIndex() {\n    return this.dropPlaceholderPreview?.index ?? null;\n  } //######################### public methods #########################\n\n  /**\n   * Sets drop data new value\n   * @param data - Value of data that changed\n   */\n\n\n  setDropData(data) {\n    this.dropDataChangeSubject.next(data);\n  }\n  /**\n   * Sets drop placeholder preview\n   * @param data - Data for new drop placeholder preview\n   */\n\n\n  setDropPlaceholderPreview(data) {\n    //nothing has changed\n    if (data?.index === this.dropPlaceholderPreview?.index && data?.parentId === this.dropPlaceholderPreview?.parentId) {\n      return;\n    }\n\n    if (this.dropPlaceholderPreview) {\n      this.oldDropPlaceholderPreviewSubject.next(this.dropPlaceholderPreview);\n    }\n\n    this.dropPlaceholderPreview = data;\n\n    if (this.dropPlaceholderPreview) {\n      this.newDropPlaceholderPreviewSubject.next(this.dropPlaceholderPreview);\n    }\n  }\n\n}\n\nDndBusService.ɵfac = function DndBusService_Factory(t) {\n  return new (t || DndBusService)();\n};\n\nDndBusService.ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n  token: DndBusService,\n  factory: DndBusService.ɵfac\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(DndBusService, [{\n    type: Injectable\n  }], null, null);\n})();"],"names":["applyPositionResult","result","Object","assign","target","style","top","left","transform","x","y","BindThis","_target","propertyKey","descriptor","originalValue","value","get","isFunction","Error","toString","configurable","bound","bind","this","defineProperty","writable","PositionModule","DesignerMinDimensionSADirective","constructor","active","initSubscriptions","Subscription","minHeight","minWidth","horizontal","canDrop","editorMetadata","ngOnInit","observer","MutationObserver","changes","change","HTMLElement","updatedDimensions","add","layoutComponentRendererDirective","componentElementChange","subscribe","element","init","disconnect","ngOnChanges","nameof","ngOnDestroy","unsubscribe","getChildrenContainer","observe","childList","nodesArray","childNodes","forEach","node","push","contentsLength","filter","itm","nodeName","length","children","item","classList","contains","t","type","selectors","contentQueries","rf","ctx","dirIndex","_t","first","inputs","standalone","features","asyncGeneratorStep","gen","resolve","reject","_next","_throw","key","arg","info","error","done","Promise","then","CopyDesignerStylesSADirective","_element","_metadataExtractor","metadata","_metadata","_copyDesignerStyles","fn","_this","applyDesignerStyles","extractMetadata","options","nativeElement","self","args","arguments","apply","err","undefined","exportAs","BodyRenderSADirective","template","viewContainer","document","view","createEmbeddedView","rootNodes","body","appendChild","remove","destroy","LayoutDesignerOverlayForSAComponent","_changeDetector","_observer","detectChanges","_htmlElement","componentRef","hostView","attributeFilter","attrs","decls","vars","consts","marginTop","marginBottom","marginLeft","marginRight","paddingTop","paddingBottom","paddingLeft","paddingRight","borderTop","borderBottom","borderLeft","borderRight","encapsulation","changeDetection","PositionToDirective","_position","flip","EventEmitter","source","_source","ElementRef","placement","_placement","isString","PositionPlacement","isPresent","_applyPosition","placeElement","toPromise","next","i0","POSITION","DndCoreDesignerDirective","dnd","designerElement","draggingSvc","manager","bus","zone","injector","placeholderDrop","dropTarget","drop","monitor","getItem","index","dropPlaceholderPreviewIndex","dragData","id","containerDrop","canDropAncestors","isOver","shallow","getFixedDropCoordinates","hover","parentId","getDropCoordinates","setDropPlaceholderPreview","placeholder","height","width","drag","dragSource","beginDrag","setDragging","canDrag","dragDisabled","endDrag","didDrop","dropResult","getDropResult","setDropData","data","dropzone","dropMetadata","connectDropToContainer","getComponent","containerElement","componentElement","component","dropzoneElement","dropDataChange","pipe","emit","oldDropPlaceholderPreviewChange","placeholderPreviewElement","newDropPlaceholderPreviewChange","showPlaceholderPreview","placeholderConnection","containerConnection","getDropCoordinatesForChildren","canDropAncestor","ancestorId","parentComponent","componentIndex","getIndexIncrement","getHalf","rect","getBoundingClientRect","offset","getClientOffset","position","child","usedIndex","preview","createElement","connectDropToPlaceholder","insertBefore","runOutsideAngular","connectDropTarget","getComponentDef","parent","AsyncFromSyncIterator","s","AsyncFromSyncIteratorContinuation","r","TypeError","n","prototype","return","ret","throw","thr","outputs","Function","_c1","LayoutDesignerSAComponent_ng_template_5_Template","LayoutDesignerSAComponent_ng_container_7_div_3_Template","ctx_r6","_r0","tmp_1_0","metaInfo","name","renderedType","LayoutDesignerSAComponent_ng_container_7_ng_container_4_div_1_Template","_r10","ctx_r9","LayoutDesignerSAComponent_ng_container_7_ng_container_4_Template","LayoutDesignerSAComponent_ng_container_7_Template","ctx_r5","_r3","removeDescendant","_c2","a0","a1","a2","LayoutDesignerSAComponent","changeDetector","metadataExtractor","layoutEditorMetadataManager","iteratorSvc","history","scopeId","logger","super","canDropFn","selected","selectedComponent","typeMetadata","highlighted","highlightedComponent","extensionsOptions","debug","unregisterLayoutDesignerComponent","addDescendant","disable","enable","canDropMetadata","markForCheck","getNewState","warn","showOverlay","event","verbose","preventDefault","stopPropagation","highlightComponent","hideOverlay","cancelHighlightedComponent","selectComponent","unselectComponent","onInit","_superprop_getOnInit","call","scope","_iteratorError","_iteratorAbruptCompletion","_didIteratorError","_step","_iterator","iterable","method","async","sync","retry","Symbol","asyncIterator","iterator","_asyncIterator","getChildrenIteratorFor","selectedChange","highlightedChange","registerLayoutDesignerComponent","onOptionsSet","isHorizontalDrop","viewQuery","dndCoreDesigner","$event","_r1","_r2","tmp_8_0","dependencies","DesignerDropzoneSADirective","isDropZone","draggingChange","processDragValue","setTimeout","dragging","LayoutDndCoreModule","DndBusService","dropDataChangeSubject","dropPlaceholderPreview","newDropPlaceholderPreviewSubject","oldDropPlaceholderPreviewSubject","asObservable","token","factory"],"sourceRoot":""}
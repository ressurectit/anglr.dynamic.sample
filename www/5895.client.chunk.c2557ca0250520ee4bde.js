/*! For license information please see 5895.client.chunk.c2557ca0250520ee4bde.js.LICENSE.txt */
"use strict";(self.webpackChunkng_universal_demo=self.webpackChunkng_universal_demo||[]).push([[5895],{95895:(t,e,n)=>{n.r(e),n.d(e,{RestRelationsEditorMetadata:()=>pt});var o=n(12405),i=n(8423),a=n(12125),r=n(32123),s=n(74957),c=n(69445),l=n(74062),u=n(13816),d=n(89033),m=n(47826),p=n(65540),f=n(73512),h=n(14958),g=n(19598),v=n(55163);class _{constructor(t){this.type="PATH",this.configurable=!1,this.name=null,u.Rl.bind(this)(t)}}var C=n(12890),y=n(50478),T=n(37654),b=n(13341),w=n(18968),x=n(94128),P=n(83210),q=n(27805),Z=n(5419),E=n(28588),Y=n(81473),S=n(97503),U=n(77549),Q=n(57684),R=n(86039),D=n(33250),N=n(58433),O=n(49308),k=n(48215),H=n(78525);function L(t,e,n,o,i,a,r){try{var s=t[a](r),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(o,i)}function $(t,e){1&t&&(C.Tg(0,"option",16),y._(1,"BODY"),C.qZ())}class z{constructor(t,e,n){this.data=t,this.dialog=e,this.form=n.build(new _(t.parameter)),this.form.valueChanges.subscribe((e=>(0,u.l7)(t.parameter,e)))}showCodeEditor(){var t,e=this;return(t=function*(){const t=(0,v.EN)(e.data.parameter.value)?JSON.stringify(e.data.parameter.value,null,4):"",n=yield(0,d.n)(e.dialog.open(f.I,{title:"Code editor",width:"75vw",height:"75vh",data:{content:t,languageModel:h.H}}).afterClosed());(0,v.EN)(n)&&(e.data.parameter.value=(0,g.LK)(n.content))},function(){var e=this,n=arguments;return new Promise((function(o,i){var a=t.apply(e,n);function r(t){L(a,o,i,r,s,"next",t)}function s(t){L(a,o,i,r,s,"throw",t)}r(void 0)}))})()}}z.ɵfac=function(t){return new(t||z)(T.Y(p.m),T.Y(Y.J),T.Y(l.p))},z.ɵcmp=b.Xp({type:z,selectors:[["configure-rest-parameter"]],standalone:!0,features:[w._([l.p]),x.j],decls:33,vars:4,consts:[[3,"formGroup"],[1,"dynamic-form-group","dynamic-margin-bottom-extra-small"],[1,"dynamic-control-label","dynamic-text-uppercase"],["formControlName","type",1,"dynamic-form-control"],["value","BODY",4,"ngIf"],["value","PATH"],["value","QUERY"],["value","QUERY OBJECT"],["value","HEADER"],["type","text","formControlName","name",1,"dynamic-form-control"],[1,"dynamic-flex-column","dynamic-margin-bottom-extra-small"],["type","button",1,"dynamic-btn","dynamic-btn-primary","dynamic-align-self-center",3,"click"],["type","checkbox","formControlName","configurable",1,"dynamic-form-control"],[1,"dynamic-flex-row","dynamic-flex-end"],["type","button",1,"dynamic-btn","dynamic-btn-info","dynamic-margin-right-extra-small",3,"mat-dialog-close"],["type","button",1,"dynamic-btn","dynamic-btn-primary",3,"mat-dialog-close"],["value","BODY"]],template:function(t,e){1&t&&(C.Tg(0,"div",0)(1,"div",1)(2,"label",2),y._(3,"type"),C.qZ(),C.Tg(4,"select",3),P.Y(5,$,2,0,"option",4),C.Tg(6,"option",5),y._(7,"PATH"),C.qZ(),C.Tg(8,"option",6),y._(9,"QUERY"),C.qZ(),C.Tg(10,"option",7),y._(11,"QUERY OBJECT"),C.qZ(),C.Tg(12,"option",8),y._(13,"HEADER"),C.qZ()()(),C.Tg(14,"div",1)(15,"label",2),y._(16,"name"),C.qZ(),C._U(17,"input",9),C.qZ(),C.Tg(18,"div",10)(19,"button",11),q.N("click",(function(){return e.showCodeEditor()})),C.Tg(20,"span"),y._(21,"value"),C.qZ()()(),C.Tg(22,"div",1)(23,"label",2),y._(24,"configurable"),C.qZ(),C._U(25,"input",12),C.qZ()(),C.Tg(26,"div",13)(27,"button",14)(28,"span"),y._(29,"cancel"),C.qZ()(),C.Tg(30,"button",15)(31,"span"),y._(32,"ok"),C.qZ()()()),2&t&&(Z.Q("formGroup",e.form),E.x(5),Z.Q("ngIf",!e.data.hasBody),E.x(22),Z.Q("mat-dialog-close",null),E.x(3),Z.Q("mat-dialog-close",!0))},dependencies:[o.e,S.O,i.U,U.YN,Q.Kr,R.Fj,D.W,U.EJ,N.JJ,N.JL,O.s,k.u,m.I,H.ZT],encapsulation:2,changeDetection:0});class I{constructor(t){this.url="",this.method="GET",this.runImmediately=!0,u.Rl.bind(this)(t)}}var J=n(52455),B=n(38256),K=n(63289),A=n(4149),G=n(46410),j=n(66382),M=n(47948),V=n(52900),F=n(15704),W=n(77078);function X(t,e,n,o,i,a,r){try{var s=t[a](r),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(o,i)}function tt(t){return function(){var e=this,n=arguments;return new Promise((function(o,i){var a=t.apply(e,n);function r(t){X(a,o,i,r,s,"next",t)}function s(t){X(a,o,i,r,s,"throw",t)}r(void 0)}))}}function et(t,e){if(1&t&&C._U(0,"relation-node-input",29),2&t){const t=J.o(2).$implicit,e=J.o();Z.Q("parentCoordiantes",e.nodePosition)("zoomLevel",e.zoomLevel)("name",t.name)("parent",e)}}function nt(t,e){if(1&t){const t=B.E();C.Tg(0,"div",23),P.Y(1,et,1,4,"relation-node-input",24),C.Tg(2,"div",25)(3,"div"),y._(4),C.qZ(),C.Tg(5,"button",26),q.N("click",(function(e){K.CH(t);const n=J.o().$implicit,o=J.o();return e.preventDefault(),e.stopPropagation(),K.Kt(o.configureRestParameter(n))})),C._U(6,"span",27),C.qZ(),C.Tg(7,"button",15),q.N("click",(function(e){K.CH(t);const n=J.o().$implicit,o=J.o();return e.preventDefault(),e.stopPropagation(),K.Kt(o.removeParam(n))})),C._U(8,"span",28),C.qZ()()()}if(2&t){const t=J.o().$implicit;E.x(1),Z.Q("ngIf",t.configurable),E.x(3),A.hi("BODY: ",t.name,"")}}function ot(t,e){if(1&t&&C._U(0,"relation-node-input",29),2&t){const t=J.o(2).$implicit,e=J.o();Z.Q("parentCoordiantes",e.nodePosition)("zoomLevel",e.zoomLevel)("name",t.name)("parent",e)}}function it(t,e){if(1&t){const t=B.E();C.Tg(0,"div",23),P.Y(1,ot,1,4,"relation-node-input",24),C.Tg(2,"div",25)(3,"div"),y._(4),C.qZ(),C.Tg(5,"button",26),q.N("click",(function(){K.CH(t);const e=J.o().$implicit,n=J.o();return K.Kt(n.configureRestParameter(e))})),C._U(6,"span",27),C.qZ(),C.Tg(7,"button",15),q.N("click",(function(e){K.CH(t);const n=J.o().$implicit,o=J.o();return e.preventDefault(),e.stopPropagation(),K.Kt(o.removeParam(n))})),C._U(8,"span",28),C.qZ()()()}if(2&t){const t=J.o().$implicit;E.x(1),Z.Q("ngIf",t.configurable),E.x(3),A.hi("PATH: ",t.name,"")}}function at(t,e){if(1&t&&C._U(0,"relation-node-input",29),2&t){const t=J.o(2).$implicit,e=J.o();Z.Q("parentCoordiantes",e.nodePosition)("zoomLevel",e.zoomLevel)("name",t.name)("parent",e)}}function rt(t,e){if(1&t){const t=B.E();C.Tg(0,"div",23),P.Y(1,at,1,4,"relation-node-input",24),C.Tg(2,"div",25)(3,"div"),y._(4),C.qZ(),C.Tg(5,"button",26),q.N("click",(function(){K.CH(t);const e=J.o().$implicit,n=J.o();return K.Kt(n.configureRestParameter(e))})),C._U(6,"span",27),C.qZ(),C.Tg(7,"button",15),q.N("click",(function(e){K.CH(t);const n=J.o().$implicit,o=J.o();return e.preventDefault(),e.stopPropagation(),K.Kt(o.removeParam(n))})),C._U(8,"span",28),C.qZ()()()}if(2&t){const t=J.o().$implicit;E.x(1),Z.Q("ngIf",t.configurable),E.x(3),A.hi("QUERY: ",t.name,"")}}function st(t,e){if(1&t&&C._U(0,"relation-node-input",29),2&t){const t=J.o(2).$implicit,e=J.o();Z.Q("parentCoordiantes",e.nodePosition)("zoomLevel",e.zoomLevel)("name",t.name)("parent",e)}}function ct(t,e){if(1&t){const t=B.E();C.Tg(0,"div",23),P.Y(1,st,1,4,"relation-node-input",24),C.Tg(2,"div",25)(3,"div"),y._(4),C.qZ(),C.Tg(5,"button",26),q.N("click",(function(){K.CH(t);const e=J.o().$implicit,n=J.o();return K.Kt(n.configureRestParameter(e))})),C._U(6,"span",27),C.qZ(),C.Tg(7,"button",15),q.N("click",(function(e){K.CH(t);const n=J.o().$implicit,o=J.o();return e.preventDefault(),e.stopPropagation(),K.Kt(o.removeParam(n))})),C._U(8,"span",28),C.qZ()()()}if(2&t){const t=J.o().$implicit;E.x(1),Z.Q("ngIf",t.configurable),E.x(3),A.hi("QUERY OBJECT: ",t.name,"")}}function lt(t,e){if(1&t&&C._U(0,"relation-node-input",29),2&t){const t=J.o(2).$implicit,e=J.o();Z.Q("parentCoordiantes",e.nodePosition)("zoomLevel",e.zoomLevel)("name",t.name)("parent",e)}}function ut(t,e){if(1&t){const t=B.E();C.Tg(0,"div",23),P.Y(1,lt,1,4,"relation-node-input",24),C.Tg(2,"div",25)(3,"div"),y._(4),C.qZ(),C.Tg(5,"button",26),q.N("click",(function(){K.CH(t);const e=J.o().$implicit,n=J.o();return K.Kt(n.configureRestParameter(e))})),C._U(6,"span",27),C.qZ(),C.Tg(7,"button",15),q.N("click",(function(e){K.CH(t);const n=J.o().$implicit,o=J.o();return e.preventDefault(),e.stopPropagation(),K.Kt(o.removeParam(n))})),C._U(8,"span",28),C.qZ()()()}if(2&t){const t=J.o().$implicit;E.x(1),Z.Q("ngIf",t.configurable),E.x(3),A.hi("HEADER: ",t.name,"")}}function dt(t,e){if(1&t&&(G.yn(0)(1,21),P.Y(2,nt,9,2,"div",22),P.Y(3,it,9,2,"div",22),P.Y(4,rt,9,2,"div",22),P.Y(5,ct,9,2,"div",22),P.Y(6,ut,9,2,"div",22),G.BQ()()),2&t){const t=e.$implicit;E.x(1),Z.Q("ngSwitch",t.type),E.x(1),Z.Q("ngSwitchCase","BODY"),E.x(1),Z.Q("ngSwitchCase","PATH"),E.x(1),Z.Q("ngSwitchCase","QUERY"),E.x(1),Z.Q("ngSwitchCase","QUERY OBJECT"),E.x(1),Z.Q("ngSwitchCase","HEADER")}}class mt extends a.M{constructor(t,e,n,o){super(t,e),this.dialog=n,this.form=o.build(new I(null)),this.form.valueChanges.subscribe((t=>{this.metadata?.relationsOptions&&((0,u.l7)(this.metadata.relationsOptions,t),this.history.getNewState())}))}get params(){var t,e;return this.metadata?((t=this.metadata).relationsOptions??(t.relationsOptions={params:[],url:null,method:null,runImmediately:!0}),(e=this.metadata.relationsOptions).params??(e.params=[])):[]}addParam(){var t=this;return tt((function*(){const e={configurable:!1,name:null,type:"PATH",value:null};(yield t.configureRestParameter(e))&&(t.params.push(e),t.history.getNewState())}))()}removeParam(t){const e=this.params.indexOf(t);e>=0&&(this.params.splice(e,1),this.history.getNewState())}configureRestParameter(t){var e=this;return tt((function*(){const n=JSON.parse(JSON.stringify(t)),o=yield(0,d.n)(e.dialog.open(z,{title:"configure rest parameter",width:"60vw",data:{parameter:t,hasBody:"BODY"!==t.type&&!!e.params.find((t=>"BODY"===t.type))}}).afterClosed());return o?e.history.getNewState():(0,u.l7)(t,n),o??!1}))()}metadataSet(){this.metadata?.relationsOptions&&this.form.patchValue(this.metadata.relationsOptions)}}mt.ɵfac=function(t){return new(t||mt)(T.Y(j.s),T.Y(M.SB),T.Y(Y.J),T.Y(l.p))},mt.ɵcmp=b.Xp({type:mt,selectors:[["rest-node"]],standalone:!0,features:[w._([l.p]),V.q,x.j],decls:38,vars:10,consts:[["name","rest",3,"parent","destroySubject"],[1,"node-content",3,"formGroup"],[1,"dynamic-form-group","dynamic-margin-bottom-extra-small"],[1,"dynamic-control-label","dynamic-text-uppercase"],["type","text","formControlName","url",1,"dynamic-form-control"],["formControlName","method",1,"dynamic-form-control"],["value","GET"],["value","POST"],["value","PUT"],["value","PATCH"],["value","DELETE"],["type","checkbox","formControlName","runImmediately",1,"dynamic-form-control"],[1,"inputs-outputs"],[1,"inputs"],[4,"ngFor","ngForOf"],["type","button",1,"dynamic-btn-icon",3,"click"],[1,"fas","fa-plus"],[1,"outputs"],[1,"output"],["name","success",3,"parentCoordiantes","zoomLevel","parent"],["name","error",3,"parentCoordiantes","zoomLevel","parent"],[3,"ngSwitch"],["class","input",4,"ngSwitchCase"],[1,"input"],[3,"parentCoordiantes","zoomLevel","name","parent",4,"ngIf"],[1,"dynamic-flex-row"],["type","button",1,"dynamic-btn-icon","dynamic-margin-horizontal-extra-small",3,"click"],[1,"fas","fa-cog"],[1,"fas","fa-times"],[3,"parentCoordiantes","zoomLevel","name","parent"]],template:function(t,e){1&t&&(C._U(0,"relations-node-header",0),C.Tg(1,"div",1)(2,"div",2)(3,"label",3),y._(4,"url"),C.qZ(),C._U(5,"input",4),C.qZ(),C.Tg(6,"div",2)(7,"label",3),y._(8,"method"),C.qZ(),C.Tg(9,"select",5)(10,"option",6),y._(11,"GET"),C.qZ(),C.Tg(12,"option",7),y._(13,"POST"),C.qZ(),C.Tg(14,"option",8),y._(15,"PUT"),C.qZ(),C.Tg(16,"option",9),y._(17,"PATCH"),C.qZ(),C.Tg(18,"option",10),y._(19,"DELETE"),C.qZ()()(),C.Tg(20,"div",2)(21,"label",3),y._(22,"run immediately"),C.qZ(),C._U(23,"input",11),C.qZ(),C.Tg(24,"div",12)(25,"div",13),P.Y(26,dt,7,6,"ng-container",14),C.Tg(27,"button",15),q.N("click",(function(t){return t.preventDefault(),t.stopPropagation(),e.addParam()})),C._U(28,"span",16),C.qZ()(),C.Tg(29,"div",17)(30,"div",18)(31,"div"),y._(32,"success"),C.qZ(),C._U(33,"relation-node-output",19),C.qZ(),C.Tg(34,"div",18)(35,"div"),y._(36,"error"),C.qZ(),C._U(37,"relation-node-output",20),C.qZ()()()()),2&t&&(Z.Q("parent",e)("destroySubject",e.destroySubject),E.x(1),Z.Q("formGroup",e.form),E.x(25),Z.Q("ngForOf",e.params),E.x(7),Z.Q("parentCoordiantes",e.nodePosition)("zoomLevel",e.zoomLevel)("parent",e),E.x(4),Z.Q("parentCoordiantes",e.nodePosition)("zoomLevel",e.zoomLevel)("parent",e))},dependencies:[o.e,F.sg,S.O,W.RF,W.n9,i.U,U.YN,Q.Kr,R.Fj,D.W,U.EJ,N.JJ,N.JL,O.s,k.u,r.e,s.P,c.n],encapsulation:2,changeDetection:0});class pt{constructor(){this.metaInfo={name:"Rest",description:"Restfull requests",group:"Http"},this.nodeDefinition=mt,Object.freeze(this)}}},77078:(t,e,n)=>{n.d(e,{ED:()=>u,RF:()=>c,n9:()=>l});var o=n(13341),i=n(37654),a=n(432),r=n(90407);class s{constructor(t,e){this._viewContainerRef=t,this._templateRef=e,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(t){t&&!this._created?this.create():!t&&this._created&&this.destroy()}}class c{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(t)}_matchCase(t){const e=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||e,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),e}_updateDefaultCases(t){if(this._defaultViews&&t!==this._defaultUsed){this._defaultUsed=t;for(let e=0;e<this._defaultViews.length;e++)this._defaultViews[e].enforceState(t)}}}c.ɵfac=function(t){return new(t||c)},c.ɵdir=o.lG({type:c,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0});class l{constructor(t,e,n){this.ngSwitch=n,n._addCase(),this._view=new s(t,e)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}l.ɵfac=function(t){return new(t||l)(i.Y(a.s_),i.Y(r.Rg),i.Y(c,9))},l.ɵdir=o.lG({type:l,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0});class u{constructor(t,e,n){n._addDefault(new s(t,e))}}u.ɵfac=function(t){return new(t||u)(i.Y(a.s_),i.Y(r.Rg),i.Y(c,9))},u.ɵdir=o.lG({type:u,selectors:[["","ngSwitchDefault",""]],standalone:!0})}}]);
//# sourceMappingURL=5895.client.chunk.c2557ca0250520ee4bde.js.map
{"version":3,"file":"7469.client.chunk.455f56dd4c6b81ce51db.js","mappings":"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","sources":["webpack://ng-universal-demo/../../../src/decorators/bindThis.decorator.ts","webpack://ng-universal-demo/../../../src/modules/position/modules/position.module.ts","webpack://ng-universal-demo/./node_modules/@anglr/dynamic/es2020/layout-editor/src/directives/designerMinDimension/designerMinDimension.directive.js","webpack://ng-universal-demo/./node_modules/@anglr/dynamic/es2020/layout-editor/src/directives/copyDesignerStyles/copyDesignerStyles.directive.js","webpack://ng-universal-demo/./node_modules/@anglr/dynamic/es2020/layout-editor/src/directives/bodyRender/bodyRender.directive.js","webpack://ng-universal-demo/./node_modules/@anglr/dynamic/es2020/layout-editor/src/components/layoutDesignerOverlayFor/layoutDesignerOverlayFor.component.js","webpack://ng-universal-demo/../../../src/modules/position/directives/positionTo/positionTo.directive.ts","webpack://ng-universal-demo/./node_modules/@anglr/dynamic/es2020/layout-editor/src/modules/layoutDndCore/directives/dndCoreDesigner/dndCoreDesigner.directive.js","webpack://ng-universal-demo/./node_modules/@anglr/dynamic/es2020/layout-editor/src/components/layoutDesigner/layoutDesigner.component.js","webpack://ng-universal-demo/./node_modules/@anglr/dynamic/es2020/layout-editor/src/directives/designerDropzone/designerDropzone.directive.js","webpack://ng-universal-demo/./node_modules/@anglr/dynamic/es2020/layout-editor/src/modules/layoutDndCore/modules/layoutDndCore.module.js","webpack://ng-universal-demo/./node_modules/@anglr/dynamic/es2020/layout-editor/src/modules/layoutDndCore/services/dndBus/dndBus.service.js"],"sourcesContent":["import {Func} from '../types/functions';\r\nimport {isFunction} from '../utils/lang';\r\n\r\n/**\r\n * Binds function to this, object instance where is defined, it is importat to place it in correct order with other decorators, usually should be first\r\n */\r\nexport function BindThis(_target: Object, propertyKey: string|symbol, descriptor: PropertyDescriptor): TypedPropertyDescriptor<Func<any, any>>\r\n{\r\n    const originalValue: Func = descriptor.value ?? descriptor.get?.();\r\n\r\n    if(!isFunction(originalValue))\r\n    {\r\n        throw new Error(`Unable to apply @BindThis decorator to '${propertyKey.toString()}', it is not a method.`);\r\n    }\r\n\r\n    return {\r\n        configurable: true,\r\n        get(this: unknown): Func\r\n        {\r\n            const bound: Func = originalValue.bind(this);\r\n\r\n            Object.defineProperty(this,\r\n                                  propertyKey,\r\n                                  {\r\n                                      value: bound,\r\n                                      configurable: true,\r\n                                      writable: true\r\n                                  });\r\n\r\n            return bound;\r\n        }\r\n    };\r\n}","import {NgModule} from '@angular/core';\n\nimport {PositionToDirective} from '../directives/positionTo/positionTo.directive';\n\n/**\n * Module for position to directive\n */\n@NgModule(\n{\n    imports:\n    [\n    ],\n    declarations:\n    [\n        PositionToDirective\n    ],\n    exports:\n    [\n        PositionToDirective\n    ]\n})\nexport class PositionModule\n{\n}\n","import { ContentChild, Directive, Input } from '@angular/core';\nimport { LayoutComponentRendererSADirective } from '@anglr/dynamic/layout';\nimport { nameof } from '@jscrpt/common';\nimport { Subscription } from 'rxjs';\nimport * as i0 from \"@angular/core\";\n/**\n * Applies min dimensions to designed element, so it can be visible event when it is empty\n */\n\nexport class DesignerMinDimensionSADirective {\n  constructor() {\n    /**\n     * Indication whether is min dimensions active\n     */\n    this.active = false;\n    /**\n     * Subscriptions created during initialization\n     */\n\n    this.initSubscriptions = new Subscription();\n    /**\n     * Minimal height of element\n     */\n\n    this.minHeight = '';\n    /**\n     * Minimal width of element\n     */\n\n    this.minWidth = ''; //######################### public properties - inputs #########################\n\n    /**\n     * Indication whether is flow of this component horizontal or vertical\n     */\n\n    this.horizontal = false;\n    /**\n     * Indication whether can drop children inside of this\n     */\n\n    this.canDrop = false;\n    /**\n     * Layout editor metadata\n     */\n\n    this.editorMetadata = null;\n  } //######################### public methods - implementation of OnInit #########################\n\n  /**\n   * Initialize component\n   */\n\n\n  ngOnInit() {\n    this.observer = new MutationObserver(changes => {\n      for (const change of changes) {\n        if (change.target instanceof HTMLElement) {\n          this.updatedDimensions(change.target);\n        }\n      }\n    });\n    this.initSubscriptions.add(this.layoutComponentRendererDirective?.componentElementChange.subscribe(element => {\n      if (!element) {\n        this.observer?.disconnect();\n        return;\n      }\n\n      this.element = element;\n      this.init();\n    }));\n  } //######################### public methods - implementation of OnChanges #########################\n\n  /**\n   * Called when input value changes\n   */\n\n\n  ngOnChanges(changes) {\n    if (nameof('editorMetadata') in changes) {\n      this.init();\n    }\n  } //######################### public methods - implementation of OnDestroy #########################\n\n  /**\n   * Called when component is destroyed\n   */\n\n\n  ngOnDestroy() {\n    this.observer?.disconnect();\n    this.initSubscriptions.unsubscribe();\n  } //######################### protected methods #########################\n\n  /**\n   * Initialize watching for children\n   */\n\n\n  init() {\n    if (!this.element || !this.editorMetadata) {\n      return;\n    }\n\n    const element = this.editorMetadata.getChildrenContainer?.(this.element) ?? this.element;\n    this.minHeight = element.style.minHeight;\n    this.minWidth = element.style.minWidth;\n    this.updatedDimensions(element);\n    this.observer?.observe(element, {\n      childList: true\n    });\n  }\n  /**\n   * Updates min dimensions if empty\n   * @param element - Element to be checked for changes\n   */\n\n\n  updatedDimensions(element) {\n    const nodesArray = [];\n    element.childNodes.forEach(node => nodesArray.push(node));\n    const contentsLength = nodesArray.filter(itm => itm.nodeName != '#comment').length;\n\n    if (contentsLength && !this.active || !contentsLength && this.active) {\n      return;\n    } //deactivate, children are present\n\n\n    if (contentsLength) {\n      //only placeholder is present\n      if (element.children.length === 1 && element.children.item(0)?.classList.contains('drag-placeholder')) {\n        return;\n      }\n\n      this.active = false;\n\n      if (this.horizontal) {\n        element.style.minWidth = this.minWidth;\n      } else {\n        element.style.minHeight = this.minHeight;\n      }\n    } //activate, children are not present\n    else {\n      this.active = true;\n\n      if (this.horizontal) {\n        element.style.minWidth = this.canDrop ? '30px' : '10px';\n      } else {\n        element.style.minHeight = this.canDrop ? '30px' : '10px';\n      }\n    }\n  }\n\n}\n\nDesignerMinDimensionSADirective.ɵfac = function DesignerMinDimensionSADirective_Factory(t) {\n  return new (t || DesignerMinDimensionSADirective)();\n};\n\nDesignerMinDimensionSADirective.ɵdir = /* @__PURE__ */i0.ɵɵdefineDirective({\n  type: DesignerMinDimensionSADirective,\n  selectors: [[\"\", \"designerMinWidth\", \"\"]],\n  contentQueries: function DesignerMinDimensionSADirective_ContentQueries(rf, ctx, dirIndex) {\n    if (rf & 1) {\n      i0.ɵɵcontentQuery(dirIndex, LayoutComponentRendererSADirective, 7);\n    }\n\n    if (rf & 2) {\n      let _t;\n\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.layoutComponentRendererDirective = _t.first);\n    }\n  },\n  inputs: {\n    horizontal: \"horizontal\",\n    canDrop: \"canDrop\",\n    editorMetadata: \"editorMetadata\"\n  },\n  standalone: true,\n  features: [i0.ɵɵNgOnChangesFeature]\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(DesignerMinDimensionSADirective, [{\n    type: Directive,\n    args: [{\n      selector: '[designerMinWidth]',\n      standalone: true\n    }]\n  }], null, {\n    layoutComponentRendererDirective: [{\n      type: ContentChild,\n      args: [LayoutComponentRendererSADirective, {\n        static: true\n      }]\n    }],\n    horizontal: [{\n      type: Input\n    }],\n    canDrop: [{\n      type: Input\n    }],\n    editorMetadata: [{\n      type: Input\n    }]\n  });\n})();","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nimport { Directive, ElementRef, Input } from '@angular/core';\nimport { LayoutEditorMetadataExtractor } from '../../services';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services\"; //TODO: remove, do it more generic\n\n/**\n * Copies designer styles that should be applied to element\n */\n\nexport class CopyDesignerStylesSADirective {\n  //######################### constructor #########################\n  constructor(_element, _metadataExtractor) {\n    this._element = _element;\n    this._metadataExtractor = _metadataExtractor;\n  } //######################### public properties - inputs #########################\n\n  /**\n   * Designed component metadata\n   */\n\n\n  get metadata() {\n    return this._metadata;\n  }\n\n  set metadata(value) {\n    this._metadata = value;\n\n    this._copyDesignerStyles();\n  } //######################### protected methods #########################\n\n  /**\n   * Copies designer styles if necessary\n   */\n\n\n  _copyDesignerStyles() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      if (!_this._metadata) {\n        return;\n      }\n\n      const metadata = yield _this._metadataExtractor.extractMetadata(_this._metadata);\n      const applyDesignerStyles = metadata?.applyDesignerStyles;\n\n      if (applyDesignerStyles) {\n        applyDesignerStyles(_this._metadata.options, _this._element.nativeElement.style);\n      }\n    })();\n  }\n\n}\n\nCopyDesignerStylesSADirective.ɵfac = function CopyDesignerStylesSADirective_Factory(t) {\n  return new (t || CopyDesignerStylesSADirective)(i0.ɵɵdirectiveInject(i0.ElementRef), i0.ɵɵdirectiveInject(i1.LayoutEditorMetadataExtractor));\n};\n\nCopyDesignerStylesSADirective.ɵdir = /* @__PURE__ */i0.ɵɵdefineDirective({\n  type: CopyDesignerStylesSADirective,\n  selectors: [[\"\", \"copyDesignerStyles\", \"\"]],\n  inputs: {\n    metadata: [\"copyDesignerStyles\", \"metadata\"]\n  },\n  exportAs: [\"copyDesignerStyles\"],\n  standalone: true\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(CopyDesignerStylesSADirective, [{\n    type: Directive,\n    args: [{\n      selector: '[copyDesignerStyles]',\n      exportAs: 'copyDesignerStyles',\n      standalone: true\n    }]\n  }], function () {\n    return [{\n      type: i0.ElementRef\n    }, {\n      type: i1.LayoutEditorMetadataExtractor\n    }];\n  }, {\n    metadata: [{\n      type: Input,\n      args: ['copyDesignerStyles']\n    }]\n  });\n})();","import { Directive, Inject, TemplateRef, ViewContainerRef } from '@angular/core';\nimport { DOCUMENT } from '@angular/common';\nimport * as i0 from \"@angular/core\";\n/**\n * Renders element into body directly at the end\n */\n\nexport class BodyRenderSADirective {\n  //######################### constructor #########################\n  constructor(template, viewContainer, document) {\n    this.template = template;\n    this.viewContainer = viewContainer;\n    this.document = document;\n  } //######################### public methods - implementation of OnInit #########################\n\n  /**\n   * Initialize component\n   */\n\n\n  ngOnInit() {\n    this.view = this.viewContainer.createEmbeddedView(this.template);\n    this.element = this.view.rootNodes[0];\n    this.document.body.appendChild(this.element);\n  } //######################### public methods - implementation of OnDestroy #########################\n\n  /**\n   * Called when component is destroyed\n   */\n\n\n  ngOnDestroy() {\n    this.element?.remove();\n    this.element = null;\n    this.view?.destroy();\n    this.view = null;\n  }\n\n}\n\nBodyRenderSADirective.ɵfac = function BodyRenderSADirective_Factory(t) {\n  return new (t || BodyRenderSADirective)(i0.ɵɵdirectiveInject(i0.TemplateRef), i0.ɵɵdirectiveInject(i0.ViewContainerRef), i0.ɵɵdirectiveInject(DOCUMENT));\n};\n\nBodyRenderSADirective.ɵdir = /* @__PURE__ */i0.ɵɵdefineDirective({\n  type: BodyRenderSADirective,\n  selectors: [[\"\", \"bodyRender\", \"\"]],\n  standalone: true\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(BodyRenderSADirective, [{\n    type: Directive,\n    args: [{\n      selector: '[bodyRender]',\n      standalone: true\n    }]\n  }], function () {\n    return [{\n      type: i0.TemplateRef\n    }, {\n      type: i0.ViewContainerRef\n    }, {\n      type: Document,\n      decorators: [{\n        type: Inject,\n        args: [DOCUMENT]\n      }]\n    }];\n  }, null);\n})();","import { Component, ChangeDetectionStrategy, ElementRef, Input, ChangeDetectorRef } from '@angular/core';\nimport { LayoutComponentRendererSADirective } from '@anglr/dynamic/layout';\nimport * as i0 from \"@angular/core\";\n/**\n * Component displaying layout designer layout overlay\n */\n\nconst _c0 = [\"layoutDesignerOverlayFor\", \"\"];\nexport class LayoutDesignerOverlayForSAComponent {\n  //######################### constructor #########################\n  constructor(_element, _changeDetector) {\n    this._element = _element;\n    this._changeDetector = _changeDetector;\n  } //######################### public methods - implementation of OnInit #########################\n\n  /**\n   * Initialize component\n   */\n\n\n  ngOnInit() {\n    this._observer = new MutationObserver(() => this._changeDetector.detectChanges()); //TODO: make this working\n\n    this._htmlElement = this.layoutComponentRendererDirective?.componentRef?.hostView?.rootNodes?.[0];\n\n    if (this._htmlElement) {\n      this._observer?.observe(this._htmlElement, {\n        attributeFilter: ['style']\n      });\n    }\n  } //######################### public methods - implementation of OnDestroy #########################\n\n  /**\n   * Called when component is destroyed\n   */\n\n\n  ngOnDestroy() {\n    this._observer?.disconnect();\n  }\n\n}\n\nLayoutDesignerOverlayForSAComponent.ɵfac = function LayoutDesignerOverlayForSAComponent_Factory(t) {\n  return new (t || LayoutDesignerOverlayForSAComponent)(i0.ɵɵdirectiveInject(i0.ElementRef), i0.ɵɵdirectiveInject(i0.ChangeDetectorRef));\n};\n\nLayoutDesignerOverlayForSAComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n  type: LayoutDesignerOverlayForSAComponent,\n  selectors: [[\"\", \"layoutDesignerOverlayFor\", \"\"]],\n  inputs: {\n    layoutComponentRendererDirective: [\"layoutDesignerOverlayFor\", \"layoutComponentRendererDirective\"]\n  },\n  standalone: true,\n  features: [i0.ɵɵStandaloneFeature],\n  attrs: _c0,\n  decls: 12,\n  vars: 24,\n  consts: [[1, \"margin-top-div\"], [1, \"margin-bottom-div\"], [1, \"margin-left-div\"], [1, \"margin-right-div\"], [1, \"padding-top-div\"], [1, \"padding-bottom-div\"], [1, \"padding-left-div\"], [1, \"padding-right-div\"], [1, \"border-top-div\"], [1, \"border-bottom-div\"], [1, \"border-left-div\"], [1, \"border-right-div\"]],\n  template: function LayoutDesignerOverlayForSAComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelement(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3)(4, \"div\", 4)(5, \"div\", 5)(6, \"div\", 6)(7, \"div\", 7)(8, \"div\", 8)(9, \"div\", 9)(10, \"div\", 10)(11, \"div\", 11);\n    }\n\n    if (rf & 2) {\n      i0.ɵɵstyleProp(\"height\", ctx._htmlElement == null ? null : ctx._htmlElement.style == null ? null : ctx._htmlElement.style.marginTop);\n      i0.ɵɵadvance(1);\n      i0.ɵɵstyleProp(\"height\", ctx._htmlElement == null ? null : ctx._htmlElement.style == null ? null : ctx._htmlElement.style.marginBottom);\n      i0.ɵɵadvance(1);\n      i0.ɵɵstyleProp(\"width\", ctx._htmlElement == null ? null : ctx._htmlElement.style == null ? null : ctx._htmlElement.style.marginLeft);\n      i0.ɵɵadvance(1);\n      i0.ɵɵstyleProp(\"width\", ctx._htmlElement == null ? null : ctx._htmlElement.style == null ? null : ctx._htmlElement.style.marginRight);\n      i0.ɵɵadvance(1);\n      i0.ɵɵstyleProp(\"height\", ctx._htmlElement == null ? null : ctx._htmlElement.style == null ? null : ctx._htmlElement.style.paddingTop);\n      i0.ɵɵadvance(1);\n      i0.ɵɵstyleProp(\"height\", ctx._htmlElement == null ? null : ctx._htmlElement.style == null ? null : ctx._htmlElement.style.paddingBottom);\n      i0.ɵɵadvance(1);\n      i0.ɵɵstyleProp(\"width\", ctx._htmlElement == null ? null : ctx._htmlElement.style == null ? null : ctx._htmlElement.style.paddingLeft);\n      i0.ɵɵadvance(1);\n      i0.ɵɵstyleProp(\"width\", ctx._htmlElement == null ? null : ctx._htmlElement.style == null ? null : ctx._htmlElement.style.paddingRight);\n      i0.ɵɵadvance(1);\n      i0.ɵɵstyleProp(\"height\", ctx._htmlElement == null ? null : ctx._htmlElement.style == null ? null : ctx._htmlElement.style.borderTop);\n      i0.ɵɵadvance(1);\n      i0.ɵɵstyleProp(\"height\", ctx._htmlElement == null ? null : ctx._htmlElement.style == null ? null : ctx._htmlElement.style.borderBottom);\n      i0.ɵɵadvance(1);\n      i0.ɵɵstyleProp(\"width\", ctx._htmlElement == null ? null : ctx._htmlElement.style == null ? null : ctx._htmlElement.style.borderLeft);\n      i0.ɵɵadvance(1);\n      i0.ɵɵstyleProp(\"width\", ctx._htmlElement == null ? null : ctx._htmlElement.style == null ? null : ctx._htmlElement.style.borderRight);\n    }\n  },\n  encapsulation: 2,\n  changeDetection: 0\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(LayoutDesignerOverlayForSAComponent, [{\n    type: Component,\n    args: [{\n      selector: '[layoutDesignerOverlayFor]',\n      standalone: true,\n      changeDetection: ChangeDetectionStrategy.OnPush,\n      template: \"<div class=\\\"margin-top-div\\\" [style.height]=\\\"_htmlElement?.style?.marginTop\\\"></div>\\n<div class=\\\"margin-bottom-div\\\" [style.height]=\\\"_htmlElement?.style?.marginBottom\\\"></div>\\n<div class=\\\"margin-left-div\\\" [style.width]=\\\"_htmlElement?.style?.marginLeft\\\"></div>\\n<div class=\\\"margin-right-div\\\" [style.width]=\\\"_htmlElement?.style?.marginRight\\\"></div>\\n<div class=\\\"padding-top-div\\\" [style.height]=\\\"_htmlElement?.style?.paddingTop\\\"></div>\\n<div class=\\\"padding-bottom-div\\\" [style.height]=\\\"_htmlElement?.style?.paddingBottom\\\"></div>\\n<div class=\\\"padding-left-div\\\" [style.width]=\\\"_htmlElement?.style?.paddingLeft\\\"></div>\\n<div class=\\\"padding-right-div\\\" [style.width]=\\\"_htmlElement?.style?.paddingRight\\\"></div>\\n<div class=\\\"border-top-div\\\" [style.height]=\\\"_htmlElement?.style?.borderTop\\\"></div>\\n<div class=\\\"border-bottom-div\\\" [style.height]=\\\"_htmlElement?.style?.borderBottom\\\"></div>\\n<div class=\\\"border-left-div\\\" [style.width]=\\\"_htmlElement?.style?.borderLeft\\\"></div>\\n<div class=\\\"border-right-div\\\" [style.width]=\\\"_htmlElement?.style?.borderRight\\\"></div>\"\n    }]\n  }], function () {\n    return [{\n      type: i0.ElementRef\n    }, {\n      type: i0.ChangeDetectorRef\n    }];\n  }, {\n    layoutComponentRendererDirective: [{\n      type: Input,\n      args: ['layoutDesignerOverlayFor']\n    }]\n  });\n})();","import {Directive, Input, ElementRef, OnChanges, SimpleChanges, Inject, Output, EventEmitter} from '@angular/core';\nimport {nameof, isPresent, isString} from '@jscrpt/common';\n\nimport {applyPositionResult, Position, PositionPlacement, PositionOptions} from '../../../../services/position';\nimport {POSITION} from '../../../../types/tokens';\n\n/**\n * Sets position of attached element relative to provided element\n */\n@Directive(\n{\n    selector: '[positionTo]'\n})\nexport class PositionToDirective implements OnChanges\n{\n    //######################### protected fields #########################\n\n    /**\n     * Position placement value\n     */\n    protected _placement: PositionPlacement|null|undefined;\n\n    /**\n     * Html element which is used as source for positioning\n     */\n    protected _source!: HTMLElement;\n\n    //######################### public properties - inputs #########################\n\n    /**\n     * Gets or sets html element which is used as source for positioning\n     */\n    @Input('positionTo')\n    public get source(): HTMLElement\n    {\n        return this._source;\n    }\n    public set source(value: HTMLElement)\n    {\n        if(value instanceof ElementRef)\n        {\n            this._source = (value as ElementRef).nativeElement;\n\n            return;\n        }\n\n        this._source = value;\n    }\n\n    /**\n     * Gets or sets position placement value\n     */\n    @Input()\n    public get placement(): PositionPlacement|null|undefined\n    {\n        return this._placement;\n    }\n    public set placement(value: PositionPlacement|null|undefined)\n    {\n        if(isString(value))\n        {\n            this._placement = PositionPlacement[value as keyof typeof PositionPlacement];\n\n            return;\n        }\n\n        this._placement = value;\n    }\n\n    // //######################### public properties - outputs #########################\n\n    /**\n     * Occurs when flip occurs during positioning\n     */\n    @Output()\n    public flip: EventEmitter<void> = new EventEmitter<void>();\n\n    //######################### constructor #########################\n    constructor(protected _target: ElementRef<HTMLElement>,\n                @Inject(POSITION) protected _position: Position)\n    {\n    }\n\n    //######################### public methods - implementation of OnChanges #########################\n\n    /**\n     * Called when input value changes\n     */\n    public ngOnChanges(changes: SimpleChanges): void\n    {\n        if((nameof<PositionToDirective>('source') in changes ||\n            nameof<PositionToDirective>('placement') in changes) &&\n           isPresent(this.source))\n        {\n            this._applyPosition();\n        }\n    }\n\n    //######################### protected methods #########################\n\n    /**\n     * Applies position according to specified parameters to specified elements\n     */\n    protected async _applyPosition(): Promise<void>\n    {\n        const options: Partial<PositionOptions> =\n        {\n        };\n\n        if(this._placement)\n        {\n            options.placement = this._placement;\n        }\n\n        const result = await this._position.placeElement(this._target.nativeElement,\n                                                         this._source,\n                                                         options).toPromise();\n\n        applyPositionResult(result);\n\n        if(result.flip)\n        {\n            this.flip.next();\n        }\n    }\n\n    //######################### ng language server #########################\n    \n    /**\n     * Custom input type for `placement` input\n     */\n    public static ngAcceptInputType_placement: PositionPlacement|undefined|null|keyof typeof PositionPlacement;\n\n    //######################### ng language server #########################\n    \n    /**\n     * Custom input type for `positionTo` input\n     */\n    public static ngAcceptInputType_positionTo: HTMLElement|ElementRef<HTMLElement>;\n}\n","import { __decorate, __metadata } from \"tslib\";\nimport { ContentChild, Directive, ElementRef, EventEmitter, Inject, Injector, Input, NgZone, Output } from '@angular/core';\nimport { DOCUMENT } from '@angular/common';\nimport { LayoutComponentRendererSADirective } from '@anglr/dynamic/layout';\nimport { BindThis, isBlank, isPresent } from '@jscrpt/common';\nimport { DndService } from '@ng-dnd/core';\nimport { filter, Subscription } from 'rxjs';\nimport { DragActiveService, LayoutEditorMetadataManager } from '../../../../services';\nimport { DndBusService } from '../../services';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ng-dnd/core\";\nimport * as i2 from \"../../../../services\";\nimport * as i3 from \"../../services\"; // import {registerDropzoneOverlay} from '../../misc/utils';\n\n/**\n * Directive used for initializing and handling dnd core functionality for layout designer\n */\n\nexport class DndCoreDesignerDirective {\n  //######################### constructor #########################\n  constructor(dnd, designerElement, draggingSvc, manager, bus, zone, injector, document) {\n    this.dnd = dnd;\n    this.designerElement = designerElement;\n    this.draggingSvc = draggingSvc;\n    this.manager = manager;\n    this.bus = bus;\n    this.zone = zone;\n    this.injector = injector;\n    this.document = document;\n    /**\n     * Subscriptions created during initialization\n     */\n\n    this.initSubscriptions = new Subscription();\n    /**\n     * Drop zone target that handles drop of component\n     */\n\n    this.placeholderDrop = this.dnd.dropTarget(['COMPONENT', 'METADATA'], {\n      canDrop: () => true,\n      drop: monitor => {\n        const item = monitor.getItem();\n        let index = this.bus.dropPlaceholderPreviewIndex;\n\n        if (item && isPresent(item.dragData.index) && isPresent(index)) {\n          //same parent and higher index\n          if (index > item.dragData.index) {\n            index--;\n          }\n        }\n\n        return {\n          index,\n          id: this.metadata?.id\n        };\n      }\n    }, this.initSubscriptions);\n    /**\n     * Drop zone target that handles drop of component\n     */\n\n    this.containerDrop = this.dnd.dropTarget(['COMPONENT', 'METADATA'], {\n      canDrop: monitor => this.canDropAncestors()[0] && monitor.isOver({\n        shallow: true\n      }),\n      drop: monitor => {\n        const [index, id] = this.getFixedDropCoordinates(monitor, false);\n        return {\n          index,\n          id\n        };\n      },\n      hover: monitor => {\n        if (monitor.isOver({\n          shallow: true\n        })) {\n          const [index, parentId] = this.getDropCoordinates(monitor, false);\n\n          if (isBlank(index) || isBlank(parentId)) {\n            return;\n          }\n\n          this.bus.setDropPlaceholderPreview({\n            index,\n            parentId,\n            placeholder: {\n              height: 0,\n              width: 0\n            }\n          });\n        }\n      }\n    }, this.initSubscriptions); //######################### public properties #########################\n\n    /**\n     * Drag source used for dragging component\n     */\n\n    this.drag = this.dnd.dragSource('COMPONENT', {\n      beginDrag: () => {\n        this.draggingSvc.setDragging(true);\n        this.designerElement.nativeElement.classList.add('is-dragged');\n        return {\n          dragData: this.dragData\n        };\n      },\n      canDrag: () => !this.dragDisabled,\n      endDrag: monitor => {\n        //dropped outside of any dropzone\n        if (!monitor.didDrop()) {\n          this.designerElement.nativeElement.classList.remove('is-dragged');\n        } //dropped into drop zone\n        else {\n          const item = monitor.getItem();\n          const dropResult = monitor.getDropResult();\n\n          if (!item) {\n            return;\n          }\n\n          item.dragData.index = dropResult.index;\n          this.bus.setDropData({\n            data: item.dragData,\n            id: dropResult.id\n          });\n        }\n\n        this.bus.setDropPlaceholderPreview(null);\n        this.draggingSvc.setDragging(false);\n      }\n    }, this.initSubscriptions);\n    /**\n     * Drop zone target that handles drop of component\n     */\n\n    this.dropzone = this.dnd.dropTarget(['COMPONENT', 'METADATA'], {\n      canDrop: monitor => (this.canDrop || this.canDropAncestors()[0]) && monitor.isOver({\n        shallow: true\n      }),\n      drop: monitor => {\n        const [index, id] = this.getFixedDropCoordinates(monitor, this.canDrop);\n        return {\n          index,\n          id\n        };\n      },\n      hover: monitor => {\n        if (monitor.isOver({\n          shallow: true\n        }) && monitor.canDrop()) {\n          const [index, parentId] = this.getDropCoordinates(monitor, this.canDrop);\n\n          if (isBlank(index) || isBlank(parentId)) {\n            return;\n          }\n\n          this.bus.setDropPlaceholderPreview({\n            index,\n            parentId,\n            placeholder: {\n              height: 0,\n              width: 0\n            }\n          });\n        }\n      }\n    }, this.initSubscriptions);\n    /**\n     * Indication whether is drag disabled\n     */\n\n    this.dragDisabled = false; //######################### public properties - outputs #########################\n\n    /**\n     * Occurs when metadata are dropped here\n     */\n\n    this.dropMetadata = new EventEmitter();\n    this.connectDropToContainer();\n  } //######################### protected properties #########################\n\n  /**\n   * Current metadata for this component\n   */\n\n\n  get metadata() {\n    if (!this.dragData.metadata) {\n      throw new Error('DndCoreDesignerDirective: invalid drag data without metadata!');\n    }\n\n    return this.dragData.metadata;\n  }\n  /**\n   * Gets indication whether component can accept drop\n   */\n\n\n  get canDrop() {\n    return this.manager.getComponent(this.metadata.id)?.canDrop ?? false;\n  }\n  /**\n   * Gets indication whether component children flow is horizontal\n   */\n\n\n  get horizontal() {\n    return this.manager.getComponent(this.metadata.id)?.horizontal ?? false;\n  }\n  /**\n   * Gets element that represents container that contains children\n   */\n\n\n  get containerElement() {\n    if (!this.componentElement) {\n      return;\n    }\n\n    const component = this.manager.getComponent(this.metadata.id);\n\n    if (!component?.editorMetadata?.getChildrenContainer) {\n      return this.componentElement;\n    }\n\n    return component.editorMetadata.getChildrenContainer(this.componentElement) ?? this.componentElement;\n  } //######################### public methods - implementation of OnInit #########################\n\n  /**\n   * Initialize component\n   */\n\n\n  ngOnInit() {\n    if (!this.dropzoneElement) {\n      throw new Error('DndCoreDesignerDirective: missing dropzone element!');\n    }\n\n    if (!this.dragData) {\n      throw new Error('DndCoreDesignerDirective: missing drag data!');\n    }\n\n    this.initSubscriptions.add(this.layoutComponentRendererDirective?.componentElementChange.subscribe(element => {\n      if (!element) {\n        this.componentElement = null;\n        return;\n      }\n\n      this.componentElement = element;\n    }));\n    this.initSubscriptions.add(this.bus.dropDataChange.pipe(filter(itm => itm.id === this.metadata.id)).subscribe(itm => this.dropMetadata.emit(itm.data)));\n    this.initSubscriptions.add(this.bus.oldDropPlaceholderPreviewChange.pipe(filter(itm => itm.parentId === this.metadata.id)).subscribe(() => {\n      this.placeholderPreviewElement?.remove();\n      this.placeholderPreviewElement = null;\n    }));\n    this.initSubscriptions.add(this.bus.newDropPlaceholderPreviewChange.pipe(filter(itm => itm.parentId === this.metadata.id)).subscribe(this.showPlaceholderPreview)); // this.initSubscriptions.add(registerDropzoneOverlay(this.dropzone, this.dropzoneElement, this.injector, this.dragData));\n    // this.initSubscriptions.add(registerDropzoneOverlay(this.containerDrop, this.designerElement.nativeElement, this.injector, this.dragData));\n    // this.initSubscriptions.add(registerDropzoneOverlay(this.containerDrop, this.designerElement.nativeElement, this.injector, this.dragData));\n  } //######################### public methods - implementation of OnDestroy #########################\n\n  /**\n   * Called when component is destroyed\n   */\n\n\n  ngOnDestroy() {\n    this.initSubscriptions.unsubscribe();\n    this.placeholderConnection?.unsubscribe();\n    this.placeholderConnection = null;\n    this.containerConnection?.unsubscribe();\n    this.containerConnection = null;\n  } //######################### protected methods #########################\n\n  /**\n   * Gets drop coordinates\n   * @param monitor - Monitor containing information about current drag drop state\n   * @param canDrop - Indication whether can drop can occur on monitor itself\n   */\n\n\n  getDropCoordinates(monitor, canDrop) {\n    //can drop in itself// for now drop at index 0\n    if (canDrop) {\n      return this.getDropCoordinatesForChildren(monitor);\n    } //else get index from descendant\n\n\n    const [canDropAncestor, ancestorId, id] = this.canDropAncestors(); //this should not happen\n\n    if (!canDropAncestor || isBlank(ancestorId)) {\n      return [null, null];\n    }\n\n    const parentComponent = this.manager.getComponent(ancestorId);\n    const componentIndex = this.manager.getComponent(id)?.index ?? 0;\n    const item = monitor.getItem();\n\n    if (item && isPresent(item.dragData.index)) {\n      //is over itself\n      if (item.dragData.metadata?.id === this.metadata.id) {\n        return [item.dragData.index, item.dragData.parentId ?? ''];\n      }\n    }\n\n    if (!parentComponent) {\n      return [null, null];\n    }\n\n    return [componentIndex + this.getIndexIncrement(monitor, parentComponent.horizontal), ancestorId];\n  }\n  /**\n   * Gets coordinates calculated for children of this component\n   * @param monitor - Monitor containing information about current drag drop state\n   */\n\n\n  getDropCoordinatesForChildren(monitor) {\n    const getHalf = element => {\n      const rect = element.children[0].getBoundingClientRect();\n      const position = this.horizontal ? rect.x : rect.y;\n      const half = (this.horizontal ? rect.width : rect.height) / 2;\n      return position + half;\n    };\n\n    if (!this.containerElement) {\n      return [null, null];\n    }\n\n    let index = 0;\n    const offset = monitor.getClientOffset();\n\n    if (!offset) {\n      return [null, null];\n    }\n\n    const position = this.horizontal ? offset.x : offset.y;\n\n    for (let x = 0; x < this.containerElement.children.length; x++) {\n      const child = this.containerElement.children[x]; //do nothing for placeholder\n\n      if (child.classList.contains('drag-placeholder')) {\n        continue;\n      } //return index if less than half\n\n\n      if (position <= getHalf(child)) {\n        return [index, this.metadata.id];\n      }\n\n      index++;\n    }\n\n    return [index, this.metadata.id];\n  }\n  /**\n   * Gets fixed drop coordinates\n   * @param monitor - Monitor containing information about current drag drop state\n   * @param canDrop - Indication whether can drop can occur on monitor itself\n   */\n\n\n  getFixedDropCoordinates(monitor, canDrop) {\n    const [index, id] = this.getDropCoordinates(monitor, canDrop);\n    let usedIndex = index;\n    const item = monitor.getItem();\n\n    if (item && isPresent(usedIndex) && isPresent(item.dragData.index)) {\n      //same parent and higher index\n      if (id === item.dragData.parentId && usedIndex > item.dragData.index) {\n        usedIndex--;\n      }\n    }\n\n    return [usedIndex, id];\n  }\n  /**\n   * Gets index increment\n   * @param monitor - Monitor to be used for obtaining information about index\n   * @param horizontal - Indication whether are items horizontaly oriented\n   */\n\n\n  getIndexIncrement(monitor, horizontal) {\n    const rect = this.dropzoneElement.getBoundingClientRect();\n    const offset = monitor.getClientOffset();\n\n    if (!offset) {\n      return 0;\n    }\n\n    const position = horizontal ? offset.x - rect.x : offset.y - rect.y;\n    const half = horizontal ? rect.width / 2 : rect.height / 2;\n\n    if (position <= half) {\n      return 0;\n    } else {\n      return 1;\n    }\n  }\n  /**\n   * Shows placeholder preview at specified location\n   * @param preview - Instance of preview data\n   */\n\n\n  showPlaceholderPreview(preview) {\n    if (!this.containerElement) {\n      return;\n    }\n\n    this.placeholderPreviewElement ?? (this.placeholderPreviewElement = this.document.createElement('div'));\n    this.placeholderPreviewElement.classList.add('drag-placeholder');\n    this.placeholderPreviewElement.remove();\n    this.connectDropToPlaceholder();\n    this.containerElement.insertBefore(this.placeholderPreviewElement, this.containerElement.children[preview.index]);\n  }\n  /**\n   * Connects placeholder preview element to placeholder drop\n   */\n\n\n  connectDropToPlaceholder() {\n    this.zone.runOutsideAngular(() => {\n      this.placeholderConnection?.unsubscribe();\n\n      if (this.placeholderPreviewElement) {\n        this.placeholderConnection = this.placeholderDrop.connectDropTarget(this.placeholderPreviewElement);\n      }\n    });\n  }\n  /**\n   * Connects container element to container drop\n   */\n\n\n  connectDropToContainer() {\n    this.zone.runOutsideAngular(() => {\n      this.containerConnection?.unsubscribe();\n      this.containerConnection = this.containerDrop.connectDropTarget(this.designerElement.nativeElement);\n    });\n  }\n  /**\n   * Gets indication whether any of ancestors can accept drop, also returns id of that ancestor\n   * @param id - Id of component whose parent will be tested, if not specified id of this component will be used\n   */\n\n\n  canDropAncestors(id) {\n    if (isBlank(id)) {\n      id = this.metadata.id;\n    }\n\n    const component = this.manager.getComponentDef(id);\n\n    if (!component?.parent) {\n      return [false, null, id];\n    }\n\n    if (component.parent.component.canDrop) {\n      return [true, component.parent.component.id, id];\n    } else {\n      return this.canDropAncestors(component.parent.component.id);\n    }\n  }\n\n}\n\nDndCoreDesignerDirective.ɵfac = function DndCoreDesignerDirective_Factory(t) {\n  return new (t || DndCoreDesignerDirective)(i0.ɵɵdirectiveInject(i1.DndService), i0.ɵɵdirectiveInject(i0.ElementRef), i0.ɵɵdirectiveInject(i2.DragActiveService), i0.ɵɵdirectiveInject(i2.LayoutEditorMetadataManager), i0.ɵɵdirectiveInject(i3.DndBusService), i0.ɵɵdirectiveInject(i0.NgZone), i0.ɵɵdirectiveInject(i0.Injector), i0.ɵɵdirectiveInject(DOCUMENT));\n};\n\nDndCoreDesignerDirective.ɵdir = /* @__PURE__ */i0.ɵɵdefineDirective({\n  type: DndCoreDesignerDirective,\n  selectors: [[\"\", \"dndCoreDesigner\", \"\"]],\n  contentQueries: function DndCoreDesignerDirective_ContentQueries(rf, ctx, dirIndex) {\n    if (rf & 1) {\n      i0.ɵɵcontentQuery(dirIndex, LayoutComponentRendererSADirective, 7);\n    }\n\n    if (rf & 2) {\n      let _t;\n\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.layoutComponentRendererDirective = _t.first);\n    }\n  },\n  inputs: {\n    dropzoneElement: \"dropzoneElement\",\n    dragData: [\"dndCoreDesigner\", \"dragData\"],\n    dragDisabled: \"dragDisabled\"\n  },\n  outputs: {\n    dropMetadata: \"dropMetadata\"\n  },\n  exportAs: [\"dndCoreDesigner\"]\n});\n\n__decorate([BindThis, __metadata(\"design:type\", Function), __metadata(\"design:paramtypes\", [Object]), __metadata(\"design:returntype\", void 0)], DndCoreDesignerDirective.prototype, \"showPlaceholderPreview\", null);\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(DndCoreDesignerDirective, [{\n    type: Directive,\n    args: [{\n      selector: '[dndCoreDesigner]',\n      exportAs: 'dndCoreDesigner'\n    }]\n  }], function () {\n    return [{\n      type: i1.DndService\n    }, {\n      type: i0.ElementRef\n    }, {\n      type: i2.DragActiveService\n    }, {\n      type: i2.LayoutEditorMetadataManager\n    }, {\n      type: i3.DndBusService\n    }, {\n      type: i0.NgZone\n    }, {\n      type: i0.Injector\n    }, {\n      type: Document,\n      decorators: [{\n        type: Inject,\n        args: [DOCUMENT]\n      }]\n    }];\n  }, {\n    layoutComponentRendererDirective: [{\n      type: ContentChild,\n      args: [LayoutComponentRendererSADirective, {\n        static: true\n      }]\n    }],\n    dropzoneElement: [{\n      type: Input\n    }],\n    dragData: [{\n      type: Input,\n      args: ['dndCoreDesigner']\n    }],\n    dragDisabled: [{\n      type: Input\n    }],\n    dropMetadata: [{\n      type: Output\n    }],\n    showPlaceholderPreview: []\n  });\n})();","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction _asyncIterator(iterable) { var method, async, sync, retry = 2; for (\"undefined\" != typeof Symbol && (async = Symbol.asyncIterator, sync = Symbol.iterator); retry--;) { if (async && null != (method = iterable[async])) return method.call(iterable); if (sync && null != (method = iterable[sync])) return new AsyncFromSyncIterator(method.call(iterable)); async = \"@@asyncIterator\", sync = \"@@iterator\"; } throw new TypeError(\"Object is not async iterable\"); }\n\nfunction AsyncFromSyncIterator(s) { function AsyncFromSyncIteratorContinuation(r) { if (Object(r) !== r) return Promise.reject(new TypeError(r + \" is not an object.\")); var done = r.done; return Promise.resolve(r.value).then(function (value) { return { value: value, done: done }; }); } return AsyncFromSyncIterator = function (s) { this.s = s, this.n = s.next; }, AsyncFromSyncIterator.prototype = { s: null, n: null, next: function () { return AsyncFromSyncIteratorContinuation(this.n.apply(this.s, arguments)); }, return: function (value) { var ret = this.s.return; return void 0 === ret ? Promise.resolve({ value: value, done: !0 }) : AsyncFromSyncIteratorContinuation(ret.apply(this.s, arguments)); }, throw: function (value) { var thr = this.s.return; return void 0 === thr ? Promise.reject(value) : AsyncFromSyncIteratorContinuation(thr.apply(this.s, arguments)); } }, new AsyncFromSyncIterator(s); }\n\nimport { Component, ChangeDetectionStrategy, ChangeDetectorRef, ElementRef, SkipSelf, Optional, Inject, Injector, ViewChild } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { LOGGER, PositionModule } from '@anglr/common';\nimport { LayoutComponentBase, LayoutComponentRendererSADirective } from '@anglr/dynamic/layout';\nimport { MetadataHistoryManager, SCOPE_ID } from '@anglr/dynamic';\nimport { isPresent } from '@jscrpt/common';\nimport { DndModule } from '@ng-dnd/core';\nimport { Subscription } from 'rxjs';\nimport { BodyRenderSADirective, CopyDesignerStylesSADirective, DesignerDropzoneSADirective, DesignerMinDimensionSADirective } from '../../directives';\nimport { LayoutComponentsIteratorService, LayoutEditorMetadataExtractor, LayoutEditorMetadataManager } from '../../services';\nimport { LayoutEditorDragPreviewSAComponent } from '../layoutEditorDragPreview/layoutEditorDragPreview.component';\nimport { LayoutDesignerOverlayForSAComponent } from '../layoutDesignerOverlayFor/layoutDesignerOverlayFor.component';\nimport { LAYOUT_HISTORY_MANAGER } from '../../misc/tokens';\nimport { DndCoreDesignerDirective, LayoutDndCoreModule } from '../../modules';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@anglr/common\";\nimport * as i4 from \"@ng-dnd/core\";\nimport * as i5 from \"../../modules/layoutDndCore/directives/dndCoreDesigner/dndCoreDesigner.directive\";\nimport * as i6 from \"@anglr/dynamic\";\n/**\n * Component used as designer component wrapper for layout component\n */\n\nconst _c0 = [\"layoutDesigner\"];\nconst _c1 = [\"dndCoreDesigner\"];\n\nfunction LayoutDesignerSAComponent_ng_template_5_Template(rf, ctx) {}\n\nfunction LayoutDesignerSAComponent_ng_container_7_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 10);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r6 = i0.ɵɵnextContext(2);\n\n    const _r0 = i0.ɵɵreference(1);\n\n    let tmp_1_0;\n    i0.ɵɵproperty(\"positionTo\", _r0);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate((tmp_1_0 = ctx_r6.editorMetadata == null ? null : ctx_r6.editorMetadata.metaInfo == null ? null : ctx_r6.editorMetadata.metaInfo.name) !== null && tmp_1_0 !== undefined ? tmp_1_0 : ctx_r6.renderedType == null ? null : ctx_r6.renderedType.name);\n  }\n}\n\nfunction LayoutDesignerSAComponent_ng_container_7_ng_container_4_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 12);\n    i0.ɵɵlistener(\"click\", function LayoutDesignerSAComponent_ng_container_7_ng_container_4_div_1_Template_div_click_0_listener() {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r9 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r9.remove());\n    });\n    i0.ɵɵelement(1, \"span\", 13);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵnextContext(3);\n\n    const _r0 = i0.ɵɵreference(1);\n\n    i0.ɵɵproperty(\"positionTo\", _r0);\n  }\n}\n\nfunction LayoutDesignerSAComponent_ng_container_7_ng_container_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, LayoutDesignerSAComponent_ng_container_7_ng_container_4_div_1_Template, 2, 1, \"div\", 11);\n    i0.ɵɵelementContainerEnd();\n  }\n}\n\nfunction LayoutDesignerSAComponent_ng_container_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelement(1, \"div\", 7)(2, \"div\", 8);\n    i0.ɵɵtemplate(3, LayoutDesignerSAComponent_ng_container_7_div_3_Template, 2, 2, \"div\", 9);\n    i0.ɵɵtemplate(4, LayoutDesignerSAComponent_ng_container_7_ng_container_4_Template, 2, 0, \"ng-container\", 6);\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext();\n\n    const _r3 = i0.ɵɵreference(6);\n\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"layoutDesignerOverlayFor\", _r3);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", !!ctx_r5.parent && (ctx_r5.parent.editorMetadata == null ? null : ctx_r5.parent.editorMetadata.removeDescendant));\n  }\n}\n\nconst _c2 = function (a0, a1, a2) {\n  return {\n    metadata: a0,\n    parentId: a1,\n    index: a2\n  };\n};\n\nexport class LayoutDesignerSAComponent extends LayoutComponentBase {\n  //######################### constructor #########################\n  constructor(changeDetector, element, injector, metadataExtractor, layoutEditorMetadataManager, iteratorSvc, history, scopeId, logger, parent) {\n    super(changeDetector, element, injector, logger);\n    this.metadataExtractor = metadataExtractor;\n    this.layoutEditorMetadataManager = layoutEditorMetadataManager;\n    this.iteratorSvc = iteratorSvc;\n    this.history = history;\n    this.scopeId = scopeId;\n    this.parent = parent; //######################### protected properties #########################\n\n    /**\n     * Subscriptions created during initialization\n     */\n\n    this.initSubscriptions = new Subscription();\n    /**\n     * Gets predicate that returns indication whether item can be dropped into this list\n     * //TODO: remove\n     */\n\n    this.canDropFn = () => this.canDrop;\n    /**\n     * Indication whether item can be dropped here\n     */\n\n\n    this.canDrop = false;\n    /**\n     * Indication whether drop list is horizontally oriented\n     */\n\n    this.horizontal = false;\n    /**\n     * Index of current layout designer in its parent\n     */\n\n    this.index = 0;\n    /**\n     * Layout editor metadata\n     */\n\n    this.editorMetadata = null;\n  } //######################### protected properties - template bindings #########################\n\n  /**\n   * Indication whether is component selected\n   */\n\n\n  get selected() {\n    return this.layoutEditorMetadataManager.selectedComponent === this.options?.typeMetadata.id;\n  }\n  /**\n   * Indication whether is component highlighted\n   */\n\n\n  get highlighted() {\n    return this.layoutEditorMetadataManager.highlightedComponent === this.options?.typeMetadata.id;\n  } //######################### protected properties - overrides #########################\n\n  /**\n   * @inheritdoc\n   */\n\n\n  get element() {\n    return this.designerElement;\n  }\n  /**\n   * @inheritdoc\n   */\n\n\n  get extensionsOptions() {\n    return this.options?.typeMetadata.options;\n  } //######################### public properties #########################\n\n  /**\n   * Indication whether drag is disabled for component\n   */\n\n\n  get dragDisabled() {\n    return !this.parent || !!this.editorMetadata?.metaInfo?.dragDisabled;\n  }\n  /**\n   * Component identifier\n   */\n\n\n  get id() {\n    return this.options?.typeMetadata?.id ?? '';\n  } //######################### public methods - implementation of OnDestroy #########################\n\n  /**\n   * Called when component is destroyed\n   */\n\n\n  ngOnDestroy() {\n    this.logger?.debug('LayoutDesignerSAComponent: Destroying component {@data}', {\n      id: this.options?.typeMetadata.id\n    });\n    this.initSubscriptions.unsubscribe();\n    super.ngOnDestroy();\n\n    if (this.options) {\n      this.layoutEditorMetadataManager.unregisterLayoutDesignerComponent(this.options.typeMetadata.id);\n    }\n  } //######################### public methods #########################\n\n  /**\n   * Adds descentant component metadata to this component metadata\n   * @param dragData - Data from drag n drop event\n   */\n\n\n  addDescendant(dragData) {\n    if (!this.options) {\n      return;\n    }\n\n    const parentId = dragData.parentId;\n    this.logger?.debug('LayoutDesignerSAComponent: Adding descendant {@data}', {\n      id: dragData.metadata?.id,\n      parent: this.options.typeMetadata.id\n    });\n\n    if (!dragData.metadata) {\n      this.logger?.warn('LayoutDesignerSAComponent: Missing metadata while adding descendant');\n      return;\n    } //already added to tree, removing old reference\n\n\n    if (parentId) {\n      this.history.disable();\n      this.layoutEditorMetadataManager.getComponent(parentId)?.removeDescendant(dragData.metadata?.id);\n      this.history.enable();\n    }\n\n    this.editorMetadata?.addDescendant?.(dragData?.metadata, this.options.typeMetadata.options, dragData.index ?? 0);\n    this.canDrop = this.editorMetadata?.canDropMetadata?.(this.options.typeMetadata.options) ?? false;\n    this.renderedType = { ...this.options.typeMetadata\n    };\n    this.changeDetector.markForCheck();\n    this.history.getNewState();\n  }\n  /**\n   * Removes descendant metadata from this component metadata\n   * @param id - Id of descendant to be removed\n   */\n\n\n  removeDescendant(id) {\n    if (!this.options) {\n      return;\n    }\n\n    this.logger?.debug('LayoutDesignerSAComponent: Removing descendant {@data}', {\n      id: this.options.typeMetadata.id,\n      child: id\n    });\n    this.editorMetadata?.removeDescendant?.(id, this.options.typeMetadata.options);\n    this.canDrop = this.editorMetadata?.canDropMetadata?.(this.options.typeMetadata.options) ?? false;\n    this.renderedType = { ...this.options.typeMetadata\n    };\n    this.changeDetector.markForCheck();\n    this.history.getNewState();\n  } //######################### protected methods - template bindings #########################\n\n  /**\n   * Shows designer overlay\n   * @param event - Mouse event that occured\n   */\n\n\n  showOverlay(event) {\n    this.logger?.verbose('LayoutDesignerComponent: Showing overlay for {@type}', {\n      name: this.options?.typeMetadata.name,\n      id: this.options?.typeMetadata.id\n    });\n    event.preventDefault();\n    event.stopPropagation();\n    this.layoutEditorMetadataManager.highlightComponent(this.options?.typeMetadata.id);\n  }\n  /**\n   * Hides designer overlay\n   * @param event - Mouse event that occured\n   */\n\n\n  hideOverlay(event) {\n    if (isPresent(this.parent)) {\n      return;\n    }\n\n    this.logger?.verbose('LayoutDesignerComponent: Hiding overlay for {@type}', {\n      name: this.options?.typeMetadata.name,\n      id: this.options?.typeMetadata.id\n    });\n    event.preventDefault();\n    event.stopPropagation();\n    this.layoutEditorMetadataManager.cancelHighlightedComponent();\n  }\n  /**\n   * Marks component as selected\n   * @param event - Event that occured\n   */\n\n\n  selectComponent(event) {\n    event.preventDefault();\n    event.stopPropagation();\n\n    if (this.options) {\n      this.layoutEditorMetadataManager.selectComponent(this.options.typeMetadata.id);\n    }\n  }\n  /**\n   * Unselects selected component\n   * @param event - Event that occured\n   */\n\n\n  unselectComponent(event) {\n    event.preventDefault();\n    event.stopPropagation();\n    this.layoutEditorMetadataManager.unselectComponent();\n  }\n  /**\n   * Removes itself from tree\n   */\n\n\n  remove() {\n    if (!this.parent || !this.options) {\n      return;\n    }\n\n    this.parent.removeDescendant(this.options.typeMetadata.id);\n  } //######################### protected methods - overrides #########################\n\n  /**\n   * @inheritdoc\n   */\n\n\n  onInit() {\n    var _superprop_getOnInit = () => super.onInit,\n        _this = this;\n\n    return _asyncToGenerator(function* () {\n      yield _superprop_getOnInit().call(_this);\n\n      if (!_this.options) {\n        return;\n      }\n\n      _this.options.typeMetadata.scope = _this.scopeId;\n\n      if (_this.parent?.options) {\n        var _iteratorAbruptCompletion = false;\n        var _didIteratorError = false;\n\n        var _iteratorError;\n\n        try {\n          for (var _iterator = _asyncIterator(_this.iteratorSvc.getChildrenIteratorFor(_this.parent.options?.typeMetadata)), _step; _iteratorAbruptCompletion = !(_step = yield _iterator.next()).done; _iteratorAbruptCompletion = false) {\n            const child = _step.value;\n\n            if (_this.options.typeMetadata.id === child.metadata.id) {\n              _this.index = child.index;\n              break;\n            }\n          }\n        } catch (err) {\n          _didIteratorError = true;\n          _iteratorError = err;\n        } finally {\n          try {\n            if (_iteratorAbruptCompletion && _iterator.return != null) {\n              yield _iterator.return();\n            }\n          } finally {\n            if (_didIteratorError) {\n              throw _iteratorError;\n            }\n          }\n        }\n      } //TODO: optimize\n\n\n      _this.initSubscriptions.add(_this.layoutEditorMetadataManager.selectedChange.subscribe(() => _this.changeDetector.detectChanges()));\n\n      _this.initSubscriptions.add(_this.layoutEditorMetadataManager.highlightedChange.subscribe(() => _this.changeDetector.detectChanges()));\n\n      _this.editorMetadata = yield _this.metadataExtractor.extractMetadata(_this.options.typeMetadata);\n      _this.canDrop = _this.editorMetadata?.canDropMetadata?.(_this.options.typeMetadata.options) ?? false;\n\n      _this.layoutEditorMetadataManager.registerLayoutDesignerComponent(_this, _this.options.typeMetadata.id, _this.parent?.options?.typeMetadata.id);\n    })();\n  }\n  /**\n   * @inheritdoc\n   */\n\n\n  onOptionsSet() {\n    if (!this.options) {\n      return;\n    }\n\n    this.renderedType = { ...this.options.typeMetadata\n    };\n    this.horizontal = this.editorMetadata?.isHorizontalDrop?.(this.options.typeMetadata.options) ?? false;\n  }\n\n}\n\nLayoutDesignerSAComponent.ɵfac = function LayoutDesignerSAComponent_Factory(t) {\n  return new (t || LayoutDesignerSAComponent)(i0.ɵɵdirectiveInject(i0.ChangeDetectorRef), i0.ɵɵdirectiveInject(i0.ElementRef), i0.ɵɵdirectiveInject(i0.Injector), i0.ɵɵdirectiveInject(i1.LayoutEditorMetadataExtractor), i0.ɵɵdirectiveInject(i1.LayoutEditorMetadataManager), i0.ɵɵdirectiveInject(i1.LayoutComponentsIteratorService), i0.ɵɵdirectiveInject(LAYOUT_HISTORY_MANAGER), i0.ɵɵdirectiveInject(SCOPE_ID, 8), i0.ɵɵdirectiveInject(LOGGER, 8), i0.ɵɵdirectiveInject(LayoutDesignerSAComponent, 12));\n};\n\nLayoutDesignerSAComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n  type: LayoutDesignerSAComponent,\n  selectors: [[\"layout-designer-component\"]],\n  viewQuery: function LayoutDesignerSAComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c0, 7);\n      i0.ɵɵviewQuery(_c1, 7);\n    }\n\n    if (rf & 2) {\n      let _t;\n\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.designerElement = _t.first);\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.dndCoreDesigner = _t.first);\n    }\n  },\n  standalone: true,\n  features: [i0.ɵɵInheritDefinitionFeature, i0.ɵɵStandaloneFeature],\n  decls: 8,\n  vars: 18,\n  consts: [[1, \"designer-overlay\", 3, \"dndCoreDesigner\", \"dropzoneElement\", \"dragDisabled\", \"dragSource\", \"noHTML5Preview\", \"copyDesignerStyles\", \"dropMetadata\", \"mouseleave\", \"mouseover\", \"click\", \"dblclick\"], [\"layoutDesigner\", \"\", \"dndCore\", \"dndCoreDesigner\"], [\"designerMinWidth\", \"\", 1, \"designer-dropzone\", 3, \"canDrop\", \"editorMetadata\", \"horizontal\", \"dropTarget\", \"isDropZone\"], [\"layoutDropzone\", \"\"], [3, \"layoutComponentRenderer\", \"layoutComponentRendererDisableTransformer\"], [\"renderer\", \"layoutComponentRenderer\"], [4, \"ngIf\"], [1, \"designer-overlay-border\"], [1, \"designer-overlay-layout\", 3, \"layoutDesignerOverlayFor\"], [\"class\", \"designer-overlay-title\", \"placement\", \"TopStart\", 3, \"positionTo\", 4, \"bodyRender\"], [\"placement\", \"TopStart\", 1, \"designer-overlay-title\", 3, \"positionTo\"], [\"class\", \"designer-overlay-remove\", \"placement\", \"TopEnd\", 3, \"positionTo\", \"click\", 4, \"bodyRender\"], [\"placement\", \"TopEnd\", 1, \"designer-overlay-remove\", 3, \"positionTo\", \"click\"], [1, \"fas\", \"fa-times\"]],\n  template: function LayoutDesignerSAComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0, 1);\n      i0.ɵɵlistener(\"dropMetadata\", function LayoutDesignerSAComponent_Template_div_dropMetadata_0_listener($event) {\n        return ctx.addDescendant($event);\n      })(\"mouseleave\", function LayoutDesignerSAComponent_Template_div_mouseleave_0_listener($event) {\n        return ctx.hideOverlay($event);\n      })(\"mouseover\", function LayoutDesignerSAComponent_Template_div_mouseover_0_listener($event) {\n        return ctx.showOverlay($event);\n      })(\"click\", function LayoutDesignerSAComponent_Template_div_click_0_listener($event) {\n        return ctx.selectComponent($event);\n      })(\"dblclick\", function LayoutDesignerSAComponent_Template_div_dblclick_0_listener($event) {\n        return ctx.unselectComponent($event);\n      });\n      i0.ɵɵelementStart(3, \"div\", 2, 3);\n      i0.ɵɵtemplate(5, LayoutDesignerSAComponent_ng_template_5_Template, 0, 0, \"ng-template\", 4, 5, i0.ɵɵtemplateRefExtractor);\n      i0.ɵɵtemplate(7, LayoutDesignerSAComponent_ng_container_7_Template, 5, 2, \"ng-container\", 6);\n      i0.ɵɵelementEnd()();\n    }\n\n    if (rf & 2) {\n      const _r1 = i0.ɵɵreference(2);\n\n      const _r2 = i0.ɵɵreference(4);\n\n      let tmp_8_0;\n      i0.ɵɵproperty(\"dndCoreDesigner\", i0.ɵɵpureFunction3(14, _c2, ctx.renderedType, ctx.parent == null ? null : ctx.parent.renderedType == null ? null : ctx.parent.renderedType.id, ctx.index))(\"dropzoneElement\", _r2)(\"dragDisabled\", ctx.dragDisabled)(\"dragSource\", _r1.drag)(\"noHTML5Preview\", true)(\"copyDesignerStyles\", ctx.renderedType);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"canDrop\", ctx.canDrop)(\"editorMetadata\", ctx.editorMetadata)(\"horizontal\", (tmp_8_0 = ctx.parent == null ? null : ctx.parent.horizontal) !== null && tmp_8_0 !== undefined ? tmp_8_0 : false)(\"dropTarget\", _r1.dropzone)(\"isDropZone\", ctx.canDrop);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"layoutComponentRenderer\", ctx.renderedType)(\"layoutComponentRendererDisableTransformer\", true);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.highlighted || ctx.selected);\n    }\n  },\n  dependencies: [//TODO: cleanup\n  CommonModule, i2.NgIf, PositionModule, i3.PositionToDirective, LayoutDesignerOverlayForSAComponent, DesignerMinDimensionSADirective, CopyDesignerStylesSADirective, LayoutComponentRendererSADirective, DesignerDropzoneSADirective, BodyRenderSADirective, DndModule, i4.DragSourceDirective, i4.DropTargetDirective, LayoutDndCoreModule, i5.DndCoreDesignerDirective],\n  encapsulation: 2,\n  changeDetection: 0\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(LayoutDesignerSAComponent, [{\n    type: Component,\n    args: [{\n      selector: 'layout-designer-component',\n      standalone: true,\n      imports: [//TODO: cleanup\n      CommonModule, PositionModule, LayoutEditorDragPreviewSAComponent, LayoutDesignerOverlayForSAComponent, DesignerMinDimensionSADirective, CopyDesignerStylesSADirective, LayoutComponentRendererSADirective, DesignerDropzoneSADirective, BodyRenderSADirective, DndModule, LayoutDndCoreModule],\n      changeDetection: ChangeDetectionStrategy.OnPush,\n      template: \"<div class=\\\"designer-overlay\\\" \\n     #layoutDesigner\\n     #dndCore=\\\"dndCoreDesigner\\\"\\n     [dndCoreDesigner]=\\\"{metadata: renderedType, parentId: parent?.renderedType?.id, index: index}\\\"\\n     [dropzoneElement]=\\\"layoutDropzone\\\"\\n     [dragDisabled]=\\\"dragDisabled\\\"\\n     [dragSource]=\\\"dndCore.drag\\\"\\n     [noHTML5Preview]=\\\"true\\\"\\n     (dropMetadata)=\\\"addDescendant($event)\\\"\\n     [copyDesignerStyles]=\\\"renderedType\\\"\\n     (mouseleave)=\\\"hideOverlay($event)\\\"\\n     (mouseover)=\\\"showOverlay($event)\\\"\\n     (click)=\\\"selectComponent($event)\\\"\\n     (dblclick)=\\\"unselectComponent($event)\\\">\\n    <div class=\\\"designer-dropzone\\\"\\n         #layoutDropzone\\n         designerMinWidth\\n         [canDrop]=\\\"canDrop\\\"\\n         [editorMetadata]=\\\"editorMetadata\\\"\\n         [horizontal]=\\\"parent?.horizontal ?? false\\\"\\n         [dropTarget]=\\\"dndCore.dropzone\\\"\\n         [isDropZone]=\\\"canDrop\\\">\\n        <ng-template #renderer=\\\"layoutComponentRenderer\\\" [layoutComponentRenderer]=\\\"renderedType\\\" [layoutComponentRendererDisableTransformer]=\\\"true\\\"></ng-template>\\n\\n        <ng-container *ngIf=\\\"highlighted || selected\\\">\\n            <div class=\\\"designer-overlay-border\\\"></div>\\n            <div class=\\\"designer-overlay-layout\\\" [layoutDesignerOverlayFor]=\\\"renderer\\\"></div>\\n\\n            <div class=\\\"designer-overlay-title\\\"\\n                 *bodyRender\\n                 [positionTo]=\\\"layoutDesigner\\\"\\n                 placement=\\\"TopStart\\\">{{editorMetadata?.metaInfo?.name ?? renderedType?.name}}</div>\\n\\n            <ng-container *ngIf=\\\"!!parent && parent.editorMetadata?.removeDescendant\\\">\\n                <div *bodyRender\\n                     class=\\\"designer-overlay-remove\\\"\\n                     [positionTo]=\\\"layoutDesigner\\\"\\n                     placement=\\\"TopEnd\\\"\\n                     (click)=\\\"remove()\\\">\\n                    <span class=\\\"fas fa-times\\\"></span>\\n                </div>\\n            </ng-container>\\n        </ng-container>\\n    </div>\\n</div>\\n\"\n    }]\n  }], function () {\n    return [{\n      type: i0.ChangeDetectorRef\n    }, {\n      type: i0.ElementRef\n    }, {\n      type: i0.Injector\n    }, {\n      type: i1.LayoutEditorMetadataExtractor\n    }, {\n      type: i1.LayoutEditorMetadataManager\n    }, {\n      type: i1.LayoutComponentsIteratorService\n    }, {\n      type: i6.MetadataHistoryManager,\n      decorators: [{\n        type: Inject,\n        args: [LAYOUT_HISTORY_MANAGER]\n      }]\n    }, {\n      type: undefined,\n      decorators: [{\n        type: Optional\n      }, {\n        type: Inject,\n        args: [SCOPE_ID]\n      }]\n    }, {\n      type: undefined,\n      decorators: [{\n        type: Inject,\n        args: [LOGGER]\n      }, {\n        type: Optional\n      }]\n    }, {\n      type: LayoutDesignerSAComponent,\n      decorators: [{\n        type: SkipSelf\n      }, {\n        type: Optional\n      }]\n    }];\n  }, {\n    designerElement: [{\n      type: ViewChild,\n      args: ['layoutDesigner', {\n        static: true\n      }]\n    }],\n    dndCoreDesigner: [{\n      type: ViewChild,\n      args: ['dndCoreDesigner', {\n        static: true\n      }]\n    }]\n  });\n})();","import { Directive, ElementRef, Input } from '@angular/core';\nimport { Subscription } from 'rxjs';\nimport { DragActiveService } from '../../services';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services\";\n/**\n * Directive that adds special changes for designer dropzone\n */\n\nexport class DesignerDropzoneSADirective {\n  //######################### constructor #########################\n  constructor(draggingSvc, element) {\n    this.draggingSvc = draggingSvc;\n    this.element = element; //######################### protected properties #########################\n\n    /**\n     * Subscriptions created during initialization\n     */\n\n    this.initSubscriptions = new Subscription(); //######################### public properties - inputs #########################\n\n    /**\n     * Indication whether is this enabled drop zone\n     */\n\n    this.isDropZone = false;\n  } //######################### public methods - implementation of OnInit #########################\n\n  /**\n   * Initialize component\n   */\n\n\n  ngOnInit() {\n    this.initSubscriptions.add(this.draggingSvc.draggingChange.subscribe(() => this.processDragValue()));\n  } //######################### public methods - implementation of OnDestroy #########################\n\n  /**\n   * Called when component is destroyed\n   */\n\n\n  ngOnDestroy() {\n    this.initSubscriptions.unsubscribe();\n  } //######################### protected methods #########################\n\n  /**\n   * Process drag current value and sets css classes\n   */\n\n\n  processDragValue() {\n    //relate to https://stackoverflow.com/a/20734159\n    //Need to wait before manipulating with DOM because browser can trigger dragend if dragged node is out of mouse position\n    setTimeout(() => {\n      if (this.draggingSvc.dragging && this.isDropZone) {\n        this.element.nativeElement.classList.add('drag-active');\n      } else {\n        this.element.nativeElement.classList.remove('drag-active');\n      }\n    });\n  }\n\n}\n\nDesignerDropzoneSADirective.ɵfac = function DesignerDropzoneSADirective_Factory(t) {\n  return new (t || DesignerDropzoneSADirective)(i0.ɵɵdirectiveInject(i1.DragActiveService), i0.ɵɵdirectiveInject(i0.ElementRef));\n};\n\nDesignerDropzoneSADirective.ɵdir = /* @__PURE__ */i0.ɵɵdefineDirective({\n  type: DesignerDropzoneSADirective,\n  selectors: [[\"\", 8, \"designer-dropzone\"]],\n  inputs: {\n    isDropZone: \"isDropZone\"\n  },\n  standalone: true\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(DesignerDropzoneSADirective, [{\n    type: Directive,\n    args: [{\n      selector: '.designer-dropzone',\n      standalone: true\n    }]\n  }], function () {\n    return [{\n      type: i1.DragActiveService\n    }, {\n      type: i0.ElementRef\n    }];\n  }, {\n    isDropZone: [{\n      type: Input\n    }]\n  });\n})();","import { NgModule } from '@angular/core';\nimport { DndCorePreviewComponent } from '../components';\nimport { DndCoreDesignerDirective, DndCorePaletteItemDirective, DndCorePreviewTemplateDirective, DndCoreTreeItemDirective } from '../directives';\nimport * as i0 from \"@angular/core\";\n/**\n * Module used for handling layout dnd core stuff\n */\n\nexport class LayoutDndCoreModule {}\n\nLayoutDndCoreModule.ɵfac = function LayoutDndCoreModule_Factory(t) {\n  return new (t || LayoutDndCoreModule)();\n};\n\nLayoutDndCoreModule.ɵmod = /* @__PURE__ */i0.ɵɵdefineNgModule({\n  type: LayoutDndCoreModule\n});\nLayoutDndCoreModule.ɵinj = /* @__PURE__ */i0.ɵɵdefineInjector({});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(LayoutDndCoreModule, [{\n    type: NgModule,\n    args: [{\n      declarations: [DndCorePreviewComponent, DndCoreDesignerDirective, DndCorePaletteItemDirective, DndCorePreviewTemplateDirective, DndCoreTreeItemDirective],\n      exports: [DndCorePreviewComponent, DndCoreDesignerDirective, DndCorePaletteItemDirective, DndCorePreviewTemplateDirective, DndCoreTreeItemDirective]\n    }]\n  }], null, null);\n})();","import { Injectable } from '@angular/core';\nimport { Subject } from 'rxjs';\nimport * as i0 from \"@angular/core\";\n/**\n * Service that serves as communication bus for dnd\n */\n\nexport class DndBusService {\n  constructor() {\n    //######################### protected fields #########################\n\n    /**\n     * Used for emitting drop data changes\n     */\n    this.dropDataChangeSubject = new Subject();\n    /**\n     * Current value of drop placeholder preview\n     */\n\n    this.dropPlaceholderPreview = null;\n    /**\n     * Used for emitting when new drop placeholder preview should be displayed\n     */\n\n    this.newDropPlaceholderPreviewSubject = new Subject();\n    /**\n     * Used for emitting when old drop placeholder preview should be removed\n     */\n\n    this.oldDropPlaceholderPreviewSubject = new Subject();\n  } //######################### public properties #########################\n\n  /**\n   * Occurs when drop data changes\n   */\n\n\n  get dropDataChange() {\n    return this.dropDataChangeSubject.asObservable();\n  }\n  /**\n   * Occurs when new drop placeholder preview should be displayed\n   */\n\n\n  get newDropPlaceholderPreviewChange() {\n    return this.newDropPlaceholderPreviewSubject.asObservable();\n  }\n  /**\n   * Occurs when old drop placeholder preview should be removed\n   */\n\n\n  get oldDropPlaceholderPreviewChange() {\n    return this.oldDropPlaceholderPreviewSubject.asObservable();\n  }\n  /**\n   * Gets current drop placeholder preview index\n   */\n\n\n  get dropPlaceholderPreviewIndex() {\n    return this.dropPlaceholderPreview?.index ?? null;\n  } //######################### public methods #########################\n\n  /**\n   * Sets drop data new value\n   * @param data - Value of data that changed\n   */\n\n\n  setDropData(data) {\n    this.dropDataChangeSubject.next(data);\n  }\n  /**\n   * Sets drop placeholder preview\n   * @param data - Data for new drop placeholder preview\n   */\n\n\n  setDropPlaceholderPreview(data) {\n    //nothing has changed\n    if (data?.index === this.dropPlaceholderPreview?.index && data?.parentId === this.dropPlaceholderPreview?.parentId) {\n      return;\n    }\n\n    if (this.dropPlaceholderPreview) {\n      this.oldDropPlaceholderPreviewSubject.next(this.dropPlaceholderPreview);\n    }\n\n    this.dropPlaceholderPreview = data;\n\n    if (this.dropPlaceholderPreview) {\n      this.newDropPlaceholderPreviewSubject.next(this.dropPlaceholderPreview);\n    }\n  }\n\n}\n\nDndBusService.ɵfac = function DndBusService_Factory(t) {\n  return new (t || DndBusService)();\n};\n\nDndBusService.ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n  token: DndBusService,\n  factory: DndBusService.ɵfac\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(DndBusService, [{\n    type: Injectable\n  }], null, null);\n})();"],"names":["BindThis","_target","propertyKey","descriptor","originalValue","value","get","isFunction","Error","toString","configurable","bound","bind","this","Object","defineProperty","writable","PositionModule","DesignerMinDimensionSADirective","constructor","active","initSubscriptions","Subscription","minHeight","minWidth","horizontal","canDrop","editorMetadata","ngOnInit","observer","MutationObserver","changes","change","target","HTMLElement","updatedDimensions","add","layoutComponentRendererDirective","componentElementChange","subscribe","element","init","disconnect","ngOnChanges","nameof","ngOnDestroy","unsubscribe","getChildrenContainer","style","observe","childList","nodesArray","childNodes","forEach","node","push","contentsLength","filter","itm","nodeName","length","children","item","classList","contains","t","type","selectors","contentQueries","rf","ctx","dirIndex","_t","first","inputs","standalone","features","asyncGeneratorStep","gen","resolve","reject","_next","_throw","key","arg","info","error","done","Promise","then","CopyDesignerStylesSADirective","_element","_metadataExtractor","metadata","_metadata","_copyDesignerStyles","fn","_this","applyDesignerStyles","extractMetadata","options","nativeElement","self","args","arguments","apply","err","undefined","exportAs","BodyRenderSADirective","template","viewContainer","document","view","createEmbeddedView","rootNodes","body","appendChild","remove","destroy","LayoutDesignerOverlayForSAComponent","_changeDetector","_observer","detectChanges","_htmlElement","componentRef","hostView","attributeFilter","attrs","decls","vars","consts","marginTop","marginBottom","marginLeft","marginRight","paddingTop","paddingBottom","paddingLeft","paddingRight","borderTop","borderBottom","borderLeft","borderRight","encapsulation","changeDetection","PositionToDirective","_position","flip","EventEmitter","source","_source","ElementRef","placement","_placement","isString","PositionPlacement","isPresent","_applyPosition","result","placeElement","toPromise","applyPositionResult","next","i0","POSITION","DndCoreDesignerDirective","dnd","designerElement","draggingSvc","manager","bus","zone","injector","placeholderDrop","dropTarget","drop","monitor","getItem","index","dropPlaceholderPreviewIndex","dragData","id","containerDrop","canDropAncestors","isOver","shallow","getFixedDropCoordinates","hover","parentId","getDropCoordinates","setDropPlaceholderPreview","placeholder","height","width","drag","dragSource","beginDrag","setDragging","canDrag","dragDisabled","endDrag","didDrop","dropResult","getDropResult","setDropData","data","dropzone","dropMetadata","connectDropToContainer","getComponent","containerElement","componentElement","component","dropzoneElement","dropDataChange","pipe","emit","oldDropPlaceholderPreviewChange","placeholderPreviewElement","newDropPlaceholderPreviewChange","showPlaceholderPreview","placeholderConnection","containerConnection","getDropCoordinatesForChildren","canDropAncestor","ancestorId","parentComponent","componentIndex","getIndexIncrement","getHalf","rect","getBoundingClientRect","x","y","offset","getClientOffset","position","child","usedIndex","preview","createElement","connectDropToPlaceholder","insertBefore","runOutsideAngular","connectDropTarget","getComponentDef","parent","AsyncFromSyncIterator","s","AsyncFromSyncIteratorContinuation","r","TypeError","n","prototype","return","ret","throw","thr","outputs","Function","_c1","LayoutDesignerSAComponent_ng_template_5_Template","LayoutDesignerSAComponent_ng_container_7_div_3_Template","ctx_r6","_r0","tmp_1_0","metaInfo","name","renderedType","LayoutDesignerSAComponent_ng_container_7_ng_container_4_div_1_Template","_r10","ctx_r9","LayoutDesignerSAComponent_ng_container_7_ng_container_4_Template","LayoutDesignerSAComponent_ng_container_7_Template","ctx_r5","_r3","removeDescendant","_c2","a0","a1","a2","LayoutDesignerSAComponent","changeDetector","metadataExtractor","layoutEditorMetadataManager","iteratorSvc","history","scopeId","logger","super","canDropFn","selected","selectedComponent","typeMetadata","highlighted","highlightedComponent","extensionsOptions","debug","unregisterLayoutDesignerComponent","addDescendant","disable","enable","canDropMetadata","markForCheck","getNewState","warn","showOverlay","event","verbose","preventDefault","stopPropagation","highlightComponent","hideOverlay","cancelHighlightedComponent","selectComponent","unselectComponent","onInit","_superprop_getOnInit","call","scope","_iteratorError","_iteratorAbruptCompletion","_didIteratorError","_step","_iterator","iterable","method","async","sync","retry","Symbol","asyncIterator","iterator","_asyncIterator","getChildrenIteratorFor","selectedChange","highlightedChange","registerLayoutDesignerComponent","onOptionsSet","isHorizontalDrop","viewQuery","dndCoreDesigner","$event","_r1","_r2","tmp_8_0","dependencies","DesignerDropzoneSADirective","isDropZone","draggingChange","processDragValue","setTimeout","dragging","LayoutDndCoreModule","DndBusService","dropDataChangeSubject","dropPlaceholderPreview","newDropPlaceholderPreviewSubject","oldDropPlaceholderPreviewSubject","asObservable","token","factory"],"sourceRoot":""}
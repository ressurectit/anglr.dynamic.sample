"use strict";(self.webpackChunkng_universal_demo=self.webpackChunkng_universal_demo||[]).push([[979],{4979:(e,t,r)=>{r.r(t),r.d(t,{DefaultModule:()=>K});var n=r(5950),o=r(8713),i=r(1080),a=r(5900),s=r(7921),u=r(1377),c=r(1732),l=r(4539),p=r(3365),h=r(4432),f=r(5871),d=r(8507),m=r(90),g=r(8662),v=r(3221),_=r(8138),b=r(5617),w=r(8912),A=r(6274),y=r(4275),q=r(6170),P=r(486),x=r(7550),C=r(603),S=r(1742),L=r(1869),R=r(5806),V=r(9998);function N(e,t,r){return O(e,"",t,"",r),N}function O(e,t,r,n,o){const i=(0,S.QE)(),a=(0,R.Ai)(i,t,r,n);if(a!==L.l){const t=(0,S.GP)(),r=(0,S.A3)();(0,V.ig)(t,r,i,e,a,i[C._B],o,!1)}return O}var Y=r(3527),F=r(2548),Z=r(6564),j=r(6917),k=r(2369),D=r(3829),E=r(7177),T=r(8402);function U(e,t){1&e&&(m.Tg(0,"div",12),g._(1),v.AL(2,"translate"),m.qZ()),2&e&&(_.Q("@slideInOut",void 0),b.x(1),w.hi(" ",v.lc(2,2,"Authentication failed! Please check your credentials and try again.")," "))}let z=class{constructor(e,t,r,n,o,i){this._authService=e,this._router=t,this._activeRoute=r,this._changeDetector=n,this._logger=o,this.authenticationError=!1,this.form=i.group({userName:null,password:null,rememberMe:null})}login(){this._authService.login(this.form.value).pipe((0,d.K)((e=>(this._logger.error(`Failed to log in '${e}'`),this.authenticationError=!0,this._changeDetector.detectChanges(),f.E)))).subscribe((()=>{this.authenticationError=!1,this._changeDetector.detectChanges(),this._activeRoute.snapshot.queryParams.returnUrl?this._router.navigateByUrl(this._activeRoute.snapshot.queryParams.returnUrl):this._router.navigate(["/"])}))}};z.ɵfac=function(e){return new(e||z)(A.Y(l.$),A.Y(a.F0),A.Y(s.gz),A.Y(i.s),A.Y(h.bZ),A.Y(u.qu))},z.ɵcmp=y.Xp({type:z,selectors:[["login-view"]],hostVars:2,hostBindings:function(e,t){2&e&&q.ek("justify-content-center",!0)},decls:26,vars:23,consts:[[1,"align-self-center"],[1,"text-uppercase","text-center"],["class","alert alert-danger",4,"ngIf"],["role","form",1,"form",3,"formGroup","submit"],[1,"form-group"],["for","username"],["type","text","id","username","formControlName","userName",1,"form-control",3,"placeholder"],["for","password"],["type","password","id","password","formControlName","password",1,"form-control",3,"placeholder"],["for","rememberme"],["type","checkbox","id","rememberme","formControlName","rememberMe"],["type","submit",1,"btn","btn-primary"],[1,"alert","alert-danger"]],template:function(e,t){1&e&&(m.Tg(0,"div",0)(1,"h1",1),g._(2),v.AL(3,"translate"),m.qZ(),P.Y(4,U,3,4,"div",2),m.Tg(5,"form",3),x.N("submit",(function(){return t.login()})),m.Tg(6,"div",4)(7,"label",5),g._(8),v.AL(9,"translate"),m.qZ(),m._U(10,"input",6),v.AL(11,"translate"),m.qZ(),m.Tg(12,"div",4)(13,"label",7),g._(14),v.AL(15,"translate"),m.qZ(),m._U(16,"input",8),v.AL(17,"translate"),m.qZ(),m.Tg(18,"div",4)(19,"label",9),g._(20),v.AL(21,"translate"),m._U(22,"input",10),m.qZ()(),m.Tg(23,"button",11),g._(24),v.AL(25,"translate"),m.qZ()()()),2&e&&(b.x(2),w.Oq(v.lc(3,9,"gui")),b.x(2),_.Q("ngIf",t.authenticationError),b.x(1),_.Q("formGroup",t.form),b.x(3),w.Oq(v.lc(9,11,"Login")),b.x(2),N("placeholder",v.lc(11,13,"Your login")),b.x(4),w.Oq(v.lc(15,15,"Password")),b.x(2),N("placeholder",v.lc(17,17,"Your password")),b.x(4),w.hi("",v.lc(21,19,"Remember me")," "),b.x(4),w.Oq(v.lc(25,21,"Authenticate")))},dependencies:[E.O,Y._,F.Fj,Z.W,j.JJ,j.JL,k.s,D.u,T.X],encapsulation:2,data:{animation:[p.x]},changeDetection:0}),z=(0,n.gn)([(0,c.N)({path:"login",data:{animation:"login"}}),(0,n.w6)("design:paramtypes",[l.$,a.F0,s.gz,i.s,Object,u.qu])],z);var M=r(4285),I=r(1803),J=r(4922);let G=class{};var Q,$;G.ɵfac=function(e){return new(e||G)},G.ɵcmp=y.Xp({type:G,selectors:[["home-view"]],decls:1,vars:0,template:function(e,t){1&e&&g._(0,"Home")},encapsulation:2,changeDetection:0}),G=(0,n.gn)([("",Q="home",function(e){const t=e;if((0,M.fp)(t.routeValues)&&(0,M.fp)(Q))return console.warn("Missing 'ComponentRoute' or wrong order of decorators 'ComponentRoute' and 'ComponentRedirectRoute'!"),e;if((0,M.fp)(Q)&&(0,M.EN)(t.routeValues)&&t.routeValues.length>1)return console.warn("Multiple routes defined. Unable to set proper redirect!"),e;const r=e;return(0,M.fp)(r.redirectRouteValues)&&Object.defineProperty(e,"redirectRouteValues",{enumerable:!0,configurable:!1,writable:!1,value:[]}),(0,M.fp)($)&&($=!0),(0,M.fp)(Q)&&(Q=t.routeValues[0].path),r.redirectRouteValues.push({path:"",redirectTo:Q,pathMatch:$?"full":"prefix"}),e}),(0,I.n)({path:"home"}),(0,J.q)("home-page")],G);const B=[z,G];var X=r(1759),H=r(515);let K=class{};K.ɵfac=function(e){return new(e||K)},K.ɵmod=y.oA({type:K}),K.ɵinj=H.cJ({imports:[X._J,X.No,X.nP]}),K=(0,n.gn)([(0,o.P)(B)],K)},4922:(e,t,r)=>{r.d(t,{q:()=>o});var n=r(4285);function o(e,t){return function(r){let o;o=(0,n.HD)(e)||Array.isArray(e)?{permission:e}:e;const i=r;return(0,n.fp)(t)?i.permissions=o:(i.routeSpecificPermissions??(i.routeSpecificPermissions={}),i.routeSpecificPermissions[t]=o),r}}},1803:(e,t,r)=>{r.d(t,{n:()=>m});var n=r(1732),o=r(4746),i=r(4285),a=r(9147),s=r(8743),u=r(7305),c=r(905),l=r(515),p=r(4539),h=r(5900);function f(e,t,r,n,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}class d{constructor(e,t,r){this._authSvc=e,this._injector=t,this._router=r}canActivate(e){var t,r=this;return(t=function*(){const t=e.component;let n;if(e.routeConfig?.path&&t.routeSpecificPermissions?.[e.routeConfig.path]?n=t.routeSpecificPermissions[e.routeConfig.path]:t.permissions&&(n=t.permissions),!n)return!0;let u=!0;n.addCondition&&(u=yield n.addCondition(r._injector));const c=r._authSvc.userIdentity;if((0,i.fp)(c))throw new Error("AuthenticationService must be initialized before first use of AuthGuard");const l=(0,s.g)(c.permissions,n.permission,n.andCondition??!1,n.conditionString??!1,u),p=new o.uV((0,a.s6)(e.pathFromRoot.map((e=>e.url))),{}),h=new o.lo;h.root=p,h.queryParams={};const f=r._router.serializeUrl(h);return!l&&c.isAuthenticated?(r._authSvc.showAccessDenied(),!1):!!(l||c.isAuthenticated||r._authSvc.isAuthPage(f))||(r._authSvc.showAuthPage(),!1)},function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(e){f(i,n,o,a,s,"next",e)}function s(e){f(i,n,o,a,s,"throw",e)}a(void 0)}))})()}}function m(e){return e.canActivate??(e.canActivate=[]),e.canActivate.indexOf(d)<0&&e.canActivate.push(d),(0,n.N)(e)}d.ɵfac=function(e){return new(e||d)(u.LF(p.$),u.LF(c.z),u.LF(h.F0))},d.ɵprov=l.Yz({token:d,factory:d.ɵfac,providedIn:"root"})},1732:(e,t,r)=>{r.d(t,{N:()=>o});var n=r(4285);function o(e){return function(t){const r=e;r.component=t;const o=t;return(0,n.fp)(o.routeValues)&&Object.defineProperty(t,"routeValues",{enumerable:!0,configurable:!1,writable:!1,value:[]}),o.routeValues.push(r),t}}}}]);
//# sourceMappingURL=979.client.chunk.97f228b1e911250e660a.js.map
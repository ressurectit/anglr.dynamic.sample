"use strict";(self.webpackChunkng_universal_demo=self.webpackChunkng_universal_demo||[]).push([[9120],{9120:(t,n,e)=>{e.r(n),e.d(n,{TriggerRelationsEditorMetadata:()=>Q});var o=e(12405),i=e(25434),a=e(12125),r=e(32123),s=e(74957),c=e(69445),d=e(13816),l=e(89033),u=e(38256),p=e(57165),m=e(50478),f=e(27805),g=e(63289),v=e(52455),y=e(28588),h=e(5419),b=e(4149),x=e(37654),w=e(66382),_=e(47948),k=e(13341),q=e(52900),C=e(94128),T=e(83210),Z=e(81473),O=e(15704);function E(t,n,e,o,i,a,r){try{var s=t[a](r),c=s.value}catch(t){return void e(t)}s.done?n(c):Promise.resolve(c).then(o,i)}function N(t){return function(){var n=this,e=arguments;return new Promise((function(o,i){var a=t.apply(n,e);function r(t){E(a,o,i,r,s,"next",t)}function s(t){E(a,o,i,r,s,"throw",t)}r(void 0)}))}}function I(t,n){if(1&t){const t=u.E();p.Tg(0,"div",4),p._U(1,"relation-node-input",12),p.Tg(2,"div",7)(3,"div"),m._(4),p.qZ(),p.Tg(5,"button",13),f.N("click",(function(n){const e=g.CH(t).$implicit,o=v.o();return n.preventDefault(),n.stopPropagation(),g.Kt(o.configureEndpoint(e))})),p._U(6,"span",14),p.qZ(),p.Tg(7,"button",15),f.N("click",(function(n){const e=g.CH(t).$implicit,o=v.o();return n.preventDefault(),n.stopPropagation(),g.Kt(o.removeEndpoint(e))})),p._U(8,"span",16),p.qZ()()()}if(2&t){const t=n.$implicit,e=v.o();y.x(1),h.Q("parentCoordiantes",e.nodePosition)("zoomLevel",e.zoomLevel)("name",t.name)("parent",e),y.x(3),b.Oq(t.name)}}function S(t,n){if(1&t&&(p.Tg(0,"div",17)(1,"div"),m._(2),p.qZ(),p._U(3,"relation-node-output",12),p.qZ()),2&t){const t=n.$implicit,e=v.o();y.x(2),b.Oq(t.name),y.x(1),h.Q("parentCoordiantes",e.nodePosition)("zoomLevel",e.zoomLevel)("name",t.name)("parent",e)}}class P extends a.M{get endpoints(){var t,n;return this.metadata?((t=this.metadata).relationsOptions??(t.relationsOptions={endpoints:[]}),(n=this.metadata.relationsOptions).endpoints??(n.endpoints=[])):[]}constructor(t,n,e){super(t,n),this.dialog=e}addEndpoint(){var t=this;return N((function*(){const n={name:"",defaultValue:null,skipInit:!0,allowSkipInit:!0};(yield t.configureEndpoint(n))&&(t.endpoints.push(n),t.history.getNewState())}))()}removeEndpoint(t){const n=this.endpoints.indexOf(t);n>=0&&(this.endpoints.splice(n,1),this.history.getNewState())}configureEndpoint(t){var n=this;return N((function*(){const e=JSON.parse(JSON.stringify(t)),o=yield(0,l.n)(n.dialog.open(i.b,{title:"configure endpoint",width:"60vw",data:t}).afterClosed());return o?n.history.getNewState():(0,d.l7)(t,e),o??!1}))()}}P.ɵfac=function(t){return new(t||P)(x.Y(w.s),x.Y(_.SB),x.Y(Z.J))},P.ɵcmp=k.Xp({type:P,selectors:[["trigger-node"]],standalone:!0,features:[q.q,C.j],decls:14,vars:7,consts:[["name","sync values",3,"parent","destroySubject"],[1,"node-content"],[1,"inputs-outputs"],[1,"inputs"],[1,"input"],["name","trigger",3,"parentCoordiantes","zoomLevel","parent"],["class","input",4,"ngFor","ngForOf"],[1,"dynamic-flex-row"],["type","button",1,"dynamic-btn-icon","dynamic-margin-left-extra-small",3,"click"],[1,"fas","fa-plus"],[1,"outputs"],["class","output",4,"ngFor","ngForOf"],[3,"parentCoordiantes","zoomLevel","name","parent"],["type","button",1,"dynamic-btn-icon","dynamic-margin-horizontal-extra-small",3,"click"],[1,"fas","fa-cog"],["type","button",1,"dynamic-btn-icon",3,"click"],[1,"fas","fa-times"],[1,"output"]],template:function(t,n){1&t&&(p._U(0,"relations-node-header",0),p.Tg(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),p._U(5,"relation-node-input",5),p.Tg(6,"div"),m._(7,"trigger"),p.qZ()(),T.Y(8,I,9,5,"div",6),p.Tg(9,"div",7)(10,"button",8),f.N("click",(function(t){return t.preventDefault(),t.stopPropagation(),n.addEndpoint()})),p._U(11,"span",9),p.qZ()()(),p.Tg(12,"div",10),T.Y(13,S,4,5,"div",11),p.qZ()()()),2&t&&(h.Q("parent",n)("destroySubject",n.destroySubject),y.x(5),h.Q("parentCoordiantes",n.nodePosition)("zoomLevel",n.zoomLevel)("parent",n),y.x(3),h.Q("ngForOf",n.endpoints),y.x(5),h.Q("ngForOf",n.endpoints))},dependencies:[o.e,O.sg,r.e,s.P,c.n],encapsulation:2,changeDetection:0});class Q{constructor(){this.metaInfo={name:"Trigger",description:"Allows sending data on trigger input",group:"Data"},this.nodeDefinition=P,Object.freeze(this)}}},25434:(t,n,e)=>{e.d(n,{b:()=>D});var o=e(12405),i=e(41762),a=e(6631),r=e(65540),s=e(74062),c=e(73512),d=e(14958),l=e(19598),u=e(13816),p=e(55163),m=e(89033);class f{constructor(t){this.defaultValue=null,this.name="",this.skipInit=!1,u.Rl.bind(this)(t)}}var g=e(57165),v=e(50478),y=e(38256),h=e(27805),b=e(63289),x=e(52455),w=e(37654),_=e(13341),k=e(18968),q=e(94128),C=e(83210),T=e(5419),Z=e(28588),O=e(81473),E=e(86039),N=e(33250),I=e(58433),S=e(49308),P=e(48215),Q=e(78525),z=e(97503);function L(t,n,e,o,i,a,r){try{var s=t[a](r),c=s.value}catch(t){return void e(t)}s.done?n(c):Promise.resolve(c).then(o,i)}function U(t,n){1&t&&(g.Tg(0,"div",1)(1,"label",2),g._U(2,"input",9),v._(3," skip init "),g.qZ()())}function Y(t,n){if(1&t){const t=y.E();g.Tg(0,"div",10)(1,"button",11),h.N("click",(function(){b.CH(t);const n=x.o();return b.Kt(n.showCodeEditor())})),g.Tg(2,"span"),v._(3,"default value"),g.qZ()()()}}class D{constructor(t,n,e){this.data=t,this.dialog=n,this.form=e.build(new f(t)),this.form.valueChanges.subscribe((n=>(0,u.l7)(t,n)))}showCodeEditor(){var t,n=this;return(t=function*(){const t=(0,p.EN)(n.data.defaultValue)?JSON.stringify(n.data.defaultValue,null,4):"",e=yield(0,m.n)(n.dialog.open(c.I,{title:"Code editor",width:"75vw",height:"75vh",data:{content:t,languageModel:d.H}}).afterClosed());(0,p.EN)(e)&&(n.data.defaultValue=(0,l.LK)(e.content))},function(){var n=this,e=arguments;return new Promise((function(o,i){var a=t.apply(n,e);function r(t){L(a,o,i,r,s,"next",t)}function s(t){L(a,o,i,r,s,"throw",t)}r(void 0)}))})()}}D.ɵfac=function(t){return new(t||D)(w.Y(r.m),w.Y(O.J),w.Y(s.p))},D.ɵcmp=_.Xp({type:D,selectors:[["configure-node-endpoint"]],standalone:!0,features:[k._([s.p]),q.j],decls:14,vars:5,consts:[[3,"formGroup"],[1,"dynamic-form-group","dynamic-margin-bottom-extra-small"],[1,"dynamic-control-label","dynamic-text-uppercase"],["type","text","formControlName","name",1,"dynamic-form-control"],["class","dynamic-form-group dynamic-margin-bottom-extra-small",4,"ngIf"],["class","dynamic-flex-column dynamic-margin-bottom-extra-small",4,"ngIf"],[1,"dynamic-flex-row","dynamic-flex-end"],["type","button",1,"dynamic-btn","dynamic-btn-info","dynamic-margin-right-extra-small",3,"mat-dialog-close"],["type","button",1,"dynamic-btn","dynamic-btn-primary",3,"mat-dialog-close"],["type","checkbox","formControlName","skipInit"],[1,"dynamic-flex-column","dynamic-margin-bottom-extra-small"],["type","button",1,"dynamic-btn","dynamic-btn-primary","dynamic-align-self-center",3,"click"]],template:function(t,n){1&t&&(g.Tg(0,"div",0)(1,"div",1)(2,"label",2),v._(3,"name"),g.qZ(),g._U(4,"input",3),g.qZ(),C.Y(5,U,4,0,"div",4),C.Y(6,Y,4,0,"div",5),g.qZ(),g.Tg(7,"div",6)(8,"button",7)(9,"span"),v._(10,"cancel"),g.qZ()(),g.Tg(11,"button",8)(12,"span"),v._(13,"ok"),g.qZ()()()),2&t&&(T.Q("formGroup",n.form),Z.x(5),T.Q("ngIf",n.data.allowSkipInit),Z.x(1),T.Q("ngIf",!n.data.noDefaultValue),Z.x(2),T.Q("mat-dialog-close",null),Z.x(3),T.Q("mat-dialog-close",!0))},dependencies:[i.U,E.Fj,N.W,I.JJ,I.JL,S.s,P.u,a.I,Q.ZT,o.e,z.O],encapsulation:2,changeDetection:0})}}]);
//# sourceMappingURL=9120.client.chunk.a826f50c65704ca20173.js.map
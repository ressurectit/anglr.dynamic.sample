{"version":3,"file":"4861.client.chunk.bd89e3f732d9ad80f8a8.js","mappings":"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","sources":["webpack://ng-universal-demo/./node_modules/@anglr/dynamic/es2020/src/modules/codeEditor/misc/types/languageModels/typescriptLanguageModel.js","webpack://ng-universal-demo/./node_modules/@anglr/dynamic/es2020/basic-components/src/dynamicItems/transformData/node/transformDataNode.component.js","webpack://ng-universal-demo/./node_modules/@anglr/dynamic/es2020/basic-components/src/dynamicItems/transformData/transformData.interface.js","webpack://ng-universal-demo/./node_modules/@anglr/dynamic/es2020/basic-components/src/dynamicItems/transformData/metadata/transformData.relationsMetadata.js"],"sourcesContent":["function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nimport { languages } from 'monaco-editor';\nimport { LanguageModel } from './languageModel';\n/**\n * Typescript language model for code editor\n * @param initialValue - Initial value to be used as initial code\n */\n\nexport const TypescriptLanguageModel = initialValue => new LanguageModel('typescript', 'ts', /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator(function* (editor) {\n    const uri = editor.getModel()?.uri;\n\n    if (!uri) {\n      return '';\n    }\n\n    const worker = yield languages.typescript.getTypeScriptWorker();\n    const client = yield worker(uri);\n    const result = yield client.getEmitOutput(uri.toString());\n    return result.outputFiles[0].text;\n  });\n\n  return function (_x) {\n    return _ref.apply(this, arguments);\n  };\n}(), initialValue);","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nimport { Component, ChangeDetectionStrategy, ChangeDetectorRef, ElementRef } from '@angular/core';\nimport { CodeEditorDialogComponent, TypescriptLanguageModel } from '@anglr/dynamic';\nimport { RelationsNodeBase, RelationNodeOutputSAComponent, RelationsNodeHeaderSAComponent, RelationNodeInputSAComponent } from '@anglr/dynamic/relations-editor';\nimport { TitledDialogService } from '@anglr/common/material';\nimport { generateId } from '@jscrpt/common';\nimport typings from '!!raw-loader?esModule!../transformData.interface';\nimport { languages } from 'monaco-editor';\nimport { lastValueFrom } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@anglr/common/material\";\nlanguages.typescript.typescriptDefaults.addExtraLib(typings, 'file:///node_modules/@types/transformData/index.d.ts');\n/**\n * Relations node component for transform data\n */\n\nexport class TransformDataNodeSAComponent extends RelationsNodeBase {\n  //######################### constructor #########################\n  constructor(changeDetector, element, dialog) {\n    super(changeDetector, element);\n    this.dialog = dialog;\n  } //######################### protected methods - template bindings #########################\n\n  /**\n   * Shows code editor\n   */\n\n\n  showCodeEditor() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      var _a;\n\n      const result = yield lastValueFrom(_this.dialog.open(CodeEditorDialogComponent, {\n        title: 'Code editor',\n        width: '75vw',\n        height: '75vh',\n        data: {\n          content: _this.metadata?.nodeMetadata?.options?.content ?? '',\n          languageModel: TypescriptLanguageModel(`import {TransformData} from 'transformData';\n\n/**\n * Transformer function that performs transformation\n */\nconst transformer: TransformData<any, any> = data =>\n{\n    return data;\n};\n \nexport default transformer;\n`)\n        }\n      }).afterClosed());\n\n      if (!_this.metadata?.relationsOptions || !result || !_this.metadata.nodeMetadata) {\n        return;\n      }\n\n      _this.metadata.relationsOptions.code = result.code;\n      (_a = _this.metadata.nodeMetadata).options ?? (_a.options = {\n        content: ''\n      });\n      _this.metadata.nodeMetadata.options.content = result.content;\n\n      _this.history.getNewState();\n    })();\n  } //######################### protected methods - overrides #########################\n\n  /**\n   * @inheritdoc\n   */\n\n\n  metadataSet() {\n    var _a;\n\n    if (this.metadata?.relationsOptions) {\n      (_a = this.metadata.relationsOptions).id ?? (_a.id = generateId(12));\n    }\n  }\n\n}\n\nTransformDataNodeSAComponent.ɵfac = function TransformDataNodeSAComponent_Factory(t) {\n  return new (t || TransformDataNodeSAComponent)(i0.ɵɵdirectiveInject(i0.ChangeDetectorRef), i0.ɵɵdirectiveInject(i0.ElementRef), i0.ɵɵdirectiveInject(i1.TitledDialogService));\n};\n\nTransformDataNodeSAComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n  type: TransformDataNodeSAComponent,\n  selectors: [[\"transform-data-node\"]],\n  standalone: true,\n  features: [i0.ɵɵInheritDefinitionFeature, i0.ɵɵStandaloneFeature],\n  decls: 16,\n  vars: 8,\n  consts: [[\"name\", \"transform data\", 3, \"parent\", \"destroySubject\"], [1, \"node-content\"], [1, \"inputs-outputs\"], [1, \"inputs\"], [1, \"input\"], [\"name\", \"data\", 3, \"parentCoordiantes\", \"zoomLevel\", \"parent\"], [1, \"outputs\"], [1, \"output\"], [\"name\", \"transformedData\", 3, \"parentCoordiantes\", \"zoomLevel\", \"parent\"], [\"type\", \"button\", 1, \"dynamic-btn\", \"dynamic-btn-primary\", 3, \"click\"]],\n  template: function TransformDataNodeSAComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelement(0, \"relations-node-header\", 0);\n      i0.ɵɵelementStart(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3)(4, \"div\", 4);\n      i0.ɵɵelement(5, \"relation-node-input\", 5);\n      i0.ɵɵelementStart(6, \"div\");\n      i0.ɵɵtext(7, \"data\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(8, \"div\", 6)(9, \"div\", 7)(10, \"div\");\n      i0.ɵɵtext(11, \"transformed data\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(12, \"relation-node-output\", 8);\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(13, \"button\", 9);\n      i0.ɵɵlistener(\"click\", function TransformDataNodeSAComponent_Template_button_click_13_listener() {\n        return ctx.showCodeEditor();\n      });\n      i0.ɵɵelementStart(14, \"span\");\n      i0.ɵɵtext(15, \"code\");\n      i0.ɵɵelementEnd()()();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵproperty(\"parent\", ctx)(\"destroySubject\", ctx.destroySubject);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"parentCoordiantes\", ctx.nodePosition)(\"zoomLevel\", ctx.zoomLevel)(\"parent\", ctx);\n      i0.ɵɵadvance(7);\n      i0.ɵɵproperty(\"parentCoordiantes\", ctx.nodePosition)(\"zoomLevel\", ctx.zoomLevel)(\"parent\", ctx);\n    }\n  },\n  dependencies: [RelationsNodeHeaderSAComponent, RelationNodeInputSAComponent, RelationNodeOutputSAComponent],\n  encapsulation: 2,\n  changeDetection: 0\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(TransformDataNodeSAComponent, [{\n    type: Component,\n    args: [{\n      selector: 'transform-data-node',\n      standalone: true,\n      imports: [RelationsNodeHeaderSAComponent, RelationNodeInputSAComponent, RelationNodeOutputSAComponent],\n      changeDetection: ChangeDetectionStrategy.OnPush,\n      template: \"<relations-node-header [parent]=\\\"this\\\" [destroySubject]=\\\"destroySubject\\\" name=\\\"transform data\\\"></relations-node-header>\\n\\n<div class=\\\"node-content\\\">\\n    <div class=\\\"inputs-outputs\\\">\\n        <div class=\\\"inputs\\\">\\n            <div class=\\\"input\\\">\\n                <relation-node-input [parentCoordiantes]=\\\"nodePosition\\\" [zoomLevel]=\\\"zoomLevel\\\" name=\\\"data\\\" [parent]=\\\"this\\\"></relation-node-input>\\n                <div>data</div>\\n            </div>\\n        </div>\\n\\n        <div class=\\\"outputs\\\">\\n            <div class=\\\"output\\\">\\n                <div>transformed data</div>\\n                <relation-node-output [parentCoordiantes]=\\\"nodePosition\\\" [zoomLevel]=\\\"zoomLevel\\\" name=\\\"transformedData\\\" [parent]=\\\"this\\\"></relation-node-output>\\n            </div>\\n        </div>\\n    </div>\\n\\n    <button type=\\\"button\\\" class=\\\"dynamic-btn dynamic-btn-primary\\\" (click)=\\\"showCodeEditor()\\\">\\n        <span>code</span>\\n    </button>\\n</div>\"\n    }]\n  }], function () {\n    return [{\n      type: i0.ChangeDetectorRef\n    }, {\n      type: i0.ElementRef\n    }, {\n      type: i1.TitledDialogService\n    }];\n  }, null);\n})();","export default \"export {};\\n//# sourceMappingURL=transformData.interface.js.map\";","import { TransformDataNodeSAComponent } from '../node/transformDataNode.component';\n/**\n * Transform data relations metadata\n */\n\nexport class TransformDataRelationsEditorMetadata {\n  //######################### constructor #########################\n  constructor() {\n    //######################### public properties - implementation of RelationsEditorMetadataDescriptor #########################\n\n    /**\n     * @inheritdoc\n     */\n    this.metaInfo = {\n      name: 'Transform data',\n      description: 'Code that allows data tranformation',\n      group: 'Data'\n    };\n    /**\n     * @inheritdoc\n     */\n\n    this.nodeDefinition = TransformDataNodeSAComponent;\n    Object.freeze(this);\n  }\n\n}"],"names":["asyncGeneratorStep","gen","resolve","reject","_next","_throw","key","arg","info","value","error","done","Promise","then","TypescriptLanguageModel","initialValue","fn","_ref","editor","uri","getModel","worker","client","getEmitOutput","toString","outputFiles","text","self","this","args","arguments","apply","err","undefined","_x","TransformDataNodeSAComponent","constructor","changeDetector","element","dialog","super","showCodeEditor","_this","_a","result","lastValueFrom","open","title","width","height","data","content","metadata","nodeMetadata","options","languageModel","afterClosed","relationsOptions","code","history","getNewState","metadataSet","id","t","type","selectors","standalone","features","decls","vars","consts","template","rf","ctx","destroySubject","nodePosition","zoomLevel","dependencies","encapsulation","changeDetection","TransformDataRelationsEditorMetadata","metaInfo","name","description","group","nodeDefinition","Object","freeze"],"sourceRoot":""}